/*! For license information please see bundle.6071885e03f97e3e205e.js.LICENSE.txt */
(()=>{"use strict";var e,t,n={45:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(n(825));t.default=class{constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=r}select(e,t){const{head:n=!1,count:r}=null!=t?t:{},o=n?"HEAD":"GET";let i=!1;const s=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!i?"":('"'===e&&(i=!i),e)).join("");return this.url.searchParams.set("select",s),r&&this.headers.append("Prefer",`count=${r}`),new a.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:n=!0}={}){var r;if(t&&this.headers.append("Prefer",`count=${t}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new a.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:o=!0}={}){var i;if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),void 0!==t&&this.url.searchParams.set("on_conflict",t),r&&this.headers.append("Prefer",`count=${r}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new a.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}update(e,{count:t}={}){var n;return t&&this.headers.append("Prefer",`count=${t}`),new a.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}delete({count:e}={}){var t;return e&&this.headers.append("Prefer",`count=${e}`),new a.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(t=this.fetch)&&void 0!==t?t:fetch})}}},51:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(601),a=n.n(r),o=n(314),i=n.n(o)()(a());i.push([e.id,'.travel-planner-container {\n  min-height: 100vh;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  padding: 20px;\n}\n\n.travel-planner-card {\n  max-width: 1200px;\n  margin: 0 auto;\n  background: rgba(255, 255, 255, 0.95);\n  backdrop-filter: blur(10px);\n  border-radius: 20px;\n  padding: 40px;\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);\n}\n\n.planner-header {\n  text-align: center;\n  margin-bottom: 40px;\n}\n\n.planner-header h1 {\n  color: #2d3748;\n  margin-bottom: 10px;\n  font-size: 2.5rem;\n  font-weight: 700;\n}\n\n.planner-header p {\n  color: #718096;\n  font-size: 1.1rem;\n  line-height: 1.6;\n}\n\n.planner-form {\n  margin-bottom: 40px;\n}\n\n/* 偏好设置快速选择样式 */\n.preferences-quick-select {\n  background: #f7fafc;\n  border: 2px solid #e2e8f0;\n  border-radius: 12px;\n  padding: 25px;\n  margin-bottom: 30px;\n}\n\n.preferences-quick-select h3 {\n  color: #2d3748;\n  margin: 0 0 10px 0;\n  font-size: 18px;\n  font-weight: 600;\n}\n\n.preferences-quick-select p {\n  color: #718096;\n  margin: 0 0 20px 0;\n  font-size: 14px;\n}\n\n.preferences-buttons {\n  display: flex;\n  gap: 12px;\n  flex-wrap: wrap;\n  margin-bottom: 20px;\n}\n\n.preference-quick-button {\n  background: white;\n  border: 2px solid #e2e8f0;\n  border-radius: 8px;\n  padding: 10px 16px;\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 500;\n  color: #4a5568;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n}\n\n.preference-quick-button:hover {\n  border-color: #4299e1;\n  color: #2d3748;\n  transform: translateY(-1px);\n}\n\n.preference-quick-button.selected {\n  background: #4299e1;\n  border-color: #4299e1;\n  color: white;\n}\n\n.default-indicator {\n  font-size: 12px;\n}\n\n.selected-preference-info {\n  background: #e6fffa;\n  border: 1px solid #81e6d9;\n  border-radius: 8px;\n  padding: 15px;\n}\n\n.selected-preference-info p {\n  margin: 0 0 8px 0;\n  color: #2d3748;\n  font-size: 14px;\n}\n\n.selected-preference-info p:last-child {\n  margin-bottom: 0;\n}\n\n.preference-description {\n  color: #718096 !important;\n  font-size: 13px !important;\n  font-style: italic;\n}\n\n.form-row {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 20px;\n  margin-bottom: 20px;\n}\n\n.form-group {\n  margin-bottom: 20px;\n}\n\n.form-group label {\n  display: block;\n  margin-bottom: 8px;\n  color: #4a5568;\n  font-weight: 600;\n  font-size: 0.95rem;\n}\n\n.form-group input,\n.form-group textarea {\n  width: 100%;\n  padding: 12px 16px;\n  border: 2px solid #e2e8f0;\n  border-radius: 10px;\n  font-size: 1rem;\n  transition: all 0.3s ease;\n  background: #fff;\n  box-sizing: border-box;\n}\n\n.form-group input:focus,\n.form-group textarea:focus {\n  outline: none;\n  border-color: #667eea;\n  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);\n}\n\n.form-group input::placeholder,\n.form-group textarea::placeholder {\n  color: #a0aec0;\n}\n\n.form-group textarea {\n  resize: vertical;\n  min-height: 80px;\n}\n\n.generate-button {\n  width: 100%;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  border: none;\n  padding: 16px 24px;\n  border-radius: 12px;\n  font-size: 1.2rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);\n}\n\n.generate-button:hover:not(:disabled) {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);\n}\n\n.generate-button:disabled {\n  opacity: 0.7;\n  cursor: not-allowed;\n  transform: none;\n}\n\n.generated-plan {\n  background: #f7fafc;\n  border: 2px solid #e2e8f0;\n  border-radius: 15px;\n  padding: 30px;\n  margin-top: 30px;\n}\n\n.plan-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 30px;\n  flex-wrap: wrap;\n  gap: 15px;\n}\n\n.plan-header h2 {\n  color: #2d3748;\n  margin: 0;\n  font-size: 1.8rem;\n  font-weight: 700;\n}\n\n.plan-actions {\n  display: flex;\n  gap: 10px;\n}\n\n.save-button,\n.regenerate-button {\n  padding: 10px 20px;\n  border: none;\n  border-radius: 8px;\n  font-size: 0.9rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n\n.save-button {\n  background: #48bb78;\n  color: white;\n}\n\n.save-button:hover:not(:disabled) {\n  background: #38a169;\n}\n\n.regenerate-button {\n  background: #ed8936;\n  color: white;\n}\n\n.regenerate-button:hover {\n  background: #dd6b20;\n}\n\n.plan-overview {\n  background: white;\n  border-radius: 10px;\n  padding: 25px;\n  margin-bottom: 30px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);\n}\n\n.plan-overview h3 {\n  color: #2d3748;\n  margin-bottom: 20px;\n  font-size: 1.5rem;\n  font-weight: 600;\n}\n\n.overview-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n  gap: 15px;\n  margin-bottom: 20px;\n}\n\n.overview-item {\n  display: flex;\n  align-items: center;\n  padding: 10px;\n  background: #f7fafc;\n  border-radius: 8px;\n}\n\n.overview-item .label {\n  font-weight: 600;\n  color: #4a5568;\n  margin-right: 8px;\n}\n\n.overview-item .value {\n  color: #2d3748;\n  font-weight: 500;\n}\n\n.plan-summary {\n  background: #e6fffa;\n  border: 2px solid #38b2ac;\n  border-radius: 10px;\n  padding: 20px;\n  margin-top: 20px;\n}\n\n.plan-summary p {\n  color: #2d3748;\n  line-height: 1.6;\n  margin: 0;\n}\n\n.daily-plans {\n  margin-bottom: 30px;\n}\n\n.daily-plans h3 {\n  color: #2d3748;\n  margin-bottom: 20px;\n  font-size: 1.5rem;\n  font-weight: 600;\n}\n\n.day-plan {\n  background: white;\n  border-radius: 10px;\n  padding: 25px;\n  margin-bottom: 20px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);\n}\n\n.day-plan h4 {\n  color: #2d3748;\n  margin-bottom: 20px;\n  font-size: 1.3rem;\n  font-weight: 600;\n  border-bottom: 2px solid #e2e8f0;\n  padding-bottom: 10px;\n}\n\n.activities h5 {\n  color: #4a5568;\n  margin-bottom: 15px;\n  font-size: 1.1rem;\n  font-weight: 600;\n}\n\n.activity {\n  display: flex;\n  gap: 15px;\n  margin-bottom: 15px;\n  padding: 15px;\n  background: #f7fafc;\n  border-radius: 8px;\n  border-left: 4px solid #667eea;\n}\n\n.activity-time {\n  min-width: 80px;\n  font-weight: 600;\n  color: #667eea;\n  font-size: 0.9rem;\n}\n\n.activity-content {\n  flex: 1;\n}\n\n.activity-title {\n  font-weight: 600;\n  color: #2d3748;\n  margin-bottom: 5px;\n}\n\n.activity-location {\n  color: #718096;\n  font-size: 0.9rem;\n  margin-bottom: 5px;\n}\n\n.activity-description {\n  color: #4a5568;\n  font-size: 0.9rem;\n  line-height: 1.5;\n}\n\n.recommendations {\n  margin-bottom: 30px;\n}\n\n.recommendations h3 {\n  color: #2d3748;\n  margin-bottom: 20px;\n  font-size: 1.5rem;\n  font-weight: 600;\n}\n\n.recommendation-section {\n  background: white;\n  border-radius: 10px;\n  padding: 25px;\n  margin-bottom: 20px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);\n}\n\n.recommendation-section h4 {\n  color: #2d3748;\n  margin-bottom: 20px;\n  font-size: 1.3rem;\n  font-weight: 600;\n}\n\n.recommendation-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n  gap: 20px;\n}\n\n.recommendation-item {\n  background: #f7fafc;\n  border-radius: 8px;\n  padding: 20px;\n  border: 2px solid #e2e8f0;\n  transition: all 0.3s ease;\n}\n\n.recommendation-item:hover {\n  border-color: #667eea;\n  transform: translateY(-2px);\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);\n}\n\n.recommendation-item h5 {\n  color: #2d3748;\n  margin-bottom: 10px;\n  font-size: 1.1rem;\n  font-weight: 600;\n}\n\n.recommendation-item p {\n  color: #4a5568;\n  line-height: 1.5;\n  margin-bottom: 15px;\n}\n\n.recommendation-meta {\n  display: flex;\n  gap: 15px;\n  flex-wrap: wrap;\n}\n\n.recommendation-meta span {\n  background: #e2e8f0;\n  color: #4a5568;\n  padding: 4px 8px;\n  border-radius: 4px;\n  font-size: 0.8rem;\n  font-weight: 500;\n}\n\n.travel-tips {\n  background: white;\n  border-radius: 10px;\n  padding: 25px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);\n}\n\n.travel-tips h3 {\n  color: #2d3748;\n  margin-bottom: 20px;\n  font-size: 1.5rem;\n  font-weight: 600;\n}\n\n.travel-tips ul {\n  list-style: none;\n  padding: 0;\n}\n\n.travel-tips li {\n  background: #e6fffa;\n  border: 2px solid #38b2ac;\n  border-radius: 8px;\n  padding: 15px;\n  margin-bottom: 10px;\n  color: #2d3748;\n  line-height: 1.5;\n  position: relative;\n  padding-left: 40px;\n}\n\n.travel-tips li::before {\n  content: "💡";\n  position: absolute;\n  left: 15px;\n  top: 15px;\n}\n\n/* 关闭按钮样式 */\n.close-button {\n  background: #e53e3e;\n  color: white;\n  border: none;\n  padding: 10px 20px;\n  border-radius: 8px;\n  font-size: 0.9rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n\n.close-button:hover {\n  background: #c53030;\n  transform: translateY(-1px);\n}\n\n/* 状态管理样式 */\n.status-section {\n  background: white;\n  border-radius: 10px;\n  padding: 25px;\n  margin-bottom: 30px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);\n}\n\n.status-section h3 {\n  color: #2d3748;\n  margin-bottom: 20px;\n  font-size: 1.5rem;\n  font-weight: 600;\n}\n\n/* 预算分配样式 */\n.budget-section {\n  background: white;\n  border-radius: 10px;\n  padding: 25px;\n  margin-bottom: 30px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);\n}\n\n.budget-section h3 {\n  color: #2d3748;\n  margin-bottom: 20px;\n  font-size: 1.5rem;\n  font-weight: 600;\n}\n\n/* 语音输入相关样式 */\n\n.voice-input-section {\n  background: #f8f9fa;\n  border: 2px solid #e9ecef;\n  border-radius: 12px;\n  padding: 25px;\n  margin-bottom: 30px;\n}\n\n.voice-input-section h3 {\n  color: #2d3748;\n  margin-bottom: 10px;\n  font-size: 1.4rem;\n  font-weight: 600;\n}\n\n.voice-input-section p {\n  color: #718096;\n  margin-bottom: 20px;\n  font-size: 0.95rem;\n  line-height: 1.5;\n}\n\n.voice-input-wrapper {\n  margin-top: 10px;\n}\n\n.voice-text-display {\n  margin-top: 20px;\n  padding-top: 20px;\n  border-top: 1px solid #e2e8f0;\n}\n\n.voice-text-display label {\n  display: block;\n  margin-bottom: 8px;\n  color: #4a5568;\n  font-weight: 600;\n  font-size: 0.95rem;\n}\n\n.voice-textarea {\n  width: 100%;\n  padding: 12px 16px;\n  border: 2px solid #e2e8f0;\n  border-radius: 10px;\n  font-size: 1rem;\n  transition: all 0.3s ease;\n  background: #fff;\n  box-sizing: border-box;\n  resize: vertical;\n  min-height: 80px;\n}\n\n.voice-textarea:focus {\n  outline: none;\n  border-color: #667eea;\n  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);\n}\n\n.voice-textarea::placeholder {\n  color: #a0aec0;\n}\n\n.voice-text-actions {\n  display: flex;\n  gap: 10px;\n  margin-top: 15px;\n  flex-wrap: wrap;\n}\n\n.clear-voice-button {\n  padding: 8px 16px;\n  background: linear-gradient(135deg, #f56565, #e53e3e);\n  color: white;\n  border: none;\n  border-radius: 8px;\n  font-size: 0.9rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n}\n\n.clear-voice-button:hover {\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(245, 101, 101, 0.3);\n}\n\n.analyze-voice-button {\n  padding: 8px 16px;\n  background: linear-gradient(135deg, #667eea, #764ba2);\n  color: white;\n  border: none;\n  border-radius: 8px;\n  font-size: 0.9rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n}\n\n.analyze-voice-button:hover:not(:disabled) {\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);\n}\n\n.analyze-voice-button:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n  transform: none;\n}\n\n.voice-controls {\n  display: flex;\n  gap: 10px;\n  align-items: center;\n  flex-wrap: wrap;\n}\n\n.voice-input-button {\n  padding: 10px 15px;\n  background: linear-gradient(135deg, #4CAF50, #2E7D32);\n  color: white;\n  border: none;\n  border-radius: 8px;\n  font-size: 1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.voice-input-button:hover:not(:disabled) {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);\n}\n\n.voice-input-button.listening {\n  background: linear-gradient(135deg, #f44336, #d32f2f);\n  animation: pulse 1.5s infinite;\n}\n\n.voice-input-button:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n  transform: none;\n}\n\n.test-microphone-button {\n  padding: 10px 15px;\n  background: linear-gradient(135deg, #FF9800, #F57C00);\n  color: white;\n  border: none;\n  border-radius: 8px;\n  font-size: 0.9rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.test-microphone-button:hover:not(:disabled) {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(255, 152, 0, 0.3);\n}\n\n.test-microphone-button:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n  transform: none;\n}\n\n.format-toggle-button {\n  padding: 10px 15px;\n  background: linear-gradient(135deg, #9C27B0, #7B1FA2);\n  color: white;\n  border: none;\n  border-radius: 8px;\n  font-size: 0.9rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.format-toggle-button:hover:not(:disabled) {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(156, 39, 176, 0.3);\n}\n\n.format-toggle-button.active {\n  background: linear-gradient(135deg, #4CAF50, #2E7D32);\n}\n\n.format-toggle-button:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n  transform: none;\n}\n\n.audio-level-indicator {\n  margin-top: 10px;\n  padding: 10px;\n  background: #f5f5f5;\n  border-radius: 8px;\n  border: 1px solid #e0e0e0;\n}\n\n.audio-level-label {\n  font-size: 0.9rem;\n  color: #666;\n  margin-bottom: 5px;\n  font-weight: 500;\n}\n\n.audio-level-bar {\n  width: 100%;\n  height: 8px;\n  background: #e0e0e0;\n  border-radius: 4px;\n  overflow: hidden;\n}\n\n.audio-level-fill {\n  height: 100%;\n  border-radius: 4px;\n  transition: all 0.1s ease;\n  box-shadow: 0 0 8px rgba(0, 0, 0, 0.2);\n}\n\n.test-mic-indicator {\n  background: #f0f8ff;\n  border: 1px solid #87ceeb;\n}\n\n.test-mic-indicator .audio-level-label {\n  color: #4682b4;\n  font-weight: 600;\n}\n\n@keyframes pulse {\n  0% {\n    box-shadow: 0 0 0 0 rgba(244, 67, 54, 0.7);\n  }\n  70% {\n    box-shadow: 0 0 0 10px rgba(244, 67, 54, 0);\n  }\n  100% {\n    box-shadow: 0 0 0 0 rgba(244, 67, 54, 0);\n  }\n}\n\n.voice-text-preview {\n  margin-top: 8px;\n  padding: 8px 12px;\n  background-color: #e3f2fd;\n  border: 1px dashed #2196f3;\n  border-radius: 6px;\n  color: #1976d2;\n  font-size: 0.9rem;\n  font-style: italic;\n}\n\n.voice-input-error {\n  margin-top: 10px;\n  padding: 12px;\n  background-color: #ffebee;\n  border: 1px solid #ffcdd2;\n  border-radius: 6px;\n  color: #c62828;\n  font-size: 0.9rem;\n}\n\n.permission-help {\n  margin-top: 8px;\n  font-size: 0.85rem;\n  font-style: italic;\n}\n\n.browser-recommendation {\n  margin-top: 8px;\n  font-weight: 500;\n}\n\n.voice-recording-indicator {\n  margin-top: 8px;\n  padding: 6px 10px;\n  background-color: #e8f5e9;\n  border: 1px solid #a5d6a7;\n  border-radius: 4px;\n  color: #2e7d32;\n  font-size: 0.85rem;\n  animation: blink 1s infinite;\n}\n\n@keyframes blink {\n  50% {\n    opacity: 0.5;\n  }\n}\n\n/* 响应式设计 */\n@media (max-width: 768px) {\n  .travel-planner-container {\n    padding: 10px;\n  }\n  \n  .travel-planner-card {\n    padding: 20px;\n  }\n  \n  .planner-header h1 {\n    font-size: 2rem;\n  }\n  \n  .form-row {\n    grid-template-columns: 1fr;\n  }\n  \n  .plan-header {\n    flex-direction: column;\n    align-items: stretch;\n  }\n  \n  .plan-actions {\n    justify-content: center;\n  }\n  \n  .overview-grid {\n    grid-template-columns: 1fr;\n  }\n  \n  .recommendation-grid {\n    grid-template-columns: 1fr;\n  }\n  \n  .activity {\n    flex-direction: column;\n    gap: 10px;\n  }\n  \n  .activity-time {\n    min-width: auto;\n  }\n}\n',""]);const s=i},56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},72:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var o={},i=[],s=0;s<e.length;s++){var l=e[s],c=r.base?l[0]+r.base:l[0],u=o[c]||0,d="".concat(c," ").concat(u);o[c]=u+1;var f=n(d),h={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==f)t[f].references++,t[f].updater(h);else{var p=a(h,r);r.byIndex=s,t.splice(s,0,{identifier:d,updater:p,references:1})}i.push(d)}return i}function a(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,a){var o=r(e=e||[],a=a||{});return function(e){e=e||[];for(var i=0;i<o.length;i++){var s=n(o[i]);t[s].references--}for(var l=r(e,a),c=0;c<o.length;c++){var u=n(o[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}o=l}}},73:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(601),a=n.n(r),o=n(314),i=n.n(o)()(a());i.push([e.id,"/* 旅行地图组件样式 */\n.travel-map-container {\n  background: white;\n  border-radius: 12px;\n  padding: 25px;\n  margin-top: 20px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n}\n\n.map-header {\n  margin-bottom: 20px;\n  padding-bottom: 15px;\n  border-bottom: 2px solid #e2e8f0;\n}\n\n.map-header h3 {\n  margin: 0 0 8px 0;\n  color: #2d3748;\n  font-size: 20px;\n  font-weight: 600;\n}\n\n.map-header p {\n  margin: 0;\n  color: #718096;\n  font-size: 14px;\n}\n\n.map-controls {\n  margin-bottom: 20px;\n}\n\n.route-selection {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 20px;\n  margin-bottom: 20px;\n}\n\n.selection-group {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.selection-group label {\n  color: #2d3748;\n  font-weight: 500;\n  font-size: 14px;\n}\n\n.selection-group select {\n  padding: 10px 12px;\n  border: 1px solid #e2e8f0;\n  border-radius: 6px;\n  font-size: 14px;\n  color: #2d3748;\n  background: white;\n  transition: border-color 0.2s;\n}\n\n.selection-group select:focus {\n  outline: none;\n  border-color: #4299e1;\n  box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.1);\n}\n\n.route-actions {\n  display: flex;\n  gap: 12px;\n  justify-content: center;\n}\n\n.plan-route-button,\n.clear-route-button {\n  padding: 10px 20px;\n  border: none;\n  border-radius: 6px;\n  font-size: 14px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.plan-route-button {\n  background: #4299e1;\n  color: white;\n}\n\n.plan-route-button:hover:not(:disabled) {\n  background: #3182ce;\n  transform: translateY(-1px);\n}\n\n.plan-route-button:disabled {\n  background: #cbd5e0;\n  color: #a0aec0;\n  cursor: not-allowed;\n}\n\n.clear-route-button {\n  background: #e2e8f0;\n  color: #4a5568;\n}\n\n.clear-route-button:hover {\n  background: #cbd5e0;\n  color: #2d3748;\n}\n\n.route-info {\n  background: #f7fafc;\n  border: 1px solid #e2e8f0;\n  border-radius: 8px;\n  padding: 20px;\n  margin-bottom: 20px;\n}\n\n.route-info h4 {\n  margin: 0 0 15px 0;\n  color: #2d3748;\n  font-size: 16px;\n  font-weight: 600;\n}\n\n.route-stats {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n  gap: 15px;\n}\n\n.stat-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 10px 15px;\n  background: white;\n  border-radius: 6px;\n  border: 1px solid #e2e8f0;\n}\n\n.stat-item .label {\n  color: #4a5568;\n  font-size: 14px;\n  font-weight: 500;\n}\n\n.stat-item .value {\n  color: #2d3748;\n  font-size: 14px;\n  font-weight: 600;\n}\n\n.map-container {\n  position: relative;\n  height: 400px;\n  border-radius: 8px;\n  overflow: hidden;\n  border: 2px solid #e2e8f0;\n}\n\n.baidu-map {\n  width: 100%;\n  height: 100%;\n}\n\n.map-loading {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  background: #f7fafc;\n  color: #718096;\n}\n\n.loading-spinner {\n  width: 40px;\n  height: 40px;\n  border: 4px solid #e2e8f0;\n  border-top: 4px solid #4299e1;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n  margin-bottom: 15px;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n.map-loading p {\n  margin: 0;\n  font-size: 14px;\n}\n\n.no-attractions,\n.api-key-warning {\n  background: #fed7d7;\n  color: #c53030;\n  padding: 15px;\n  border-radius: 8px;\n  border: 1px solid #feb2b2;\n  margin-top: 20px;\n}\n\n.no-attractions p,\n.api-key-warning p {\n  margin: 0 0 8px 0;\n  font-size: 14px;\n}\n\n.api-key-warning p:last-child {\n  margin-bottom: 0;\n  font-size: 12px;\n  opacity: 0.8;\n}\n\n/* 地图信息窗口样式 */\n.map-info-window {\n  padding: 10px;\n}\n\n.map-info-window h4 {\n  margin: 0 0 8px 0;\n  color: #2d3748;\n  font-size: 14px;\n  font-weight: 600;\n}\n\n.map-info-window p {\n  margin: 0 0 4px 0;\n  color: #4a5568;\n  font-size: 12px;\n}\n\n.map-info-window p:last-child {\n  margin-bottom: 0;\n}\n\n/* 响应式设计 */\n@media (max-width: 768px) {\n  .route-selection {\n    grid-template-columns: 1fr;\n    gap: 15px;\n  }\n  \n  .route-actions {\n    flex-direction: column;\n  }\n  \n  .plan-route-button,\n  .clear-route-button {\n    width: 100%;\n  }\n  \n  .route-stats {\n    grid-template-columns: 1fr;\n  }\n  \n  .map-container {\n    height: 300px;\n  }\n}\n\n@media (max-width: 480px) {\n  .travel-map-container {\n    padding: 15px;\n  }\n  \n  .map-container {\n    height: 250px;\n  }\n}\n\n/* 路线步骤样式 */\n.route-steps {\n  margin-top: 15px;\n  padding-top: 15px;\n  border-top: 1px solid #e0e0e0;\n}\n\n.route-steps h5 {\n  margin: 0 0 10px 0;\n  color: #2c3e50;\n  font-size: 14px;\n}\n\n.steps-list {\n  max-height: 300px;\n  overflow-y: auto;\n}\n\n.step-item {\n  display: flex;\n  margin-bottom: 10px;\n  padding: 8px;\n  background: #f8f9fa;\n  border-radius: 6px;\n  border-left: 3px solid #3498db;\n}\n\n.step-number {\n  width: 24px;\n  height: 24px;\n  background: #3498db;\n  color: white;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 12px;\n  font-weight: bold;\n  margin-right: 10px;\n  flex-shrink: 0;\n}\n\n.step-content {\n  flex: 1;\n}\n\n.step-instruction {\n  font-size: 13px;\n  color: #2c3e50;\n  margin-bottom: 4px;\n  line-height: 1.4;\n}\n\n.step-details {\n  display: flex;\n  gap: 10px;\n  font-size: 11px;\n  color: #7f8c8d;\n}\n\n.step-details .distance,\n.step-details .duration {\n  background: #ecf0f1;\n  padding: 2px 6px;\n  border-radius: 3px;\n}\n",""]);const s=i},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},159:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},206:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,a&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},261:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(n(660));class o extends a.default{select(e){let t=!1;const n=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:a=r}={}){const o=a?`${a}.order`:"order",i=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${i?`${i},`:""}${e}.${t?"asc":"desc"}${void 0===n?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const r=void 0===n?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){const a=void 0===r?"offset":`${r}.offset`,o=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(o,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:a=!1,format:o="text"}={}){var i;const s=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,a?"wal":null].filter(Boolean).join("|"),l=null!==(i=this.headers.get("Accept"))&&void 0!==i?i:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${l}"; options=${s};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}}t.default=o},275:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(601),a=n.n(r),o=n(314),i=n.n(o)()(a());i.push([e.id,".dashboard-container {\n  min-height: 100vh;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n}\n\n.dashboard-header {\n  background: rgba(255, 255, 255, 0.95);\n  backdrop-filter: blur(10px);\n  padding: 20px 0;\n  box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);\n}\n\n.header-content {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 0 20px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.header-left h1 {\n  color: #4a5568;\n  margin: 0 0 5px 0;\n  font-size: 1.8rem;\n  font-weight: 700;\n}\n\n.header-left p {\n  color: #718096;\n  margin: 0;\n  font-size: 1rem;\n}\n\n.logout-button {\n  background: #e53e3e;\n  color: white;\n  border: none;\n  padding: 10px 20px;\n  border-radius: 8px;\n  font-size: 0.9rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n\n.logout-button:hover {\n  background: #c53030;\n  transform: translateY(-1px);\n}\n\n.back-button {\n  background: #4299e1;\n  color: white;\n  border: none;\n  padding: 10px 20px;\n  border-radius: 8px;\n  font-size: 0.9rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  margin-right: 10px;\n}\n\n.back-button:hover {\n  background: #3182ce;\n  transform: translateY(-1px);\n}\n\n.dashboard-main {\n  padding: 40px 20px;\n}\n\n.dashboard-content {\n  max-width: 1200px;\n  margin: 0 auto;\n}\n\n.welcome-section {\n  background: rgba(255, 255, 255, 0.95);\n  backdrop-filter: blur(10px);\n  border-radius: 20px;\n  padding: 40px;\n  margin-bottom: 30px;\n  text-align: center;\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);\n}\n\n.welcome-section h2 {\n  color: #2d3748;\n  margin-bottom: 10px;\n  font-size: 2rem;\n  font-weight: 700;\n}\n\n.welcome-section p {\n  color: #718096;\n  margin-bottom: 30px;\n  font-size: 1.1rem;\n}\n\n.welcome-actions {\n  display: flex;\n  gap: 15px;\n  justify-content: center;\n  flex-wrap: wrap;\n}\n\n.create-plan-button {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  border: none;\n  padding: 15px 30px;\n  border-radius: 12px;\n  font-size: 1.1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);\n}\n\n.create-plan-button:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);\n}\n\n.preferences-button {\n  background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);\n  color: white;\n  border: none;\n  padding: 15px 30px;\n  border-radius: 12px;\n  font-size: 1.1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 15px rgba(72, 187, 120, 0.3);\n}\n\n.preferences-button:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(72, 187, 120, 0.4);\n}\n\n.plans-section {\n  background: rgba(255, 255, 255, 0.95);\n  backdrop-filter: blur(10px);\n  border-radius: 20px;\n  padding: 40px;\n  margin-bottom: 30px;\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);\n}\n\n.empty-state {\n  text-align: center;\n  padding: 60px 20px;\n}\n\n.empty-icon {\n  font-size: 4rem;\n  margin-bottom: 20px;\n}\n\n.empty-state h3 {\n  color: #2d3748;\n  margin-bottom: 10px;\n  font-size: 1.5rem;\n  font-weight: 600;\n}\n\n.empty-state p {\n  color: #718096;\n  margin-bottom: 30px;\n  font-size: 1rem;\n}\n\n.create-first-plan-button {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  border: none;\n  padding: 12px 24px;\n  border-radius: 10px;\n  font-size: 1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);\n}\n\n.create-first-plan-button:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);\n}\n\n.plans-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n  gap: 20px;\n}\n\n.plan-card {\n  background: #f7fafc;\n  border: 2px solid #e2e8f0;\n  border-radius: 15px;\n  padding: 20px;\n  transition: all 0.3s ease;\n}\n\n.plan-card:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);\n  border-color: #667eea;\n}\n\n.plan-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 15px;\n}\n\n.plan-header h3 {\n  color: #2d3748;\n  margin: 0;\n  font-size: 1.3rem;\n  font-weight: 600;\n}\n\n.plan-status {\n  background: #48bb78;\n  color: white;\n  padding: 4px 12px;\n  border-radius: 20px;\n  font-size: 0.8rem;\n  font-weight: 600;\n}\n\n.plan-details {\n  margin-bottom: 20px;\n}\n\n.plan-details p {\n  color: #4a5568;\n  margin: 8px 0;\n  font-size: 0.95rem;\n}\n\n.plan-actions {\n  display: flex;\n  gap: 10px;\n}\n\n.view-button {\n  width: 100%;\n  padding: 8px 16px;\n  border: none;\n  border-radius: 8px;\n  font-size: 0.9rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  background: #667eea;\n  color: white;\n}\n\n.view-button:hover {\n  background: #5a67d8;\n}\n\n.stats-section {\n  background: rgba(255, 255, 255, 0.95);\n  backdrop-filter: blur(10px);\n  border-radius: 20px;\n  padding: 40px;\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);\n}\n\n.stats-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));\n  gap: 15px;\n}\n\n.stat-card {\n  background: #f7fafc;\n  border: 2px solid #e2e8f0;\n  border-radius: 15px;\n  padding: 25px;\n  text-align: center;\n  transition: all 0.3s ease;\n}\n\n.stat-card:hover {\n  transform: translateY(-2px);\n  border-color: #667eea;\n  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);\n}\n\n.stat-icon {\n  font-size: 2.5rem;\n  margin-bottom: 15px;\n}\n\n.stat-content h3 {\n  color: #2d3748;\n  margin: 0 0 5px 0;\n  font-size: 2rem;\n  font-weight: 700;\n}\n\n.stat-content p {\n  color: #718096;\n  margin: 0;\n  font-size: 1rem;\n  font-weight: 600;\n}\n\n/* 加载状态样式 */\n.loading-state {\n  text-align: center;\n  padding: 60px 20px;\n}\n\n.loading-state .loading-spinner {\n  color: #667eea;\n}\n\n.loading-state .spinner {\n  width: 40px;\n  height: 40px;\n  border: 3px solid rgba(102, 126, 234, 0.3);\n  border-top: 3px solid #667eea;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n  margin: 0 auto 15px;\n}\n\n.loading-state p {\n  color: #718096;\n  font-size: 1rem;\n  font-weight: 600;\n}\n\n/* 响应式设计 */\n@media (max-width: 768px) {\n  .header-content {\n    flex-direction: column;\n    gap: 15px;\n    text-align: center;\n  }\n  \n  .dashboard-main {\n    padding: 20px 10px;\n  }\n  \n  .welcome-section, .plans-section, .stats-section {\n    padding: 30px 20px;\n  }\n  \n  .plans-grid {\n    grid-template-columns: 1fr;\n  }\n  \n  .stats-grid {\n    grid-template-columns: repeat(2, 1fr);\n  }\n}\n\n@media (max-width: 480px) {\n  .stats-grid {\n    grid-template-columns: 1fr;\n  }\n  \n  .plan-actions {\n    flex-direction: column;\n  }\n}\n",""]);const s=i},279:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;const a=r(n(342));t.PostgrestClient=a.default;const o=r(n(45));t.PostgrestQueryBuilder=o.default;const i=r(n(825));t.PostgrestFilterBuilder=i.default;const s=r(n(261));t.PostgrestTransformBuilder=s.default;const l=r(n(660));t.PostgrestBuilder=l.default;const c=r(n(818));t.PostgrestError=c.default,t.default={PostgrestClient:a.default,PostgrestQueryBuilder:o.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:l.default,PostgrestError:c.default}},287:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.iterator,p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=b.prototype=new y;w.constructor=b,m(w,v.prototype),w.isPureReactComponent=!0;var _=Array.isArray,x=Object.prototype.hasOwnProperty,E={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var a,o={},i=null,s=null;if(null!=t)for(a in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(i=""+t.key),t)x.call(t,a)&&!k.hasOwnProperty(a)&&(o[a]=t[a]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(a in l=e.defaultProps)void 0===o[a]&&(o[a]=l[a]);return{$$typeof:n,type:e,key:i,ref:s,props:o,_owner:E.current}}function O(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var P=/\/+/g;function T(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function C(e,t,a,o,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return i=i(l=e),e=""===o?"."+T(l,0):o,_(i)?(a="",null!=e&&(a=e.replace(P,"$&/")+"/"),C(i,t,a,"",function(e){return e})):null!=i&&(O(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,a+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(P,"$&/")+"/")+e)),t.push(i)),1;if(l=0,o=""===o?".":o+":",_(e))for(var c=0;c<e.length;c++){var u=o+T(s=e[c],c);l+=C(s,t,a,u,i)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"==typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=C(s=s.value,t,a,u=o+T(s,c++),i);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function N(e,t,n){if(null==e)return e;var r=[],a=0;return C(e,r,"","",function(e){return t.call(n,e,a++)}),r}function j(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A={current:null},R={transition:null},I={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:R,ReactCurrentOwner:E};function $(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:N,forEach:function(e,t,n){N(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return N(e,function(){t++}),t},toArray:function(e){return N(e,function(e){return e})||[]},only:function(e){if(!O(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=a,t.Profiler=i,t.PureComponent=b,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,t.act=$,t.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=m({},e.props),o=e.key,i=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,s=E.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)x.call(t,c)&&!k.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];a.children=l}return{$$typeof:n,type:e.type,key:o,ref:i,props:a,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=O,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:j}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=$,t.useCallback=function(e,t){return A.current.useCallback(e,t)},t.useContext=function(e){return A.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return A.current.useDeferredValue(e)},t.useEffect=function(e,t){return A.current.useEffect(e,t)},t.useId=function(){return A.current.useId()},t.useImperativeHandle=function(e,t,n){return A.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return A.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return A.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return A.current.useMemo(e,t)},t.useReducer=function(e,t,n){return A.current.useReducer(e,t,n)},t.useRef=function(e){return A.current.useRef(e)},t.useState=function(e){return A.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return A.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return A.current.useTransition()},t.version="18.3.1"},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n}).join("")},t.i=function(e,n,r,a,o){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(r)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(i[l]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);r&&i[u[0]]||(void 0!==o&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=o),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),a&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=a):u[4]="".concat(a)),t.push(u))}},t}},338:(e,t,n)=>{var r=n(961);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},342:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(n(45)),o=r(n(825));class i{constructor(e,{headers:t={},schema:n,fetch:r}={}){this.url=e,this.headers=new Headers(t),this.schemaName=n,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new a.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new i(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:n=!1,get:r=!1,count:a}={}){var i;let s;const l=new URL(`${this.url}/rpc/${e}`);let c;n||r?(s=n?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{l.searchParams.append(e,t)})):(s="POST",c=t);const u=new Headers(this.headers);return a&&u.set("Prefer",`count=${a}`),new o.default({method:s,url:l,headers:u,schema:this.schemaName,body:c,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}}t.default=i},463:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<o(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,i=a>>>1;r<i;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>o(l,n))c<a&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<a&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,f=null,h=3,p=!1,m=!1,g=!1,v="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)a(u);else{if(!(t.startTime<=e))break;a(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function _(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,R(x);else{var t=r(u);null!==t&&I(_,t.startTime-e)}}function x(e,n){m=!1,g&&(g=!1,y(O),O=-1),p=!0;var o=h;try{for(w(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!C());){var i=f.callback;if("function"==typeof i){f.callback=null,h=f.priorityLevel;var s=i(f.expirationTime<=n);n=t.unstable_now(),"function"==typeof s?f.callback=s:f===r(c)&&a(c),w(n)}else a(c);f=r(c)}if(null!==f)var l=!0;else{var d=r(u);null!==d&&I(_,d.startTime-n),l=!1}return l}finally{f=null,h=o,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,k=!1,S=null,O=-1,P=5,T=-1;function C(){return!(t.unstable_now()-T<P)}function N(){if(null!==S){var e=t.unstable_now();T=e;var n=!0;try{n=S(!0,e)}finally{n?E():(k=!1,S=null)}}else k=!1}if("function"==typeof b)E=function(){b(N)};else if("undefined"!=typeof MessageChannel){var j=new MessageChannel,A=j.port2;j.port1.onmessage=N,E=function(){A.postMessage(null)}}else E=function(){v(N,0)};function R(e){S=e,k||(k=!0,E())}function I(e,n){O=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,R(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,a,o){var i=t.unstable_now();switch(o="object"==typeof o&&null!==o&&"number"==typeof(o=o.delay)&&0<o?i+o:i,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:a,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>i?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(g?(y(O),O=-1):g=!0,I(_,o-i))):(e.sortIndex=s,n(c,e),m||p||(m=!0,R(x))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},469:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(601),a=n.n(r),o=n(314),i=n.n(o)()(a());i.push([e.id,".auth-container {\n  min-height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  padding: 20px;\n}\n\n.auth-card {\n  background: rgba(255, 255, 255, 0.95);\n  backdrop-filter: blur(10px);\n  border-radius: 20px;\n  padding: 40px;\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);\n  width: 100%;\n  max-width: 450px;\n  animation: slideUp 0.6s ease-out;\n}\n\n@keyframes slideUp {\n  from {\n    opacity: 0;\n    transform: translateY(30px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.auth-header {\n  text-align: center;\n  margin-bottom: 30px;\n}\n\n.auth-header h1 {\n  color: #4a5568;\n  margin-bottom: 10px;\n  font-size: 2.2rem;\n  font-weight: 700;\n}\n\n.auth-header h2 {\n  color: #2d3748;\n  margin-bottom: 10px;\n  font-size: 1.8rem;\n  font-weight: 600;\n}\n\n.auth-header p {\n  color: #718096;\n  font-size: 1rem;\n  line-height: 1.5;\n}\n\n.auth-form {\n  margin-bottom: 30px;\n}\n\n.form-group {\n  margin-bottom: 20px;\n}\n\n.form-group label {\n  display: block;\n  margin-bottom: 8px;\n  color: #4a5568;\n  font-weight: 600;\n  font-size: 0.95rem;\n}\n\n.form-group input {\n  width: 100%;\n  padding: 12px 16px;\n  border: 2px solid #e2e8f0;\n  border-radius: 10px;\n  font-size: 1rem;\n  transition: all 0.3s ease;\n  background: #fff;\n}\n\n.form-group input:focus {\n  outline: none;\n  border-color: #667eea;\n  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);\n}\n\n.form-group input::placeholder {\n  color: #a0aec0;\n}\n\n.error-message {\n  background: #fed7d7;\n  color: #c53030;\n  padding: 12px 16px;\n  border-radius: 10px;\n  margin-bottom: 20px;\n  font-size: 0.9rem;\n  border-left: 4px solid #e53e3e;\n}\n\n.auth-button {\n  width: 100%;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  border: none;\n  padding: 14px 24px;\n  border-radius: 12px;\n  font-size: 1.1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);\n}\n\n.auth-button:hover:not(:disabled) {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);\n}\n\n.auth-button:active {\n  transform: translateY(0);\n}\n\n.auth-button:disabled {\n  opacity: 0.7;\n  cursor: not-allowed;\n  transform: none;\n}\n\n.auth-footer {\n  text-align: center;\n  padding-top: 20px;\n  border-top: 1px solid #e2e8f0;\n}\n\n.auth-footer p {\n  color: #718096;\n  font-size: 0.95rem;\n}\n\n.auth-footer a {\n  color: #667eea;\n  text-decoration: none;\n  font-weight: 600;\n  transition: color 0.3s ease;\n}\n\n.auth-footer a:hover {\n  color: #764ba2;\n}\n\n/* 响应式设计 */\n@media (max-width: 768px) {\n  .auth-container {\n    padding: 10px;\n  }\n  \n  .auth-card {\n    padding: 30px 20px;\n  }\n  \n  .auth-header h1 {\n    font-size: 1.8rem;\n  }\n  \n  .auth-header h2 {\n    font-size: 1.5rem;\n  }\n}\n",""]);const s=i},523:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(601),a=n.n(r),o=n(314),i=n.n(o)()(a());i.push([e.id,"* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nbody {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n    sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  min-height: 100vh;\n}\n\n#root {\n  min-height: 100vh;\n}\n",""]);const s=i},540:(e,t,n)=>{e.exports=n(287)},551:(e,t,n)=>{var r=n(540),a=n(982);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)i.add(t[e])}var u=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function m(e,t,n,r,a,o,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var a=g.hasOwnProperty(t)?g[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!d.call(p,e)||!d.call(h,e)&&(f.test(e)?p[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),x=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),P=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var I=Symbol.iterator;function $(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=I&&e[I]||e["@@iterator"])?e:null}var D,L=Object.assign;function z(e){if(void 0===D)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var U=!1;function M(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(t){if(t&&r&&"string"==typeof t.stack){for(var a=t.stack.split("\n"),o=r.stack.split("\n"),i=a.length-1,s=o.length-1;1<=i&&0<=s&&a[i]!==o[s];)s--;for(;1<=i&&0<=s;i--,s--)if(a[i]!==o[s]){if(1!==i||1!==s)do{if(i--,0>--s||a[i]!==o[s]){var l="\n"+a[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=s);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function F(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return M(e.type,!1);case 11:return M(e.type.render,!1);case 1:return M(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case E:return"Fragment";case x:return"Portal";case S:return"Profiler";case k:return"StrictMode";case C:return"Suspense";case N:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case P:return(e.displayName||"Context")+".Consumer";case O:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case j:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return B(e(t))}catch(e){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function V(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var a=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function X(e,t){Y(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function oe(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(he).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]})});var ve=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,Ee=null,ke=null;function Se(e){if(e=ba(e)){if("function"!=typeof xe)throw Error(o(280));var t=e.stateNode;t&&(t=_a(t),xe(e.stateNode,e.type,t))}}function Oe(e){Ee?ke?ke.push(e):ke=[e]:Ee=e}function Pe(){if(Ee){var e=Ee,t=ke;if(ke=Ee=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Te(e,t){return e(t)}function Ce(){}var Ne=!1;function je(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Te(e,t,n)}finally{Ne=!1,(null!==Ee||null!==ke)&&(Ce(),Pe())}}function Ae(e,t){var n=e.stateNode;if(null===n)return null;var r=_a(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(o(231,t,typeof n));return n}var Re=!1;if(u)try{var Ie={};Object.defineProperty(Ie,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Ie,Ie),window.removeEventListener("test",Ie,Ie)}catch(ue){Re=!1}function $e(e,t,n,r,a,o,i,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}var De=!1,Le=null,ze=!1,Ue=null,Me={onError:function(e){De=!0,Le=e}};function Fe(e,t,n,r,a,o,i,s,l){De=!1,Le=null,$e.apply(Me,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function We(e){if(Be(e)!==e)throw Error(o(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(r=a.return)){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return We(a),e;if(i===r)return We(a),t;i=i.sibling}throw Error(o(188))}if(n.return!==r.return)n=a,r=i;else{for(var s=!1,l=a.child;l;){if(l===n){s=!0,n=a,r=i;break}if(l===r){s=!0,r=a,n=i;break}l=l.sibling}if(!s){for(l=i.child;l;){if(l===n){s=!0,n=i,r=a;break}if(l===r){s=!0,r=i,n=a;break}l=l.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?Ve(e):null}function Ve(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ve(e);if(null!==t)return t;e=e.sibling}return null}var Ge=a.unstable_scheduleCallback,Ke=a.unstable_cancelCallback,Je=a.unstable_shouldYield,Qe=a.unstable_requestPaint,Ye=a.unstable_now,Xe=a.unstable_getCurrentPriorityLevel,Ze=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,nt=a.unstable_LowPriority,rt=a.unstable_IdlePriority,at=null,ot=null,it=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2,ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,o=e.pingedLanes,i=268435455&n;if(0!==i){var s=i&~a;0!==s?r=dt(s):0!==(o&=i)&&(r=dt(o))}else 0!==(i=n&~a)?r=dt(i):0!==o&&(r=dt(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(o=t&-t)||16===a&&4194240&o))return t;if(4&r&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-it(t)),r|=e[n],t&=~a;return r}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return!(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-it(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var _t,xt,Et,kt,St,Ot=!1,Pt=[],Tt=null,Ct=null,Nt=null,jt=new Map,At=new Map,Rt=[],It="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $t(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Ct=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":jt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":At.delete(t.pointerId)}}function Dt(e,t,n,r,a,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[a]},null!==t&&null!==(t=ba(t))&&xt(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Lt(e){var t=ya(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void St(e.priority,function(){Et(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ba(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ut(e,t,n){zt(e)&&n.delete(t)}function Mt(){Ot=!1,null!==Tt&&zt(Tt)&&(Tt=null),null!==Ct&&zt(Ct)&&(Ct=null),null!==Nt&&zt(Nt)&&(Nt=null),jt.forEach(Ut),At.forEach(Ut)}function Ft(e,t){e.blockedOn===t&&(e.blockedOn=null,Ot||(Ot=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Mt)))}function Bt(e){function t(t){return Ft(t,e)}if(0<Pt.length){Ft(Pt[0],e);for(var n=1;n<Pt.length;n++){var r=Pt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&Ft(Tt,e),null!==Ct&&Ft(Ct,e),null!==Nt&&Ft(Nt,e),jt.forEach(t),At.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Lt(n),null===n.blockedOn&&Rt.shift()}var qt=w.ReactCurrentBatchConfig,Wt=!0;function Ht(e,t,n,r){var a=bt,o=qt.transition;qt.transition=null;try{bt=1,Gt(e,t,n,r)}finally{bt=a,qt.transition=o}}function Vt(e,t,n,r){var a=bt,o=qt.transition;qt.transition=null;try{bt=4,Gt(e,t,n,r)}finally{bt=a,qt.transition=o}}function Gt(e,t,n,r){if(Wt){var a=Jt(e,t,n,r);if(null===a)Wr(e,t,r,Kt,n),$t(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return Tt=Dt(Tt,e,t,n,r,a),!0;case"dragenter":return Ct=Dt(Ct,e,t,n,r,a),!0;case"mouseover":return Nt=Dt(Nt,e,t,n,r,a),!0;case"pointerover":var o=a.pointerId;return jt.set(o,Dt(jt.get(o)||null,e,t,n,r,a)),!0;case"gotpointercapture":return o=a.pointerId,At.set(o,Dt(At.get(o)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if($t(e,r),4&t&&-1<It.indexOf(e)){for(;null!==a;){var o=ba(a);if(null!==o&&_t(o),null===(o=Jt(e,t,n,r))&&Wr(e,t,r,Kt,n),o===a)break;a=o}null!==a&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Kt=null;function Jt(e,t,n,r){if(Kt=null,null!==(e=ya(e=_e(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,a="value"in Yt?Yt.value:Yt.textContent,o=a.length;for(e=0;e<r&&n[e]===a[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===a[o-t];t++);return Zt=a.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,a,o){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=an(cn),dn=L({},cn,{view:0,detail:0}),fn=an(dn),hn=L({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(hn),mn=an(L({},hn,{dataTransfer:0})),gn=an(L({},dn,{relatedTarget:0})),vn=an(L({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=L({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(yn),wn=an(L({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function Sn(){return kn}var On=L({},dn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Pn=an(On),Tn=an(L({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Cn=an(L({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),Nn=an(L({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),jn=L({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),An=an(jn),Rn=[9,13,27,32],In=u&&"CompositionEvent"in window,$n=null;u&&"documentMode"in document&&($n=document.documentMode);var Dn=u&&"TextEvent"in window&&!$n,Ln=u&&(!In||$n&&8<$n&&11>=$n),zn=String.fromCharCode(32),Un=!1;function Mn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1,qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Hn(e,t,n,r){Oe(r),0<(t=Vr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Vn=null,Gn=null;function Kn(e){zr(e,0)}function Jn(e){if(G(wa(e)))return e}function Qn(e,t){if("change"===e)return t}var Yn=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"==typeof er.oninput}Xn=Zn}else Xn=!1;Yn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Vn&&(Vn.detachEvent("onpropertychange",nr),Gn=Vn=null)}function nr(e){if("value"===e.propertyName&&Jn(Gn)){var t=[];Hn(t,Gn,e,_e(e)),je(Kn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Vn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Gn)}function or(e,t){if("click"===e)return Jn(t)}function ir(e,t){if("input"===e||"change"===e)return Jn(t)}var sr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function lr(e,t){if(sr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!d.call(t,a)||!sr(e[a],t[a]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&hr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,o=Math.min(r.start,a);r=void 0===r.end?o:Math.min(r.end,a),!e.extend&&o>r&&(a=r,r=o,o=a),a=ur(n,o);var i=ur(n,r);a&&i&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==K(r)||(r="selectionStart"in(r=gr)&&hr(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Vr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Er={},kr={};function Sr(e){if(Er[e])return Er[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in kr)return Er[e]=n[t];return e}u&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Or=Sr("animationend"),Pr=Sr("animationiteration"),Tr=Sr("animationstart"),Cr=Sr("transitionend"),Nr=new Map,jr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(e,t){Nr.set(e,t),l(t,[e])}for(var Rr=0;Rr<jr.length;Rr++){var Ir=jr[Rr];Ar(Ir.toLowerCase(),"on"+(Ir[0].toUpperCase()+Ir.slice(1)))}Ar(Or,"onAnimationEnd"),Ar(Pr,"onAnimationIteration"),Ar(Tr,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(Cr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $r="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dr=new Set("cancel close invalid load scroll toggle".split(" ").concat($r));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,i,s,l,c){if(Fe.apply(this,arguments),De){if(!De)throw Error(o(198));var u=Le;De=!1,Le=null,ze||(ze=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function zr(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var i=r.length-1;0<=i;i--){var s=r[i],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&a.isPropagationStopped())break e;Lr(a,s,c),o=l}else for(i=0;i<r.length;i++){if(l=(s=r[i]).instance,c=s.currentTarget,s=s.listener,l!==o&&a.isPropagationStopped())break e;Lr(a,s,c),o=l}}}if(ze)throw e=Ue,ze=!1,Ue=null,e}function Ur(e,t){var n=t[ma];void 0===n&&(n=t[ma]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Mr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Fr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[Fr]){e[Fr]=!0,i.forEach(function(t){"selectionchange"!==t&&(Dr.has(t)||Mr(t,!1,e),Mr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Fr]||(t[Fr]=!0,Mr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Qt(t)){case 1:var a=Ht;break;case 4:a=Vt;break;default:a=Gt}n=a.bind(null,t,n,e),a=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,a){var o=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var s=r.stateNode.containerInfo;if(s===a||8===s.nodeType&&s.parentNode===a)break;if(4===i)for(i=r.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;i=i.return}for(;null!==s;){if(null===(i=ya(s)))return;if(5===(l=i.tag)||6===l){r=o=i;continue e}s=s.parentNode}}r=r.return}je(function(){var r=o,a=_e(n),i=[];e:{var s=Nr.get(e);if(void 0!==s){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Pn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Cn;break;case Or:case Pr:case Tr:l=vn;break;case Cr:l=Nn;break;case"scroll":l=fn;break;case"wheel":l=An;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var u=!!(4&t),d=!u&&"scroll"===e,f=u?null!==s?s+"Capture":null:s;u=[];for(var h,p=r;null!==p;){var m=(h=p).stateNode;if(5===h.tag&&null!==m&&(h=m,null!==f&&null!=(m=Ae(p,f))&&u.push(Hr(p,m,h))),d)break;p=p.return}0<u.length&&(s=new l(s,c,null,n,a),i.push({event:s,listeners:u}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!ya(c)&&!c[pa])&&(l||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?ya(c):null)&&(c!==(d=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Tn,m="onPointerLeave",f="onPointerEnter",p="pointer"),d=null==l?s:wa(l),h=null==c?s:wa(c),(s=new u(m,p+"leave",l,n,a)).target=d,s.relatedTarget=h,m=null,ya(a)===r&&((u=new u(f,p+"enter",c,n,a)).target=h,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(f=c,p=0,h=u=l;h;h=Gr(h))p++;for(h=0,m=f;m;m=Gr(m))h++;for(;0<p-h;)u=Gr(u),p--;for(;0<h-p;)f=Gr(f),h--;for(;p--;){if(u===f||null!==f&&u===f.alternate)break e;u=Gr(u),f=Gr(f)}u=null}else u=null;null!==l&&Kr(i,s,l,u,!1),null!==c&&null!==d&&Kr(i,d,c,u,!0)}if("select"===(l=(s=r?wa(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Qn;else if(Wn(s))if(Yn)g=ir;else{g=ar;var v=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=or);switch(g&&(g=g(e,r))?Hn(i,g,n,a):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ee(s,"number",s.value)),v=r?wa(r):window,e){case"focusin":(Wn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(i,n,a);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":wr(i,n,a)}var y;if(In)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?Mn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Ln&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(y=en()):(Xt="value"in(Yt=a)?Yt.value:Yt.textContent,Bn=!0)),0<(v=Vr(r,b)).length&&(b=new wn(b,e,null,n,a),i.push({event:b,listeners:v}),(y||null!==(y=Fn(n)))&&(b.data=y))),(y=Dn?function(e,t){switch(e){case"compositionend":return Fn(t);case"keypress":return 32!==t.which?null:(Un=!0,zn);case"textInput":return(e=t.data)===zn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!In&&Mn(e,t)?(e=en(),Zt=Xt=Yt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(r=Vr(r,"onBeforeInput")).length&&(a=new wn("onBeforeInput","beforeinput",null,n,a),i.push({event:a,listeners:r}),a.data=y)}zr(i,t)})}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Vr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,o=a.stateNode;5===a.tag&&null!==o&&(a=o,null!=(o=Ae(e,n))&&r.unshift(Hr(e,o,a)),null!=(o=Ae(e,t))&&r.push(Hr(e,o,a))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,a){for(var o=t._reactName,i=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,a?null!=(l=Ae(n,o))&&i.unshift(Hr(n,l,s)):a||null!=(l=Ae(n,o))&&i.push(Hr(n,l,s))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Jr=/\r\n?/g,Qr=/\u0000|\uFFFD/g;function Yr(e){return("string"==typeof e?e:""+e).replace(Jr,"\n").replace(Qr,"")}function Xr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(o(425))}function Zr(){}var ea=null,ta=null;function na(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ra="function"==typeof setTimeout?setTimeout:void 0,aa="function"==typeof clearTimeout?clearTimeout:void 0,oa="function"==typeof Promise?Promise:void 0,ia="function"==typeof queueMicrotask?queueMicrotask:void 0!==oa?function(e){return oa.resolve(null).then(e).catch(sa)}:ra;function sa(e){setTimeout(function(){throw e})}function la(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);Bt(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ua(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var da=Math.random().toString(36).slice(2),fa="__reactFiber$"+da,ha="__reactProps$"+da,pa="__reactContainer$"+da,ma="__reactEvents$"+da,ga="__reactListeners$"+da,va="__reactHandles$"+da;function ya(e){var t=e[fa];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pa]||n[fa]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ua(e);null!==e;){if(n=e[fa])return n;e=ua(e)}return t}n=(e=n).parentNode}return null}function ba(e){return!(e=e[fa]||e[pa])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function _a(e){return e[ha]||null}var xa=[],Ea=-1;function ka(e){return{current:e}}function Sa(e){0>Ea||(e.current=xa[Ea],xa[Ea]=null,Ea--)}function Oa(e,t){Ea++,xa[Ea]=e.current,e.current=t}var Pa={},Ta=ka(Pa),Ca=ka(!1),Na=Pa;function ja(e,t){var n=e.type.contextTypes;if(!n)return Pa;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,o={};for(a in n)o[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Aa(e){return null!=e.childContextTypes}function Ra(){Sa(Ca),Sa(Ta)}function Ia(e,t,n){if(Ta.current!==Pa)throw Error(o(168));Oa(Ta,t),Oa(Ca,n)}function $a(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(o(108,q(e)||"Unknown",a));return L({},n,r)}function Da(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Pa,Na=Ta.current,Oa(Ta,e),Oa(Ca,Ca.current),!0}function La(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=$a(e,t,Na),r.__reactInternalMemoizedMergedChildContext=e,Sa(Ca),Sa(Ta),Oa(Ta,e)):Sa(Ca),Oa(Ca,n)}var za=null,Ua=!1,Ma=!1;function Fa(e){null===za?za=[e]:za.push(e)}function Ba(){if(!Ma&&null!==za){Ma=!0;var e=0,t=bt;try{var n=za;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}za=null,Ua=!1}catch(t){throw null!==za&&(za=za.slice(e+1)),Ge(Ze,Ba),t}finally{bt=t,Ma=!1}}return null}var qa=[],Wa=0,Ha=null,Va=0,Ga=[],Ka=0,Ja=null,Qa=1,Ya="";function Xa(e,t){qa[Wa++]=Va,qa[Wa++]=Ha,Ha=e,Va=t}function Za(e,t,n){Ga[Ka++]=Qa,Ga[Ka++]=Ya,Ga[Ka++]=Ja,Ja=e;var r=Qa;e=Ya;var a=32-it(r)-1;r&=~(1<<a),n+=1;var o=32-it(t)+a;if(30<o){var i=a-a%5;o=(r&(1<<i)-1).toString(32),r>>=i,a-=i,Qa=1<<32-it(t)+a|n<<a|r,Ya=o+e}else Qa=1<<o|n<<a|r,Ya=e}function eo(e){null!==e.return&&(Xa(e,1),Za(e,1,0))}function to(e){for(;e===Ha;)Ha=qa[--Wa],qa[Wa]=null,Va=qa[--Wa],qa[Wa]=null;for(;e===Ja;)Ja=Ga[--Ka],Ga[Ka]=null,Ya=Ga[--Ka],Ga[Ka]=null,Qa=Ga[--Ka],Ga[Ka]=null}var no=null,ro=null,ao=!1,oo=null;function io(e,t){var n=jc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function so(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ja?{id:Qa,overflow:Ya}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=jc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function lo(e){return!(!(1&e.mode)||128&e.flags)}function co(e){if(ao){var t=ro;if(t){var n=t;if(!so(e,t)){if(lo(e))throw Error(o(418));t=ca(n.nextSibling);var r=no;t&&so(e,t)?io(r,n):(e.flags=-4097&e.flags|2,ao=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,ao=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function fo(e){if(e!==no)return!1;if(!ao)return uo(e),ao=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!na(e.type,e.memoizedProps)),t&&(t=ro)){if(lo(e))throw ho(),Error(o(418));for(;t;)io(e,t),t=ca(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ca(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ca(e.stateNode.nextSibling):null;return!0}function ho(){for(var e=ro;e;)e=ca(e.nextSibling)}function po(){ro=no=null,ao=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=w.ReactCurrentBatchConfig;function vo(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var a=r,i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=a.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!=typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function yo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bo(e){return(0,e._init)(e._payload)}function wo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Lc(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===E?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"==typeof o&&null!==o&&o.$$typeof===A&&bo(o)===t.type)?((r=a(t,n.props)).ref=vo(e,t,n),r.return=e,r):((r=Ic(n.type,n.key,n.props,null,e.mode,r)).ref=vo(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zc(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=$c(n,e.mode,r,o)).return=e,t):((t=a(t,n)).return=e,t)}function f(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Lc(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Ic(t.type,t.key,t.props,null,e.mode,n)).ref=vo(e,null,t),n.return=e,n;case x:return(t=zc(t,e.mode,n)).return=e,t;case A:return f(e,(0,t._init)(t._payload),n)}if(te(t)||$(t))return(t=$c(t,e.mode,n,null)).return=e,t;yo(e,t)}return null}function h(e,t,n,r){var a=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==a?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===a?c(e,t,n,r):null;case x:return n.key===a?u(e,t,n,r):null;case A:return h(e,t,(a=n._init)(n._payload),r)}if(te(n)||$(n))return null!==a?null:d(e,t,n,r,null);yo(e,n)}return null}function p(e,t,n,r,a){if("string"==typeof r&&""!==r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,a);if("object"==typeof r&&null!==r){switch(r.$$typeof){case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case x:return u(t,e=e.get(null===r.key?n:r.key)||null,r,a);case A:return p(e,t,n,(0,r._init)(r._payload),a)}if(te(r)||$(r))return d(t,e=e.get(n)||null,r,a,null);yo(t,r)}return null}function m(a,o,s,l){for(var c=null,u=null,d=o,m=o=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=h(a,d,s[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(a,d),o=i(v,o,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===s.length)return n(a,d),ao&&Xa(a,m),c;if(null===d){for(;m<s.length;m++)null!==(d=f(a,s[m],l))&&(o=i(d,o,m),null===u?c=d:u.sibling=d,u=d);return ao&&Xa(a,m),c}for(d=r(a,d);m<s.length;m++)null!==(g=p(d,a,m,s[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),o=i(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(a,e)}),ao&&Xa(a,m),c}function g(a,s,l,c){var u=$(l);if("function"!=typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var d=u=null,m=s,g=s=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=h(a,m,y.value,c);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(a,m),s=i(b,s,g),null===d?u=b:d.sibling=b,d=b,m=v}if(y.done)return n(a,m),ao&&Xa(a,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=f(a,y.value,c))&&(s=i(y,s,g),null===d?u=y:d.sibling=y,d=y);return ao&&Xa(a,g),u}for(m=r(a,m);!y.done;g++,y=l.next())null!==(y=p(m,a,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),s=i(y,s,g),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach(function(e){return t(a,e)}),ao&&Xa(a,g),u}return function e(r,o,i,l){if("object"==typeof i&&null!==i&&i.type===E&&null===i.key&&(i=i.props.children),"object"==typeof i&&null!==i){switch(i.$$typeof){case _:e:{for(var c=i.key,u=o;null!==u;){if(u.key===c){if((c=i.type)===E){if(7===u.tag){n(r,u.sibling),(o=a(u,i.props.children)).return=r,r=o;break e}}else if(u.elementType===c||"object"==typeof c&&null!==c&&c.$$typeof===A&&bo(c)===u.type){n(r,u.sibling),(o=a(u,i.props)).ref=vo(r,u,i),o.return=r,r=o;break e}n(r,u);break}t(r,u),u=u.sibling}i.type===E?((o=$c(i.props.children,r.mode,l,i.key)).return=r,r=o):((l=Ic(i.type,i.key,i.props,null,r.mode,l)).ref=vo(r,o,i),l.return=r,r=l)}return s(r);case x:e:{for(u=i.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===i.containerInfo&&o.stateNode.implementation===i.implementation){n(r,o.sibling),(o=a(o,i.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=zc(i,r.mode,l)).return=r,r=o}return s(r);case A:return e(r,o,(u=i._init)(i._payload),l)}if(te(i))return m(r,o,i,l);if($(i))return g(r,o,i,l);yo(r,i)}return"string"==typeof i&&""!==i||"number"==typeof i?(i=""+i,null!==o&&6===o.tag?(n(r,o.sibling),(o=a(o,i)).return=r,r=o):(n(r,o),(o=Lc(i,r.mode,l)).return=r,r=o),s(r)):n(r,o)}}var _o=wo(!0),xo=wo(!1),Eo=ka(null),ko=null,So=null,Oo=null;function Po(){Oo=So=ko=null}function To(e){var t=Eo.current;Sa(Eo),e._currentValue=t}function Co(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function No(e,t){ko=e,Oo=So=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function jo(e){var t=e._currentValue;if(Oo!==e)if(e={context:e,memoizedValue:t,next:null},null===So){if(null===ko)throw Error(o(308));So=e,ko.dependencies={lanes:0,firstContext:e}}else So=So.next=e;return t}var Ao=null;function Ro(e){null===Ao?Ao=[e]:Ao.push(e)}function Io(e,t,n,r){var a=t.interleaved;return null===a?(n.next=n,Ro(t)):(n.next=a.next,a.next=n),t.interleaved=n,$o(e,r)}function $o(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Do=!1;function Lo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Uo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Mo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&Tl){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,$o(e,n)}return null===(a=r.interleaved)?(t.next=t,Ro(r)):(t.next=a.next,a.next=t),r.interleaved=t,$o(e,n)}function Fo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Bo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?a=o=i:o=o.next=i,n=n.next}while(null!==n);null===o?a=o=t:o=o.next=t}else a=o=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function qo(e,t,n,r){var a=e.updateQueue;Do=!1;var o=a.firstBaseUpdate,i=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var l=s,c=l.next;l.next=null,null===i?o=c:i.next=c,i=l;var u=e.alternate;null!==u&&(s=(u=u.updateQueue).lastBaseUpdate)!==i&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l)}if(null!==o){var d=a.baseState;for(i=0,u=c=l=null,s=o;;){var f=s.lane,h=s.eventTime;if((r&f)===f){null!==u&&(u=u.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,m=s;switch(f=t,h=n,m.tag){case 1:if("function"==typeof(p=m.payload)){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(f="function"==typeof(p=m.payload)?p.call(h,d,f):p))break e;d=L({},d,f);break e;case 2:Do=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(f=a.effects)?a.effects=[s]:f.push(s))}else h={eventTime:h,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=h,l=d):u=u.next=h,i|=f;if(null===(s=s.next)){if(null===(s=a.shared.pending))break;s=(f=s).next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}if(null===u&&(l=d),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=u,null!==(t=a.shared.interleaved)){a=t;do{i|=a.lane,a=a.next}while(a!==t)}else null===o&&(a.shared.lanes=0);Dl|=i,e.lanes=i,e.memoizedState=d}}function Wo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!=typeof a)throw Error(o(191,a));a.call(r)}}}var Ho={},Vo=ka(Ho),Go=ka(Ho),Ko=ka(Ho);function Jo(e){if(e===Ho)throw Error(o(174));return e}function Qo(e,t){switch(Oa(Ko,t),Oa(Go,e),Oa(Vo,Ho),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Sa(Vo),Oa(Vo,t)}function Yo(){Sa(Vo),Sa(Go),Sa(Ko)}function Xo(e){Jo(Ko.current);var t=Jo(Vo.current),n=le(t,e.type);t!==n&&(Oa(Go,e),Oa(Vo,n))}function Zo(e){Go.current===e&&(Sa(Vo),Sa(Go))}var ei=ka(0);function ti(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ni=[];function ri(){for(var e=0;e<ni.length;e++)ni[e]._workInProgressVersionPrimary=null;ni.length=0}var ai=w.ReactCurrentDispatcher,oi=w.ReactCurrentBatchConfig,ii=0,si=null,li=null,ci=null,ui=!1,di=!1,fi=0,hi=0;function pi(){throw Error(o(321))}function mi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function gi(e,t,n,r,a,i){if(ii=i,si=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ai.current=null===e||null===e.memoizedState?Zi:es,e=n(r,a),di){i=0;do{if(di=!1,fi=0,25<=i)throw Error(o(301));i+=1,ci=li=null,t.updateQueue=null,ai.current=ts,e=n(r,a)}while(di)}if(ai.current=Xi,t=null!==li&&null!==li.next,ii=0,ci=li=si=null,ui=!1,t)throw Error(o(300));return e}function vi(){var e=0!==fi;return fi=0,e}function yi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ci?si.memoizedState=ci=e:ci=ci.next=e,ci}function bi(){if(null===li){var e=si.alternate;e=null!==e?e.memoizedState:null}else e=li.next;var t=null===ci?si.memoizedState:ci.next;if(null!==t)ci=t,li=e;else{if(null===e)throw Error(o(310));e={memoizedState:(li=e).memoizedState,baseState:li.baseState,baseQueue:li.baseQueue,queue:li.queue,next:null},null===ci?si.memoizedState=ci=e:ci=ci.next=e}return ci}function wi(e,t){return"function"==typeof t?t(e):t}function _i(e){var t=bi(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=li,a=r.baseQueue,i=n.pending;if(null!==i){if(null!==a){var s=a.next;a.next=i.next,i.next=s}r.baseQueue=a=i,n.pending=null}if(null!==a){i=a.next,r=r.baseState;var l=s=null,c=null,u=i;do{var d=u.lane;if((ii&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=f,s=r):c=c.next=f,si.lanes|=d,Dl|=d}u=u.next}while(null!==u&&u!==i);null===c?s=r:c.next=l,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){a=e;do{i=a.lane,si.lanes|=i,Dl|=i,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xi(e){var t=bi(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(null!==a){n.pending=null;var s=a=a.next;do{i=e(i,s.action),s=s.next}while(s!==a);sr(i,t.memoizedState)||(bs=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Ei(){}function ki(e,t){var n=si,r=bi(),a=t(),i=!sr(r.memoizedState,a);if(i&&(r.memoizedState=a,bs=!0),r=r.queue,Di(Pi.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||null!==ci&&1&ci.memoizedState.tag){if(n.flags|=2048,ji(9,Oi.bind(null,n,r,a,t),void 0,null),null===Cl)throw Error(o(349));30&ii||Si(n,t,a)}return a}function Si(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=si.updateQueue)?(t={lastEffect:null,stores:null},si.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oi(e,t,n,r){t.value=n,t.getSnapshot=r,Ti(t)&&Ci(e)}function Pi(e,t,n){return n(function(){Ti(t)&&Ci(e)})}function Ti(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(e){return!0}}function Ci(e){var t=$o(e,1);null!==t&&nc(t,e,1,-1)}function Ni(e){var t=yi();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wi,lastRenderedState:e},t.queue=e,e=e.dispatch=Ki.bind(null,si,e),[t.memoizedState,e]}function ji(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=si.updateQueue)?(t={lastEffect:null,stores:null},si.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ai(){return bi().memoizedState}function Ri(e,t,n,r){var a=yi();si.flags|=e,a.memoizedState=ji(1|t,n,void 0,void 0===r?null:r)}function Ii(e,t,n,r){var a=bi();r=void 0===r?null:r;var o=void 0;if(null!==li){var i=li.memoizedState;if(o=i.destroy,null!==r&&mi(r,i.deps))return void(a.memoizedState=ji(t,n,o,r))}si.flags|=e,a.memoizedState=ji(1|t,n,o,r)}function $i(e,t){return Ri(8390656,8,e,t)}function Di(e,t){return Ii(2048,8,e,t)}function Li(e,t){return Ii(4,2,e,t)}function zi(e,t){return Ii(4,4,e,t)}function Ui(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Mi(e,t,n){return n=null!=n?n.concat([e]):null,Ii(4,4,Ui.bind(null,t,e),n)}function Fi(){}function Bi(e,t){var n=bi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qi(e,t){var n=bi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mi(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Wi(e,t,n){return 21&ii?(sr(n,t)||(n=mt(),si.lanes|=n,Dl|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n)}function Hi(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=oi.transition;oi.transition={};try{e(!1),t()}finally{bt=n,oi.transition=r}}function Vi(){return bi().memoizedState}function Gi(e,t,n){var r=tc(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ji(e)?Qi(t,n):null!==(n=Io(e,t,n,r))&&(nc(n,e,r,ec()),Yi(n,t,r))}function Ki(e,t,n){var r=tc(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ji(e))Qi(t,a);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var i=t.lastRenderedState,s=o(i,n);if(a.hasEagerState=!0,a.eagerState=s,sr(s,i)){var l=t.interleaved;return null===l?(a.next=a,Ro(t)):(a.next=l.next,l.next=a),void(t.interleaved=a)}}catch(e){}null!==(n=Io(e,t,a,r))&&(nc(n,e,r,a=ec()),Yi(n,t,r))}}function Ji(e){var t=e.alternate;return e===si||null!==t&&t===si}function Qi(e,t){di=ui=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Yi(e,t,n){if(4194240&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Xi={readContext:jo,useCallback:pi,useContext:pi,useEffect:pi,useImperativeHandle:pi,useInsertionEffect:pi,useLayoutEffect:pi,useMemo:pi,useReducer:pi,useRef:pi,useState:pi,useDebugValue:pi,useDeferredValue:pi,useTransition:pi,useMutableSource:pi,useSyncExternalStore:pi,useId:pi,unstable_isNewReconciler:!1},Zi={readContext:jo,useCallback:function(e,t){return yi().memoizedState=[e,void 0===t?null:t],e},useContext:jo,useEffect:$i,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Ri(4194308,4,Ui.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ri(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ri(4,2,e,t)},useMemo:function(e,t){var n=yi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=yi();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Gi.bind(null,si,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},yi().memoizedState=e},useState:Ni,useDebugValue:Fi,useDeferredValue:function(e){return yi().memoizedState=e},useTransition:function(){var e=Ni(!1),t=e[0];return e=Hi.bind(null,e[1]),yi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=si,a=yi();if(ao){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Cl)throw Error(o(349));30&ii||Si(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,$i(Pi.bind(null,r,i,e),[e]),r.flags|=2048,ji(9,Oi.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=yi(),t=Cl.identifierPrefix;if(ao){var n=Ya;t=":"+t+"R"+(n=(Qa&~(1<<32-it(Qa)-1)).toString(32)+n),0<(n=fi++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=hi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:jo,useCallback:Bi,useContext:jo,useEffect:Di,useImperativeHandle:Mi,useInsertionEffect:Li,useLayoutEffect:zi,useMemo:qi,useReducer:_i,useRef:Ai,useState:function(){return _i(wi)},useDebugValue:Fi,useDeferredValue:function(e){return Wi(bi(),li.memoizedState,e)},useTransition:function(){return[_i(wi)[0],bi().memoizedState]},useMutableSource:Ei,useSyncExternalStore:ki,useId:Vi,unstable_isNewReconciler:!1},ts={readContext:jo,useCallback:Bi,useContext:jo,useEffect:Di,useImperativeHandle:Mi,useInsertionEffect:Li,useLayoutEffect:zi,useMemo:qi,useReducer:xi,useRef:Ai,useState:function(){return xi(wi)},useDebugValue:Fi,useDeferredValue:function(e){var t=bi();return null===li?t.memoizedState=e:Wi(t,li.memoizedState,e)},useTransition:function(){return[xi(wi)[0],bi().memoizedState]},useMutableSource:Ei,useSyncExternalStore:ki,useId:Vi,unstable_isNewReconciler:!1};function ns(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function rs(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var as={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),a=tc(e),o=Uo(r,a);o.payload=t,null!=n&&(o.callback=n),null!==(t=Mo(e,o,a))&&(nc(t,e,a,r),Fo(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),a=tc(e),o=Uo(r,a);o.tag=1,o.payload=t,null!=n&&(o.callback=n),null!==(t=Mo(e,o,a))&&(nc(t,e,a,r),Fo(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),a=Uo(n,r);a.tag=2,null!=t&&(a.callback=t),null!==(t=Mo(e,a,r))&&(nc(t,e,r,n),Fo(t,e,r))}};function os(e,t,n,r,a,o,i){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,i):!(t.prototype&&t.prototype.isPureReactComponent&&lr(n,r)&&lr(a,o))}function is(e,t,n){var r=!1,a=Pa,o=t.contextType;return"object"==typeof o&&null!==o?o=jo(o):(a=Aa(t)?Na:Ta.current,o=(r=null!=(r=t.contextTypes))?ja(e,a):Pa),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=as,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function ss(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&as.enqueueReplaceState(t,t.state,null)}function ls(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},Lo(e);var o=t.contextType;"object"==typeof o&&null!==o?a.context=jo(o):(o=Aa(t)?Na:Ta.current,a.context=ja(e,o)),a.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(rs(e,t,o,n),a.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof a.getSnapshotBeforeUpdate||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||(t=a.state,"function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&as.enqueueReplaceState(a,a.state,null),qo(e,n,a,r),a.state=e.memoizedState),"function"==typeof a.componentDidMount&&(e.flags|=4194308)}function cs(e,t){try{var n="",r=t;do{n+=F(r),r=r.return}while(r);var a=n}catch(e){a="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:a,digest:null}}function us(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ds(e,t){try{console.error(t.value)}catch(e){setTimeout(function(){throw e})}}var fs="function"==typeof WeakMap?WeakMap:Map;function hs(e,t,n){(n=Uo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,Hl=r),ds(0,t)},n}function ps(e,t,n){(n=Uo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){ds(0,t)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){ds(0,t),"function"!=typeof r&&(null===Vl?Vl=new Set([this]):Vl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fs;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vs(e,t,n,r,a){return 1&e.mode?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Uo(-1,1)).tag=2,Mo(n,t,1))),n.lanes|=1),e)}var ys=w.ReactCurrentOwner,bs=!1;function ws(e,t,n,r){t.child=null===e?xo(t,null,n,r):_o(t,e.child,n,r)}function _s(e,t,n,r,a){n=n.render;var o=t.ref;return No(t,a),r=gi(e,t,n,r,o,a),n=vi(),null===e||bs?(ao&&n&&eo(t),t.flags|=1,ws(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ws(e,t,a))}function xs(e,t,n,r,a){if(null===e){var o=n.type;return"function"!=typeof o||Ac(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ic(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Es(e,t,o,r,a))}if(o=e.child,0===(e.lanes&a)){var i=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(i,r)&&e.ref===t.ref)return Ws(e,t,a)}return t.flags|=1,(e=Rc(o,r)).ref=t.ref,e.return=t,t.child=e}function Es(e,t,n,r,a){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=o,0===(e.lanes&a))return t.lanes=e.lanes,Ws(e,t,a);131072&e.flags&&(bs=!0)}}return Os(e,t,n,r,a)}function ks(e,t,n){var r=t.pendingProps,a=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(1&t.mode){if(!(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Oa(Rl,Al),Al|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Oa(Rl,Al),Al|=r}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oa(Rl,Al),Al|=n;else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Oa(Rl,Al),Al|=r;return ws(e,t,a,n),t.child}function Ss(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Os(e,t,n,r,a){var o=Aa(n)?Na:Ta.current;return o=ja(t,o),No(t,a),n=gi(e,t,n,r,o,a),r=vi(),null===e||bs?(ao&&r&&eo(t),t.flags|=1,ws(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ws(e,t,a))}function Ps(e,t,n,r,a){if(Aa(n)){var o=!0;Da(t)}else o=!1;if(No(t,a),null===t.stateNode)qs(e,t),is(t,n,r),ls(t,n,r,a),r=!0;else if(null===e){var i=t.stateNode,s=t.memoizedProps;i.props=s;var l=i.context,c=n.contextType;c="object"==typeof c&&null!==c?jo(c):ja(t,c=Aa(n)?Na:Ta.current);var u=n.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof i.getSnapshotBeforeUpdate;d||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(s!==r||l!==c)&&ss(t,i,r,c),Do=!1;var f=t.memoizedState;i.state=f,qo(t,r,i,a),l=t.memoizedState,s!==r||f!==l||Ca.current||Do?("function"==typeof u&&(rs(t,n,u,r),l=t.memoizedState),(s=Do||os(t,n,s,r,f,l,c))?(d||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||("function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"==typeof i.componentDidMount&&(t.flags|=4194308)):("function"==typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),i.props=r,i.state=l,i.context=c,r=s):("function"==typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,zo(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ns(t.type,s),i.props=c,d=t.pendingProps,f=i.context,l="object"==typeof(l=n.contextType)&&null!==l?jo(l):ja(t,l=Aa(n)?Na:Ta.current);var h=n.getDerivedStateFromProps;(u="function"==typeof h||"function"==typeof i.getSnapshotBeforeUpdate)||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(s!==d||f!==l)&&ss(t,i,r,l),Do=!1,f=t.memoizedState,i.state=f,qo(t,r,i,a);var p=t.memoizedState;s!==d||f!==p||Ca.current||Do?("function"==typeof h&&(rs(t,n,h,r),p=t.memoizedState),(c=Do||os(t,n,c,r,f,p,l)||!1)?(u||"function"!=typeof i.UNSAFE_componentWillUpdate&&"function"!=typeof i.componentWillUpdate||("function"==typeof i.componentWillUpdate&&i.componentWillUpdate(r,p,l),"function"==typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof i.componentDidUpdate&&(t.flags|=4),"function"==typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof i.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),i.props=r,i.state=p,i.context=l,r=c):("function"!=typeof i.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Ts(e,t,n,r,o,a)}function Ts(e,t,n,r,a,o){Ss(e,t);var i=!!(128&t.flags);if(!r&&!i)return a&&La(t,n,!1),Ws(e,t,o);r=t.stateNode,ys.current=t;var s=i&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=_o(t,e.child,null,o),t.child=_o(t,null,s,o)):ws(e,t,s,o),t.memoizedState=r.state,a&&La(t,n,!0),t.child}function Cs(e){var t=e.stateNode;t.pendingContext?Ia(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ia(0,t.context,!1),Qo(e,t.containerInfo)}function Ns(e,t,n,r,a){return po(),mo(a),t.flags|=256,ws(e,t,n,r),t.child}var js,As,Rs,Is,$s={dehydrated:null,treeContext:null,retryLane:0};function Ds(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ls(e,t,n){var r,a=t.pendingProps,i=ei.current,s=!1,l=!!(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&!!(2&i)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Oa(ei,1&i),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?"$!"===e.data?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=a.children,e=a.fallback,s?(a=t.mode,s=t.child,l={mode:"hidden",children:l},1&a||null===s?s=Dc(l,a,0,null):(s.childLanes=0,s.pendingProps=l),e=$c(e,a,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ds(n),t.memoizedState=$s,e):zs(t,l));if(null!==(i=e.memoizedState)&&null!==(r=i.dehydrated))return function(e,t,n,r,a,i,s){if(n)return 256&t.flags?(t.flags&=-257,Us(e,t,s,r=us(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=r.fallback,a=t.mode,r=Dc({mode:"visible",children:r.children},a,0,null),(i=$c(i,a,s,null)).flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,1&t.mode&&_o(t,e.child,null,s),t.child.memoizedState=Ds(s),t.memoizedState=$s,i);if(!(1&t.mode))return Us(e,t,s,null);if("$!"===a.data){if(r=a.nextSibling&&a.nextSibling.dataset)var l=r.dgst;return r=l,Us(e,t,s,r=us(i=Error(o(419)),r,void 0))}if(l=0!==(s&e.childLanes),bs||l){if(null!==(r=Cl)){switch(s&-s){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(r.suspendedLanes|s))?0:a)&&a!==i.retryLane&&(i.retryLane=a,$o(e,a),nc(r,e,a,-1))}return mc(),Us(e,t,s,r=us(Error(o(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Pc.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,ro=ca(a.nextSibling),no=t,ao=!0,oo=null,null!==e&&(Ga[Ka++]=Qa,Ga[Ka++]=Ya,Ga[Ka++]=Ja,Qa=e.id,Ya=e.overflow,Ja=t),(t=zs(t,r.children)).flags|=4096,t)}(e,t,l,a,r,i,n);if(s){s=a.fallback,l=t.mode,r=(i=e.child).sibling;var c={mode:"hidden",children:a.children};return 1&l||t.child===i?(a=Rc(i,c)).subtreeFlags=14680064&i.subtreeFlags:((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null),null!==r?s=Rc(r,s):(s=$c(s,l,n,null)).flags|=2,s.return=t,a.return=t,a.sibling=s,t.child=a,a=s,s=t.child,l=null===(l=e.child.memoizedState)?Ds(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=$s,a}return e=(s=e.child).sibling,a=Rc(s,{mode:"visible",children:a.children}),!(1&t.mode)&&(a.lanes=n),a.return=t,a.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function zs(e,t){return(t=Dc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Us(e,t,n,r){return null!==r&&mo(r),_o(t,e.child,null,n),(e=zs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ms(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Co(e.return,t,n)}function Fs(e,t,n,r,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=a)}function Bs(e,t,n){var r=t.pendingProps,a=r.revealOrder,o=r.tail;if(ws(e,t,r.children,n),2&(r=ei.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ms(e,n,t);else if(19===e.tag)Ms(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Oa(ei,r),1&t.mode)switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===ti(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Fs(t,!1,a,n,o);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ti(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Fs(t,!0,n,null,o);break;case"together":Fs(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function qs(e,t){!(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ws(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Dl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Rc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Hs(e,t){if(!ao)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Vs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Gs(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vs(t),null;case 1:case 17:return Aa(t.type)&&Ra(),Vs(t),null;case 3:return r=t.stateNode,Yo(),Sa(Ca),Sa(Ta),ri(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fo(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==oo&&(ic(oo),oo=null))),As(e,t),Vs(t),null;case 5:Zo(t);var a=Jo(Ko.current);if(n=t.type,null!==e&&null!=t.stateNode)Rs(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Vs(t),null}if(e=Jo(Vo.current),fo(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[fa]=t,r[ha]=i,e=!!(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(a=0;a<$r.length;a++)Ur($r[a],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Q(r,i),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ur("invalid",r);break;case"textarea":ae(r,i),Ur("invalid",r)}for(var l in ye(n,i),a=null,i)if(i.hasOwnProperty(l)){var c=i[l];"children"===l?"string"==typeof c?r.textContent!==c&&(!0!==i.suppressHydrationWarning&&Xr(r.textContent,c,e),a=["children",c]):"number"==typeof c&&r.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Xr(r.textContent,c,e),a=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":V(r),Z(r,i,!0);break;case"textarea":V(r),ie(r);break;case"select":case"option":break;default:"function"==typeof i.onClick&&(r.onclick=Zr)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[fa]=t,e[ha]=r,js(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),a=r;break;case"iframe":case"object":case"embed":Ur("load",e),a=r;break;case"video":case"audio":for(a=0;a<$r.length;a++)Ur($r[a],e);a=r;break;case"source":Ur("error",e),a=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),a=r;break;case"details":Ur("toggle",e),a=r;break;case"input":Q(e,r),a=J(e,r),Ur("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=L({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),Ur("invalid",e)}for(i in ye(n,a),c=a)if(c.hasOwnProperty(i)){var u=c[i];"style"===i?ge(e,u):"dangerouslySetInnerHTML"===i?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===i?"string"==typeof u?("textarea"!==n||""!==u)&&fe(e,u):"number"==typeof u&&fe(e,""+u):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(s.hasOwnProperty(i)?null!=u&&"onScroll"===i&&Ur("scroll",e):null!=u&&b(e,i,u,l))}switch(n){case"input":V(e),Z(e,r,!1);break;case"textarea":V(e),ie(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(i=r.value)?ne(e,!!r.multiple,i,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof a.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Vs(t),null;case 6:if(e&&null!=t.stateNode)Is(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(o(166));if(n=Jo(Ko.current),Jo(Vo.current),fo(t)){if(r=t.stateNode,n=t.memoizedProps,r[fa]=t,(i=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Xr(r.nodeValue,n,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,!!(1&e.mode))}i&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fa]=t,t.stateNode=r}return Vs(t),null;case 13:if(Sa(ei),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ao&&null!==ro&&1&t.mode&&!(128&t.flags))ho(),po(),t.flags|=98560,i=!1;else if(i=fo(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(o(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(o(317));i[fa]=t}else po(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Vs(t),i=!1}else null!==oo&&(ic(oo),oo=null),i=!0;if(!i)return 65536&t.flags?t:null}return 128&t.flags?(t.lanes=n,t):((r=null!==r)!=(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,1&t.mode&&(null===e||1&ei.current?0===Il&&(Il=3):mc())),null!==t.updateQueue&&(t.flags|=4),Vs(t),null);case 4:return Yo(),As(e,t),null===e&&Br(t.stateNode.containerInfo),Vs(t),null;case 10:return To(t.type._context),Vs(t),null;case 19:if(Sa(ei),null===(i=t.memoizedState))return Vs(t),null;if(r=!!(128&t.flags),null===(l=i.rendering))if(r)Hs(i,!1);else{if(0!==Il||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(l=ti(e))){for(t.flags|=128,Hs(i,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(i=n).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Oa(ei,1&ei.current|2),t.child}e=e.sibling}null!==i.tail&&Ye()>Bl&&(t.flags|=128,r=!0,Hs(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ti(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Hs(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!ao)return Vs(t),null}else 2*Ye()-i.renderingStartTime>Bl&&1073741824!==n&&(t.flags|=128,r=!0,Hs(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=i.last)?n.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ye(),t.sibling=null,n=ei.current,Oa(ei,r?1&n|2:1&n),t):(Vs(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&1&t.mode?!!(1073741824&Al)&&(Vs(t),6&t.subtreeFlags&&(t.flags|=8192)):Vs(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Ks(e,t){switch(to(t),t.tag){case 1:return Aa(t.type)&&Ra(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Yo(),Sa(Ca),Sa(Ta),ri(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zo(t),null;case 13:if(Sa(ei),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Sa(ei),null;case 4:return Yo(),null;case 10:return To(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}js=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},As=function(){},Rs=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Jo(Vo.current);var o,i=null;switch(n){case"input":a=J(e,a),r=J(e,r),i=[];break;case"select":a=L({},a,{value:void 0}),r=L({},r,{value:void 0}),i=[];break;case"textarea":a=re(e,a),r=re(e,r),i=[];break;default:"function"!=typeof a.onClick&&"function"==typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,a)if(!r.hasOwnProperty(u)&&a.hasOwnProperty(u)&&null!=a[u])if("style"===u){var l=a[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=a?a[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(i=i||[]).push(u,c)):"children"===u?"string"!=typeof c&&"number"!=typeof c||(i=i||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}},Is=function(e,t,n,r){n!==r&&(t.flags|=4)};var Js=!1,Qs=!1,Ys="function"==typeof WeakSet?WeakSet:Set,Xs=null;function Zs(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(n){kc(e,t,n)}else n.current=null}function el(e,t,n){try{n()}catch(n){kc(e,t,n)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var o=a.destroy;a.destroy=void 0,void 0!==o&&el(t,n,o)}a=a.next}while(a!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function al(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&(delete t[fa],delete t[ha],delete t[ma],delete t[ga],delete t[va]),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function fl(e,t,n){for(n=n.child;null!==n;)hl(e,t,n),n=n.sibling}function hl(e,t,n){if(ot&&"function"==typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(at,n)}catch(e){}switch(n.tag){case 5:Qs||Zs(n,t);case 6:var r=ul,a=dl;ul=null,fl(e,t,n),dl=a,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?la(e.parentNode,n):1===e.nodeType&&la(e,n),Bt(e)):la(ul,n.stateNode));break;case 4:r=ul,a=dl,ul=n.stateNode.containerInfo,dl=!0,fl(e,t,n),ul=r,dl=a;break;case 0:case 11:case 14:case 15:if(!Qs&&null!==(r=n.updateQueue)&&null!==(r=r.lastEffect)){a=r=r.next;do{var o=a,i=o.destroy;o=o.tag,void 0!==i&&(2&o||4&o)&&el(n,t,i),a=a.next}while(a!==r)}fl(e,t,n);break;case 1:if(!Qs&&(Zs(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(e){kc(n,t,e)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Qs=(r=Qs)||null!==n.memoizedState,fl(e,t,n),Qs=r):fl(e,t,n);break;default:fl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ys),t.forEach(function(t){var r=Tc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r];try{var i=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(o(160));hl(i,s,a),ul=null,dl=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(e){kc(a,t,e)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(t){kc(e,e.return,t)}try{nl(5,e,e.return)}catch(t){kc(e,e.return,t)}}break;case 1:ml(t,e),vl(e),512&r&&null!==n&&Zs(n,n.return);break;case 5:if(ml(t,e),vl(e),512&r&&null!==n&&Zs(n,n.return),32&e.flags){var a=e.stateNode;try{fe(a,"")}catch(t){kc(e,e.return,t)}}if(4&r&&null!=(a=e.stateNode)){var i=e.memoizedProps,s=null!==n?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&Y(a,i),be(l,s);var u=be(l,i);for(s=0;s<c.length;s+=2){var d=c[s],f=c[s+1];"style"===d?ge(a,f):"dangerouslySetInnerHTML"===d?de(a,f):"children"===d?fe(a,f):b(a,d,f,u)}switch(l){case"input":X(a,i);break;case"textarea":oe(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;null!=p?ne(a,!!i.multiple,p,!1):h!==!!i.multiple&&(null!=i.defaultValue?ne(a,!!i.multiple,i.defaultValue,!0):ne(a,!!i.multiple,i.multiple?[]:"",!1))}a[ha]=i}catch(t){kc(e,e.return,t)}}break;case 6:if(ml(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(o(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(t){kc(e,e.return,t)}}break;case 3:if(ml(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(t){kc(e,e.return,t)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(a=e.child).flags&&(i=null!==a.memoizedState,a.stateNode.isHidden=i,!i||null!==a.alternate&&null!==a.alternate.memoizedState||(Fl=Ye())),4&r&&pl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Qs=(u=Qs)||d,ml(t,e),Qs=u):ml(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&1&e.mode)for(Xs=e,d=e.child;null!==d;){for(f=Xs=d;null!==Xs;){switch(p=(h=Xs).child,h.tag){case 0:case 11:case 14:case 15:nl(4,h,h.return);break;case 1:Zs(h,h.return);var m=h.stateNode;if("function"==typeof m.componentWillUnmount){r=h,n=h.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(e){kc(r,n,e)}}break;case 5:Zs(h,h.return);break;case 22:if(null!==h.memoizedState){_l(f);continue}}null!==p?(p.return=h,Xs=p):_l(f)}d=d.sibling}e:for(d=null,f=e;;){if(5===f.tag){if(null===d){d=f;try{a=f.stateNode,u?"function"==typeof(i=a.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=f.stateNode,s=null!=(c=f.memoizedProps.style)&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",s))}catch(t){kc(e,e.return,t)}}}else if(6===f.tag){if(null===d)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(t){kc(e,e.return,t)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ml(t,e),vl(e),4&r&&pl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(il(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(fe(a,""),r.flags&=-33),cl(e,sl(e),a);break;case 3:case 4:var i=r.stateNode.containerInfo;ll(e,sl(e),i);break;default:throw Error(o(161))}}catch(t){kc(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Xs=e,bl(e,t,n)}function bl(e,t,n){for(var r=!!(1&e.mode);null!==Xs;){var a=Xs,o=a.child;if(22===a.tag&&r){var i=null!==a.memoizedState||Js;if(!i){var s=a.alternate,l=null!==s&&null!==s.memoizedState||Qs;s=Js;var c=Qs;if(Js=i,(Qs=l)&&!c)for(Xs=a;null!==Xs;)l=(i=Xs).child,22===i.tag&&null!==i.memoizedState?xl(a):null!==l?(l.return=i,Xs=l):xl(a);for(;null!==o;)Xs=o,bl(o,t,n),o=o.sibling;Xs=a,Js=s,Qs=c}wl(e)}else 8772&a.subtreeFlags&&null!==o?(o.return=a,Xs=o):wl(e)}}function wl(e){for(;null!==Xs;){var t=Xs;if(8772&t.flags){var n=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:Qs||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Qs)if(null===n)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:ns(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Wo(t,i,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Wo(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var f=d.dehydrated;null!==f&&Bt(f)}}}break;default:throw Error(o(163))}Qs||512&t.flags&&al(t)}catch(e){kc(t,t.return,e)}}if(t===e){Xs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xs=n;break}Xs=t.return}}function _l(e){for(;null!==Xs;){var t=Xs;if(t===e){Xs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xs=n;break}Xs=t.return}}function xl(e){for(;null!==Xs;){var t=Xs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(e){kc(t,n,e)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(e){kc(t,a,e)}}var o=t.return;try{al(t)}catch(e){kc(t,o,e)}break;case 5:var i=t.return;try{al(t)}catch(e){kc(t,i,e)}}}catch(e){kc(t,t.return,e)}if(t===e){Xs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Xs=s;break}Xs=t.return}}var El,kl=Math.ceil,Sl=w.ReactCurrentDispatcher,Ol=w.ReactCurrentOwner,Pl=w.ReactCurrentBatchConfig,Tl=0,Cl=null,Nl=null,jl=0,Al=0,Rl=ka(0),Il=0,$l=null,Dl=0,Ll=0,zl=0,Ul=null,Ml=null,Fl=0,Bl=1/0,ql=null,Wl=!1,Hl=null,Vl=null,Gl=!1,Kl=null,Jl=0,Ql=0,Yl=null,Xl=-1,Zl=0;function ec(){return 6&Tl?Ye():-1!==Xl?Xl:Xl=Ye()}function tc(e){return 1&e.mode?2&Tl&&0!==jl?jl&-jl:null!==go.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Qt(e.type):1}function nc(e,t,n,r){if(50<Ql)throw Ql=0,Yl=null,Error(o(185));vt(e,n,r),2&Tl&&e===Cl||(e===Cl&&(!(2&Tl)&&(Ll|=n),4===Il&&sc(e,jl)),rc(e,r),1===n&&0===Tl&&!(1&t.mode)&&(Bl=Ye()+500,Ua&&Ba()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-it(o),s=1<<i,l=a[i];-1===l?0!==(s&n)&&0===(s&r)||(a[i]=ht(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var r=ft(e,e===Cl?jl:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Ua=!0,Fa(e)}(lc.bind(null,e)):Fa(lc.bind(null,e)),ia(function(){!(6&Tl)&&Ba()}),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Cc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Xl=-1,Zl=0,6&Tl)throw Error(o(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ft(e,e===Cl?jl:0);if(0===r)return null;if(30&r||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var a=Tl;Tl|=2;var i=pc();for(Cl===e&&jl===t||(ql=null,Bl=Ye()+500,fc(e,t));;)try{yc();break}catch(t){hc(e,t)}Po(),Sl.current=i,Tl=a,null!==Nl?t=0:(Cl=null,jl=0,t=Il)}if(0!==t){if(2===t&&0!==(a=pt(e))&&(r=a,t=oc(e,a)),1===t)throw n=$l,fc(e,0),sc(e,r),rc(e,Ye()),n;if(6===t)sc(e,r);else{if(a=e.current.alternate,!(30&r||function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],o=a.getSnapshot;a=a.value;try{if(!sr(o(),a))return!1}catch(e){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)||(t=gc(e,r),2===t&&(i=pt(e),0!==i&&(r=i,t=oc(e,i))),1!==t)))throw n=$l,fc(e,0),sc(e,r),rc(e,Ye()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:_c(e,Ml,ql);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=Fl+500-Ye())){if(0!==ft(e,0))break;if(((a=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ra(_c.bind(null,e,Ml,ql),t);break}_c(e,Ml,ql);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var s=31-it(r);i=1<<s,(s=t[s])>a&&(a=s),r&=~i}if(r=a,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kl(r/1960))-r)){e.timeoutHandle=ra(_c.bind(null,e,Ml,ql),r);break}_c(e,Ml,ql);break;default:throw Error(o(329))}}}return rc(e,Ye()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=Ul;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Ml,Ml=n,null!==t&&ic(t)),e}function ic(e){null===Ml?Ml=e:Ml.push.apply(Ml,e)}function sc(e,t){for(t&=~zl,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-it(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(6&Tl)throw Error(o(327));xc();var t=ft(e,0);if(!(1&t))return rc(e,Ye()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=$l,fc(e,0),sc(e,t),rc(e,Ye()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,Ml,ql),rc(e,Ye()),null}function cc(e,t){var n=Tl;Tl|=1;try{return e(t)}finally{0===(Tl=n)&&(Bl=Ye()+500,Ua&&Ba())}}function uc(e){null!==Kl&&0===Kl.tag&&!(6&Tl)&&xc();var t=Tl;Tl|=1;var n=Pl.transition,r=bt;try{if(Pl.transition=null,bt=1,e)return e()}finally{bt=r,Pl.transition=n,!(6&(Tl=t))&&Ba()}}function dc(){Al=Rl.current,Sa(Rl)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,aa(n)),null!==Nl)for(n=Nl.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Ra();break;case 3:Yo(),Sa(Ca),Sa(Ta),ri();break;case 5:Zo(r);break;case 4:Yo();break;case 13:case 19:Sa(ei);break;case 10:To(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Cl=e,Nl=e=Rc(e.current,null),jl=Al=t,Il=0,$l=null,zl=Ll=Dl=0,Ml=Ul=null,null!==Ao){for(t=0;t<Ao.length;t++)if(null!==(r=(n=Ao[t]).interleaved)){n.interleaved=null;var a=r.next,o=n.pending;if(null!==o){var i=o.next;o.next=a,r.next=i}n.pending=r}Ao=null}return e}function hc(e,t){for(;;){var n=Nl;try{if(Po(),ai.current=Xi,ui){for(var r=si.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}ui=!1}if(ii=0,ci=li=si=null,di=!1,fi=0,Ol.current=null,null===n||null===n.return){Il=1,$l=t,Nl=null;break}e:{var i=e,s=n.return,l=n,c=t;if(t=jl,l.flags|=32768,null!==c&&"object"==typeof c&&"function"==typeof c.then){var u=c,d=l,f=d.tag;if(!(1&d.mode||0!==f&&11!==f&&15!==f)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=gs(s);if(null!==p){p.flags&=-257,vs(p,s,l,0,t),1&p.mode&&ms(i,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(!(1&t)){ms(i,u,t),mc();break e}c=Error(o(426))}else if(ao&&1&l.mode){var v=gs(s);if(null!==v){!(65536&v.flags)&&(v.flags|=256),vs(v,s,l,0,t),mo(cs(c,l));break e}}i=c=cs(c,l),4!==Il&&(Il=2),null===Ul?Ul=[i]:Ul.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Bo(i,hs(0,c,t));break e;case 1:l=c;var y=i.type,b=i.stateNode;if(!(128&i.flags||"function"!=typeof y.getDerivedStateFromError&&(null===b||"function"!=typeof b.componentDidCatch||null!==Vl&&Vl.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t,Bo(i,ps(i,l,t));break e}}i=i.return}while(null!==i)}wc(n)}catch(e){t=e,Nl===n&&null!==n&&(Nl=n=n.return);continue}break}}function pc(){var e=Sl.current;return Sl.current=Xi,null===e?Xi:e}function mc(){0!==Il&&3!==Il&&2!==Il||(Il=4),null===Cl||!(268435455&Dl)&&!(268435455&Ll)||sc(Cl,jl)}function gc(e,t){var n=Tl;Tl|=2;var r=pc();for(Cl===e&&jl===t||(ql=null,fc(e,t));;)try{vc();break}catch(t){hc(e,t)}if(Po(),Tl=n,Sl.current=r,null!==Nl)throw Error(o(261));return Cl=null,jl=0,Il}function vc(){for(;null!==Nl;)bc(Nl)}function yc(){for(;null!==Nl&&!Je();)bc(Nl)}function bc(e){var t=El(e.alternate,e,Al);e.memoizedProps=e.pendingProps,null===t?wc(e):Nl=t,Ol.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,32768&t.flags){if(null!==(n=Ks(n,t)))return n.flags&=32767,void(Nl=n);if(null===e)return Il=6,void(Nl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(n=Gs(n,t,Al)))return void(Nl=n);if(null!==(t=t.sibling))return void(Nl=t);Nl=t=e}while(null!==t);0===Il&&(Il=5)}function _c(e,t,n){var r=bt,a=Pl.transition;try{Pl.transition=null,bt=1,function(e,t,n,r){do{xc()}while(null!==Kl);if(6&Tl)throw Error(o(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-it(n),o=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~o}}(e,i),e===Cl&&(Nl=Cl=null,jl=0),!(2064&n.subtreeFlags)&&!(2064&n.flags)||Gl||(Gl=!0,Cc(tt,function(){return xc(),null})),i=!!(15990&n.flags),15990&n.subtreeFlags||i){i=Pl.transition,Pl.transition=null;var s=bt;bt=1;var l=Tl;Tl|=4,Ol.current=null,function(e,t){if(ea=Wt,hr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(e){n=null;break e}var s=0,l=-1,c=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var p;f!==n||0!==a&&3!==f.nodeType||(l=s+a),f!==i||0!==r&&3!==f.nodeType||(c=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(p=f.firstChild);)h=f,f=p;for(;;){if(f===e)break t;if(h===n&&++u===a&&(l=s),h===i&&++d===r&&(c=s),null!==(p=f.nextSibling))break;h=(f=h).parentNode}f=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:e,selectionRange:n},Wt=!1,Xs=t;null!==Xs;)if(e=(t=Xs).child,1028&t.subtreeFlags&&null!==e)e.return=t,Xs=e;else for(;null!==Xs;){t=Xs;try{var m=t.alternate;if(1024&t.flags)switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:ns(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(o(163))}}catch(e){kc(t,t.return,e)}if(null!==(e=t.sibling)){e.return=t.return,Xs=e;break}Xs=t.return}m=tl,tl=!1}(e,n),gl(n,e),pr(ta),Wt=!!ea,ta=ea=null,e.current=n,yl(n,e,a),Qe(),Tl=l,bt=s,Pl.transition=i}else e.current=n;if(Gl&&(Gl=!1,Kl=e,Jl=a),0===(i=e.pendingLanes)&&(Vl=null),function(e){if(ot&&"function"==typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(at,e,void 0,!(128&~e.current.flags))}catch(e){}}(n.stateNode),rc(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((a=t[n]).value,{componentStack:a.stack,digest:a.digest});if(Wl)throw Wl=!1,e=Hl,Hl=null,e;!!(1&Jl)&&0!==e.tag&&xc(),1&(i=e.pendingLanes)?e===Yl?Ql++:(Ql=0,Yl=e):Ql=0,Ba()}(e,t,n,r)}finally{Pl.transition=a,bt=r}return null}function xc(){if(null!==Kl){var e=wt(Jl),t=Pl.transition,n=bt;try{if(Pl.transition=null,bt=16>e?16:e,null===Kl)var r=!1;else{if(e=Kl,Kl=null,Jl=0,6&Tl)throw Error(o(331));var a=Tl;for(Tl|=4,Xs=e.current;null!==Xs;){var i=Xs,s=i.child;if(16&Xs.flags){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Xs=u;null!==Xs;){var d=Xs;switch(d.tag){case 0:case 11:case 15:nl(8,d,i)}var f=d.child;if(null!==f)f.return=d,Xs=f;else for(;null!==Xs;){var h=(d=Xs).sibling,p=d.return;if(ol(d),d===u){Xs=null;break}if(null!==h){h.return=p,Xs=h;break}Xs=p}}}var m=i.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Xs=i}}if(2064&i.subtreeFlags&&null!==s)s.return=i,Xs=s;else e:for(;null!==Xs;){if(2048&(i=Xs).flags)switch(i.tag){case 0:case 11:case 15:nl(9,i,i.return)}var y=i.sibling;if(null!==y){y.return=i.return,Xs=y;break e}Xs=i.return}}var b=e.current;for(Xs=b;null!==Xs;){var w=(s=Xs).child;if(2064&s.subtreeFlags&&null!==w)w.return=s,Xs=w;else e:for(s=b;null!==Xs;){if(2048&(l=Xs).flags)try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(e){kc(l,l.return,e)}if(l===s){Xs=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,Xs=_;break e}Xs=l.return}}if(Tl=a,Ba(),ot&&"function"==typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(at,e)}catch(e){}r=!0}return r}finally{bt=n,Pl.transition=t}}return!1}function Ec(e,t,n){e=Mo(e,t=hs(0,t=cs(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),rc(e,t))}function kc(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Vl||!Vl.has(r))){t=Mo(t,e=ps(t,e=cs(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),rc(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Cl===e&&(jl&n)===n&&(4===Il||3===Il&&(130023424&jl)===jl&&500>Ye()-Fl?fc(e,0):zl|=n),rc(e,t)}function Oc(e,t){0===t&&(1&e.mode?(t=ut,!(130023424&(ut<<=1))&&(ut=4194304)):t=1);var n=ec();null!==(e=$o(e,t))&&(vt(e,t,n),rc(e,n))}function Pc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Oc(e,n)}function Tc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Oc(e,n)}function Cc(e,t){return Ge(e,t)}function Nc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jc(e,t,n,r){return new Nc(e,t,n,r)}function Ac(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var n=e.alternate;return null===n?((n=jc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ic(e,t,n,r,a,i){var s=2;if(r=e,"function"==typeof e)Ac(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case E:return $c(n.children,a,i,t);case k:s=8,a|=8;break;case S:return(e=jc(12,n,t,2|a)).elementType=S,e.lanes=i,e;case C:return(e=jc(13,n,t,a)).elementType=C,e.lanes=i,e;case N:return(e=jc(19,n,t,a)).elementType=N,e.lanes=i,e;case R:return Dc(n,a,i,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case O:s=10;break e;case P:s=9;break e;case T:s=11;break e;case j:s=14;break e;case A:s=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=jc(s,n,t,a)).elementType=e,t.type=r,t.lanes=i,t}function $c(e,t,n,r){return(e=jc(7,e,r,t)).lanes=n,e}function Dc(e,t,n,r){return(e=jc(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Lc(e,t,n){return(e=jc(6,e,null,t)).lanes=n,e}function zc(e,t,n){return(t=jc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Mc(e,t,n,r,a,o,i,s,l){return e=new Uc(e,t,n,s,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=jc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lo(o),e}function Fc(e){if(!e)return Pa;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Aa(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Aa(n))return $a(e,n,t)}return t}function Bc(e,t,n,r,a,o,i,s,l){return(e=Mc(n,r,!0,e,0,o,0,s,l)).context=Fc(null),n=e.current,(o=Uo(r=ec(),a=tc(n))).callback=null!=t?t:null,Mo(n,o,a),e.current.lanes=a,vt(e,a,r),rc(e,r),e}function qc(e,t,n,r){var a=t.current,o=ec(),i=tc(a);return n=Fc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Uo(o,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Mo(a,t,i))&&(nc(e,a,i,o),Fo(e,a,i)),i}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Vc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}El=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ca.current)bs=!0;else{if(0===(e.lanes&n)&&!(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:Cs(t),po();break;case 5:Xo(t);break;case 1:Aa(t.type)&&Da(t);break;case 4:Qo(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Oa(Eo,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Oa(ei,1&ei.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ls(e,t,n):(Oa(ei,1&ei.current),null!==(e=Ws(e,t,n))?e.sibling:null);Oa(ei,1&ei.current);break;case 19:if(r=0!==(n&t.childLanes),128&e.flags){if(r)return Bs(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Oa(ei,ei.current),r)break;return null;case 22:case 23:return t.lanes=0,ks(e,t,n)}return Ws(e,t,n)}(e,t,n);bs=!!(131072&e.flags)}else bs=!1,ao&&1048576&t.flags&&Za(t,Va,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qs(e,t),e=t.pendingProps;var a=ja(t,Ta.current);No(t,n),a=gi(null,t,r,e,a,n);var i=vi();return t.flags|=1,"object"==typeof a&&null!==a&&"function"==typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Aa(r)?(i=!0,Da(t)):i=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Lo(t),a.updater=as,t.stateNode=a,a._reactInternals=t,ls(t,r,e,n),t=Ts(null,t,r,!0,i,n)):(t.tag=0,ao&&i&&eo(t),ws(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qs(e,t),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"==typeof e)return Ac(e)?1:0;if(null!=e){if((e=e.$$typeof)===T)return 11;if(e===j)return 14}return 2}(r),e=ns(r,e),a){case 0:t=Os(null,t,r,e,n);break e;case 1:t=Ps(null,t,r,e,n);break e;case 11:t=_s(null,t,r,e,n);break e;case 14:t=xs(null,t,r,ns(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,Os(e,t,r,a=t.elementType===r?a:ns(r,a),n);case 1:return r=t.type,a=t.pendingProps,Ps(e,t,r,a=t.elementType===r?a:ns(r,a),n);case 3:e:{if(Cs(t),null===e)throw Error(o(387));r=t.pendingProps,a=(i=t.memoizedState).element,zo(e,t),qo(t,r,null,n);var s=t.memoizedState;if(r=s.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Ns(e,t,r,n,a=cs(Error(o(423)),t));break e}if(r!==a){t=Ns(e,t,r,n,a=cs(Error(o(424)),t));break e}for(ro=ca(t.stateNode.containerInfo.firstChild),no=t,ao=!0,oo=null,n=xo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===a){t=Ws(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return Xo(t),null===e&&co(t),r=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,s=a.children,na(r,a)?s=null:null!==i&&na(r,i)&&(t.flags|=32),Ss(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&co(t),null;case 13:return Ls(e,t,n);case 4:return Qo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=_o(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,_s(e,t,r,a=t.elementType===r?a:ns(r,a),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,i=t.memoizedProps,s=a.value,Oa(Eo,r._currentValue),r._currentValue=s,null!==i)if(sr(i.value,s)){if(i.children===a.children&&!Ca.current){t=Ws(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){s=i.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===i.tag){(c=Uo(-1,n&-n)).tag=2;var u=i.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,null!==(c=i.alternate)&&(c.lanes|=n),Co(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===i.tag)s=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(s=i.return))throw Error(o(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Co(s,n,t),s=i.sibling}else s=i.child;if(null!==s)s.return=i;else for(s=i;null!==s;){if(s===t){s=null;break}if(null!==(i=s.sibling)){i.return=s.return,s=i;break}s=s.return}i=s}ws(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,No(t,n),r=r(a=jo(a)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return a=ns(r=t.type,t.pendingProps),xs(e,t,r,a=ns(r.type,a),n);case 15:return Es(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:ns(r,a),qs(e,t),t.tag=1,Aa(r)?(e=!0,Da(t)):e=!1,No(t,n),is(t,r,a),ls(t,r,a,n),Ts(null,t,r,!0,e,n);case 19:return Bs(e,t,n);case 22:return ks(e,t,n)}throw Error(o(156,t.tag))};var Gc="function"==typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function Jc(e){this._internalRoot=e}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Zc(e,t,n,r,a){var o=n._reactRootContainer;if(o){var i=o;if("function"==typeof a){var s=a;a=function(){var e=Wc(i);s.call(e)}}qc(t,i,e,a)}else i=function(e,t,n,r,a){if(a){if("function"==typeof r){var o=r;r=function(){var e=Wc(i);o.call(e)}}var i=Bc(t,r,e,0,null,!1,0,"",Xc);return e._reactRootContainer=i,e[pa]=i.current,Br(8===e.nodeType?e.parentNode:e),uc(),i}for(;a=e.lastChild;)e.removeChild(a);if("function"==typeof r){var s=r;r=function(){var e=Wc(l);s.call(e)}}var l=Mc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[pa]=l.current,Br(8===e.nodeType?e.parentNode:e),uc(function(){qc(t,l,n,r)}),l}(n,t,e,a,r);return Wc(i)}Jc.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));qc(e,t,null,null)},Jc.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){qc(null,e,null,null)}),t[pa]=null}},Jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Lt(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Ye()),!(6&Tl)&&(Bl=Ye()+500,Ba()))}break;case 13:uc(function(){var t=$o(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Vc(e,1)}},xt=function(e){if(13===e.tag){var t=$o(e,134217728);null!==t&&nc(t,e,134217728,ec()),Vc(e,134217728)}},Et=function(e){if(13===e.tag){var t=tc(e),n=$o(e,t);null!==n&&nc(n,e,t,ec()),Vc(e,t)}},kt=function(){return bt},St=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},xe=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=_a(r);if(!a)throw Error(o(90));G(r),X(r,a)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=cc,Ce=uc;var eu={usingClientEntryPoint:!1,Events:[ba,wa,_a,Oe,Pe,cc]},tu={findFiberByHostInstance:ya,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{at=ru.inject(nu),ot=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Qc(e))throw Error(o(299));var n=!1,r="",a=Gc;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Mc(e,1,!1,null,0,n,0,r,a),e[pa]=t.current,Br(8===e.nodeType?e.parentNode:e),new Kc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Yc(t))throw Error(o(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Qc(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,a=!1,i="",s=Gc;if(null!=n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,a,0,i,s),e[pa]=t.current,Br(e),r)for(e=0;e<r.length;e++)a=(a=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Jc(t)},t.render=function(e,t,n){if(!Yc(t))throw Error(o(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Yc(e))throw Error(o(40));return!!e._reactRootContainer&&(uc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[pa]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Yc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},601:e=>{e.exports=function(e){return e[1]}},626:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(601),a=n.n(r),o=n(314),i=n.n(o)()(a());i.push([e.id,"* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nbody {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n    sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  min-height: 100vh;\n}\n\n#root {\n  min-height: 100vh;\n}\n\n.App {\n  min-height: 100vh;\n}\n\n/* 加载动画样式 */\n.loading-container {\n  min-height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n}\n\n.loading-spinner {\n  text-align: center;\n  color: white;\n}\n\n.spinner {\n  width: 50px;\n  height: 50px;\n  border: 4px solid rgba(255, 255, 255, 0.3);\n  border-top: 4px solid white;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n  margin: 0 auto 20px;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n.loading-spinner p {\n  font-size: 1.1rem;\n  font-weight: 600;\n}\n\n/* 全局样式重置和优化 */\na {\n  text-decoration: none;\n  color: inherit;\n}\n\nbutton {\n  font-family: inherit;\n}\n\ninput, textarea, select {\n  font-family: inherit;\n}\n\n/* 滚动条样式 */\n::-webkit-scrollbar {\n  width: 8px;\n}\n\n::-webkit-scrollbar-track {\n  background: #f1f1f1;\n  border-radius: 4px;\n}\n\n::-webkit-scrollbar-thumb {\n  background: #c1c1c1;\n  border-radius: 4px;\n}\n\n::-webkit-scrollbar-thumb:hover {\n  background: #a8a8a8;\n}\n\n/* 动画效果 */\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes slideIn {\n  from {\n    opacity: 0;\n    transform: translateX(-20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n\n.fade-in {\n  animation: fadeIn 0.6s ease-out;\n}\n\n.slide-in {\n  animation: slideIn 0.6s ease-out;\n}",""]);const s=i},659:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},660:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(n(907)),o=r(n(818));t.default=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(n=e.isMaybeSingle)&&void 0!==n&&n,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=a.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,n,r,a;let i=null,s=null,l=null,c=e.status,u=e.statusText;if(e.ok){if("HEAD"!==this.method){const n=await e.text();""===n||(s="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(t=this.headers.get("Accept"))||void 0===t?void 0:t.includes("application/vnd.pgrst.plan+text"))?n:JSON.parse(n))}const a=null===(n=this.headers.get("Prefer"))||void 0===n?void 0:n.match(/count=(exact|planned|estimated)/),o=null===(r=e.headers.get("content-range"))||void 0===r?void 0:r.split("/");a&&o&&o.length>1&&(l=parseInt(o[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(s)&&(s.length>1?(i={code:"PGRST116",details:`Results contain ${s.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},s=null,l=null,c=406,u="Not Acceptable"):s=1===s.length?s[0]:null)}else{const t=await e.text();try{i=JSON.parse(t),Array.isArray(i)&&404===e.status&&(s=[],i=null,c=200,u="OK")}catch(n){404===e.status&&""===t?(c=204,u="No Content"):i={message:t}}if(i&&this.isMaybeSingle&&(null===(a=null==i?void 0:i.details)||void 0===a?void 0:a.includes("0 rows"))&&(i=null,c=200,u="OK"),i&&this.shouldThrowOnError)throw new o.default(i)}return{error:i,data:s,count:l,status:c,statusText:u}});return this.shouldThrowOnError||(n=n.catch(e=>{var t,n,r;return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!==(n=null==e?void 0:e.stack)&&void 0!==n?n:""}`,hint:"",code:`${null!==(r=null==e?void 0:e.code)&&void 0!==r?r:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}}},667:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(601),a=n.n(r),o=n(314),i=n.n(o)()(a());i.push([e.id,'/* 用户偏好设置样式 */\n.user-preferences-container {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 20px;\n  background: #f8fafc;\n  min-height: 100vh;\n}\n\n.preferences-header {\n  background: white;\n  padding: 30px;\n  border-radius: 12px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n  margin-bottom: 30px;\n  position: relative;\n}\n\n.preferences-header h2 {\n  color: #2d3748;\n  margin: 0 0 10px 0;\n  font-size: 28px;\n  font-weight: 600;\n}\n\n.preferences-header p {\n  color: #718096;\n  margin: 0;\n  font-size: 16px;\n}\n\n.close-button {\n  position: absolute;\n  top: 20px;\n  right: 20px;\n  background: #e2e8f0;\n  border: none;\n  padding: 8px 12px;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 14px;\n  color: #4a5568;\n  transition: all 0.2s;\n}\n\n.close-button:hover {\n  background: #cbd5e0;\n  color: #2d3748;\n}\n\n.preferences-content {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 30px;\n  align-items: start;\n}\n\n.preferences-list {\n  background: white;\n  border-radius: 12px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n  overflow: hidden;\n}\n\n.list-header {\n  padding: 25px;\n  border-bottom: 1px solid #e2e8f0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.list-header h3 {\n  margin: 0;\n  color: #2d3748;\n  font-size: 20px;\n  font-weight: 600;\n}\n\n.add-preference-button {\n  background: #4299e1;\n  color: white;\n  border: none;\n  padding: 10px 16px;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 500;\n  transition: all 0.2s;\n}\n\n.add-preference-button:hover {\n  background: #3182ce;\n  transform: translateY(-1px);\n}\n\n.loading-state {\n  padding: 60px 25px;\n  text-align: center;\n}\n\n.loading-spinner {\n  width: 40px;\n  height: 40px;\n  border: 4px solid #e2e8f0;\n  border-top: 4px solid #4299e1;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n  margin: 0 auto 15px;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n.empty-state {\n  padding: 60px 25px;\n  text-align: center;\n}\n\n.empty-icon {\n  font-size: 48px;\n  margin-bottom: 20px;\n}\n\n.empty-state h4 {\n  color: #2d3748;\n  margin: 0 0 10px 0;\n  font-size: 18px;\n}\n\n.empty-state p {\n  color: #718096;\n  margin: 0 0 25px 0;\n  font-size: 14px;\n}\n\n.create-first-preference-button {\n  background: #48bb78;\n  color: white;\n  border: none;\n  padding: 12px 24px;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 500;\n  transition: all 0.2s;\n}\n\n.create-first-preference-button:hover {\n  background: #38a169;\n  transform: translateY(-1px);\n}\n\n.preferences-grid {\n  padding: 25px;\n}\n\n.preference-card {\n  background: #f7fafc;\n  border: 1px solid #e2e8f0;\n  border-radius: 8px;\n  padding: 20px;\n  margin-bottom: 15px;\n  transition: all 0.2s;\n}\n\n.preference-card:hover {\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n  transform: translateY(-2px);\n}\n\n.preference-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 10px;\n}\n\n.preference-header h4 {\n  margin: 0;\n  color: #2d3748;\n  font-size: 16px;\n  font-weight: 600;\n}\n\n.default-badge {\n  background: #f6ad55;\n  color: white;\n  padding: 4px 8px;\n  border-radius: 4px;\n  font-size: 12px;\n  font-weight: 500;\n}\n\n.preference-description {\n  color: #718096;\n  font-size: 14px;\n  margin: 0 0 15px 0;\n  line-height: 1.5;\n}\n\n.preference-details {\n  margin-bottom: 15px;\n}\n\n.preference-item {\n  display: flex;\n  margin-bottom: 8px;\n  font-size: 14px;\n}\n\n.preference-item .label {\n  color: #4a5568;\n  font-weight: 500;\n  min-width: 80px;\n}\n\n.preference-item .value {\n  color: #2d3748;\n  flex: 1;\n}\n\n.preference-actions {\n  display: flex;\n  gap: 8px;\n  flex-wrap: wrap;\n}\n\n.preference-actions button {\n  border: none;\n  padding: 6px 12px;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 12px;\n  font-weight: 500;\n  transition: all 0.2s;\n}\n\n.set-default-button {\n  background: #f6ad55;\n  color: white;\n}\n\n.set-default-button:hover {\n  background: #ed8936;\n}\n\n.edit-button {\n  background: #4299e1;\n  color: white;\n}\n\n.edit-button:hover {\n  background: #3182ce;\n}\n\n.delete-button {\n  background: #f56565;\n  color: white;\n}\n\n.delete-button:hover {\n  background: #e53e3e;\n}\n\n.preference-form-section {\n  background: white;\n  border-radius: 12px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n  overflow: hidden;\n}\n\n.form-header {\n  padding: 25px;\n  border-bottom: 1px solid #e2e8f0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.form-header h3 {\n  margin: 0;\n  color: #2d3748;\n  font-size: 20px;\n  font-weight: 600;\n}\n\n.preference-form {\n  padding: 25px;\n}\n\n.form-group {\n  margin-bottom: 20px;\n}\n\n.form-group label {\n  display: block;\n  margin-bottom: 8px;\n  color: #2d3748;\n  font-weight: 500;\n  font-size: 14px;\n}\n\n.form-group input,\n.form-group select,\n.form-group textarea {\n  width: 100%;\n  padding: 10px 12px;\n  border: 1px solid #e2e8f0;\n  border-radius: 6px;\n  font-size: 14px;\n  color: #2d3748;\n  background: white;\n  transition: border-color 0.2s;\n}\n\n.form-group input:focus,\n.form-group select:focus,\n.form-group textarea:focus {\n  outline: none;\n  border-color: #4299e1;\n  box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.1);\n}\n\n.form-row {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 20px;\n}\n\n.checkbox-group {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));\n  gap: 10px;\n  margin-top: 8px;\n}\n\n.checkbox-item {\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  font-size: 14px;\n  color: #4a5568;\n}\n\n.checkbox-item input[type="checkbox"] {\n  width: auto;\n  margin-right: 8px;\n  cursor: pointer;\n}\n\n.checkbox-item:hover {\n  color: #2d3748;\n}\n\n.form-actions {\n  display: flex;\n  gap: 15px;\n  justify-content: flex-end;\n  margin-top: 30px;\n  padding-top: 20px;\n  border-top: 1px solid #e2e8f0;\n}\n\n.save-button {\n  background: #48bb78;\n  color: white;\n  border: none;\n  padding: 12px 24px;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 500;\n  transition: all 0.2s;\n}\n\n.save-button:hover {\n  background: #38a169;\n  transform: translateY(-1px);\n}\n\n.cancel-button {\n  background: #e2e8f0;\n  color: #4a5568;\n  border: none;\n  padding: 12px 24px;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 500;\n  transition: all 0.2s;\n}\n\n.cancel-button:hover {\n  background: #cbd5e0;\n  color: #2d3748;\n}\n\n.error-message {\n  background: #fed7d7;\n  color: #c53030;\n  padding: 15px;\n  border-radius: 6px;\n  margin-bottom: 20px;\n  border: 1px solid #feb2b2;\n  font-size: 14px;\n}\n\n/* 响应式设计 */\n@media (max-width: 768px) {\n  .preferences-content {\n    grid-template-columns: 1fr;\n    gap: 20px;\n  }\n  \n  .form-row {\n    grid-template-columns: 1fr;\n    gap: 15px;\n  }\n  \n  .checkbox-group {\n    grid-template-columns: 1fr;\n  }\n  \n  .preference-actions {\n    flex-direction: column;\n  }\n  \n  .preference-actions button {\n    width: 100%;\n  }\n  \n  .form-actions {\n    flex-direction: column;\n  }\n  \n  .form-actions button {\n    width: 100%;\n  }\n}\n',""]);const s=i},818:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}t.default=n},825:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(n(261));class o extends a.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(e=>"string"==typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let a="";"plain"===r?a="pl":"phrase"===r?a="ph":"websearch"===r&&(a="w");const o=void 0===n?"":`(${n})`;return this.url.searchParams.append(e,`${a}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}}t.default=o},863:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(601),a=n.n(r),o=n(314),i=n.n(o)()(a());i.push([e.id,"/* 旅行记账组件样式 */\n.expense-tracker {\n  background: white;\n  border-radius: 12px;\n  padding: 25px;\n  margin-top: 20px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n}\n\n.expense-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 25px;\n  padding-bottom: 15px;\n  border-bottom: 2px solid #e2e8f0;\n}\n\n.expense-header h3 {\n  margin: 0;\n  color: #2d3748;\n  font-size: 20px;\n  font-weight: 600;\n}\n\n.expense-summary {\n  display: flex;\n  gap: 20px;\n  align-items: center;\n}\n\n.total-expense {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.total-expense .label {\n  color: #4a5568;\n  font-weight: 500;\n}\n\n.total-expense .amount {\n  color: #e53e3e;\n  font-size: 18px;\n  font-weight: 700;\n}\n\n.budget-info {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 14px;\n}\n\n.budget-info .label {\n  color: #4a5568;\n}\n\n.budget-info .amount {\n  color: #2d3748;\n  font-weight: 600;\n}\n\n.budget-info .remaining {\n  color: #38a169;\n  font-weight: 600;\n}\n\n.category-stats {\n  margin-bottom: 25px;\n  padding: 20px;\n  background: #f7fafc;\n  border-radius: 8px;\n}\n\n.category-stats h4 {\n  margin: 0 0 15px 0;\n  color: #2d3748;\n  font-size: 16px;\n  font-weight: 600;\n}\n\n.stats-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));\n  gap: 10px;\n}\n\n.stat-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 8px 12px;\n  background: white;\n  border-radius: 6px;\n  border: 1px solid #e2e8f0;\n}\n\n.stat-item .category {\n  color: #4a5568;\n  font-size: 14px;\n  font-weight: 500;\n}\n\n.stat-item .amount {\n  color: #2d3748;\n  font-size: 14px;\n  font-weight: 600;\n}\n\n.expense-actions {\n  margin-bottom: 25px;\n}\n\n.add-expense-button {\n  background: #48bb78;\n  color: white;\n  border: none;\n  padding: 12px 20px;\n  border-radius: 8px;\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.add-expense-button:hover {\n  background: #38a169;\n  transform: translateY(-1px);\n}\n\n.expense-form {\n  background: #f7fafc;\n  border: 2px solid #e2e8f0;\n  border-radius: 8px;\n  padding: 20px;\n  margin-bottom: 25px;\n}\n\n.expense-form h4 {\n  margin: 0 0 20px 0;\n  color: #2d3748;\n  font-size: 16px;\n  font-weight: 600;\n}\n\n.form-row {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 15px;\n  margin-bottom: 15px;\n}\n\n.form-group {\n  margin-bottom: 15px;\n}\n\n.form-group label {\n  display: block;\n  margin-bottom: 5px;\n  color: #2d3748;\n  font-weight: 500;\n  font-size: 14px;\n}\n\n.form-group input,\n.form-group select {\n  width: 100%;\n  padding: 10px 12px;\n  border: 1px solid #e2e8f0;\n  border-radius: 6px;\n  font-size: 14px;\n  color: #2d3748;\n  background: white;\n  transition: border-color 0.2s;\n}\n\n.form-group input:focus,\n.form-group select:focus {\n  outline: none;\n  border-color: #4299e1;\n  box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.1);\n}\n\n.form-actions {\n  display: flex;\n  gap: 10px;\n  justify-content: flex-end;\n}\n\n.save-button {\n  background: #4299e1;\n  color: white;\n  border: none;\n  padding: 10px 20px;\n  border-radius: 6px;\n  font-size: 14px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.save-button:hover {\n  background: #3182ce;\n}\n\n.cancel-button {\n  background: #e2e8f0;\n  color: #4a5568;\n  border: none;\n  padding: 10px 20px;\n  border-radius: 6px;\n  font-size: 14px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.cancel-button:hover {\n  background: #cbd5e0;\n}\n\n.expense-list h4 {\n  margin: 0 0 15px 0;\n  color: #2d3748;\n  font-size: 16px;\n  font-weight: 600;\n}\n\n.empty-state {\n  text-align: center;\n  padding: 40px 20px;\n  color: #718096;\n  font-size: 14px;\n}\n\n.expense-items {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n\n.expense-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 15px;\n  background: #f7fafc;\n  border: 1px solid #e2e8f0;\n  border-radius: 8px;\n  transition: all 0.2s;\n}\n\n.expense-item:hover {\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  transform: translateY(-1px);\n}\n\n.expense-info {\n  flex: 1;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.expense-main {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.expense-main .category {\n  color: #4299e1;\n  font-size: 14px;\n  font-weight: 600;\n}\n\n.expense-main .description {\n  color: #2d3748;\n  font-size: 14px;\n}\n\n.expense-details {\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n  gap: 4px;\n}\n\n.expense-details .amount {\n  color: #e53e3e;\n  font-size: 16px;\n  font-weight: 700;\n}\n\n.expense-details .date {\n  color: #718096;\n  font-size: 12px;\n}\n\n.expense-item .expense-actions {\n  display: flex;\n  gap: 8px;\n  margin: 0;\n}\n\n.edit-button,\n.delete-button {\n  background: none;\n  border: none;\n  padding: 6px;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 14px;\n  transition: all 0.2s;\n}\n\n.edit-button:hover {\n  background: #e6fffa;\n}\n\n.delete-button:hover {\n  background: #fed7d7;\n}\n\n/* 响应式设计 */\n@media (max-width: 768px) {\n  .expense-header {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 15px;\n  }\n  \n  .expense-summary {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 10px;\n  }\n  \n  .form-row {\n    grid-template-columns: 1fr;\n  }\n  \n  .expense-info {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 10px;\n  }\n  \n  .expense-details {\n    align-items: flex-start;\n  }\n  \n  .stats-grid {\n    grid-template-columns: 1fr;\n  }\n}\n",""]);const s=i},907:(e,t,n)=>{n.r(t),n.d(t,{Headers:()=>i,Request:()=>s,Response:()=>l,default:()=>o,fetch:()=>a});var r=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("unable to locate global object")}();const a=r.fetch,o=r.fetch.bind(r),i=r.Headers,s=r.Request,l=r.Response},961:(e,t,n)=>{!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(551)},982:(e,t,n)=>{e.exports=n(463)}},r={};function a(e){var t=r[e];if(void 0!==t)return t.exports;var o=r[e]={id:e,exports:{}};return n[e].call(o.exports,o,o.exports,a),o.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var o=Object.create(null);a.r(o);var i={};e=e||[null,t({}),t([]),t(t)];for(var s=2&r&&n;("object"==typeof s||"function"==typeof s)&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach(e=>i[e]=()=>n[e]);return i.default=()=>n,a.d(o,i),o},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nc=void 0;var o,i=a(540),s=a.t(i,2),l=a(338),c=a(961),u=a.t(c,2);function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(o||(o={}));const f="popstate";function h(e,t){if(!1===e||null==e)throw new Error(t)}function p(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(e){}}}function m(e,t){return{usr:e.state,key:e.key,idx:t}}function g(e,t,n,r){return void 0===n&&(n=null),d({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof t?y(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function v(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function y(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var b;function w(e,t,n){return void 0===n&&(n="/"),function(e,t,n,r){let a=I(("string"==typeof t?y(t):t).pathname||"/",n);if(null==a)return null;let o=_(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){return e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n])?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(o);let i=null;for(let e=0;null==i&&e<o.length;++e){let t=R(a);i=j(o[e],t,r)}return i}(e,t,n,!1)}function _(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let a=(e,a,o)=>{let i={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};i.relativePath.startsWith("/")&&(h(i.relativePath.startsWith(r),'Absolute route path "'+i.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(r.length));let s=z([r,i.relativePath]),l=n.concat(i);e.children&&e.children.length>0&&(h(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),_(e.children,t,l,s)),(null!=e.path||e.index)&&t.push({path:s,score:N(s,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let n of x(e.path))a(e,t,n);else a(e,t)}),t}function x(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,a=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return a?[o,""]:[o];let i=x(r.join("/")),s=[];return s.push(...i.map(e=>""===e?o:[o,e].join("/"))),a&&s.push(...i),s.map(t=>e.startsWith("/")&&""===t?"/":t)}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(b||(b={})),new Set(["lazy","caseSensitive","path","id","index","children"]);const E=/^:[\w-]+$/,k=3,S=2,O=1,P=10,T=-2,C=e=>"*"===e;function N(e,t){let n=e.split("/"),r=n.length;return n.some(C)&&(r+=T),t&&(r+=S),n.filter(e=>!C(e)).reduce((e,t)=>e+(E.test(t)?k:""===t?O:P),r)}function j(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,a={},o="/",i=[];for(let e=0;e<r.length;++e){let s=r[e],l=e===r.length-1,c="/"===o?t:t.slice(o.length)||"/",u=A({path:s.relativePath,caseSensitive:s.caseSensitive,end:l},c),d=s.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=A({path:s.relativePath,caseSensitive:s.caseSensitive,end:!1},c)),!u)return null;Object.assign(a,u.params),i.push({params:a,pathname:z([o,u.pathname]),pathnameBase:U(z([o,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(o=z([o,u.pathnameBase]))}return i}function A(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!0),p("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let o=a[0],i=o.replace(/(.)\/+$/,"$1"),s=a.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:a}=t;if("*"===r){let e=s[n]||"";i=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const l=s[n];return e[r]=a&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:o,pathnameBase:i,pattern:e}}function R(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return p(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function I(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function $(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function D(e,t){let n=function(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function L(e,t,n,r){let a;void 0===r&&(r=!1),"string"==typeof e?a=y(e):(a=d({},e),h(!a.pathname||!a.pathname.includes("?"),$("?","pathname","search",a)),h(!a.pathname||!a.pathname.includes("#"),$("#","pathname","hash",a)),h(!a.search||!a.search.includes("#"),$("#","search","hash",a)));let o,i=""===e||""===a.pathname,s=i?"/":a.pathname;if(null==s)o=n;else{let e=t.length-1;if(!r&&s.startsWith("..")){let t=s.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}o=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:a=""}="string"==typeof e?y(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:M(r),hash:F(a)}}(a,o),c=s&&"/"!==s&&s.endsWith("/"),u=(i||"."===s)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}const z=e=>e.join("/").replace(/\/\/+/g,"/"),U=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),M=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",F=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;const B=["post","put","patch","delete"],q=(new Set(B),["get",...B]);function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W.apply(this,arguments)}new Set(q),new Set([301,302,303,307,308]),new Set([307,308]),Symbol("deferred");const H=i.createContext(null),V=i.createContext(null),G=i.createContext(null),K=i.createContext(null),J=i.createContext({outlet:null,matches:[],isDataRoute:!1}),Q=i.createContext(null);function Y(){return null!=i.useContext(K)}function X(){return Y()||h(!1),i.useContext(K).location}function Z(e){i.useContext(G).static||i.useLayoutEffect(e)}function ee(){let{isDataRoute:e}=i.useContext(J);return e?function(){let{router:e}=function(){let e=i.useContext(H);return e||h(!1),e}(se.UseNavigateStable),t=ce(le.UseNavigateStable),n=i.useRef(!1);Z(()=>{n.current=!0});let r=i.useCallback(function(r,a){void 0===a&&(a={}),n.current&&("number"==typeof r?e.navigate(r):e.navigate(r,W({fromRouteId:t},a)))},[e,t]);return r}():function(){Y()||h(!1);let e=i.useContext(H),{basename:t,future:n,navigator:r}=i.useContext(G),{matches:a}=i.useContext(J),{pathname:o}=X(),s=JSON.stringify(D(a,n.v7_relativeSplatPath)),l=i.useRef(!1);Z(()=>{l.current=!0});let c=i.useCallback(function(n,a){if(void 0===a&&(a={}),!l.current)return;if("number"==typeof n)return void r.go(n);let i=L(n,JSON.parse(s),o,"path"===a.relative);null==e&&"/"!==t&&(i.pathname="/"===i.pathname?t:z([t,i.pathname])),(a.replace?r.replace:r.push)(i,a.state,a)},[t,r,s,o,e]);return c}()}function te(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=i.useContext(G),{matches:a}=i.useContext(J),{pathname:o}=X(),s=JSON.stringify(D(a,r.v7_relativeSplatPath));return i.useMemo(()=>L(e,JSON.parse(s),o,"path"===n),[e,s,o,n])}function ne(e,t,n,r){Y()||h(!1);let{navigator:a}=i.useContext(G),{matches:s}=i.useContext(J),l=s[s.length-1],c=l?l.params:{},u=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let d,f=X();if(t){var p;let e="string"==typeof t?y(t):t;"/"===u||(null==(p=e.pathname)?void 0:p.startsWith(u))||h(!1),d=e}else d=f;let m=d.pathname||"/",g=m;if("/"!==u){let e=u.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let v=w(e,{pathname:g}),b=function(e,t,n,r){var a;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var o;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(o=r)&&o.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let s=e,l=null==(a=n)?void 0:a.errors;if(null!=l){let e=s.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||h(!1),s=s.slice(0,Math.min(s.length,e+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let e=0;e<s.length;e++){let t=s[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(u=e),t.route.id){let{loaderData:e,errors:r}=n,a=t.route.loader&&void 0===e[t.route.id]&&(!r||void 0===r[t.route.id]);if(t.route.lazy||a){c=!0,s=u>=0?s.slice(0,u+1):[s[0]];break}}}return s.reduceRight((e,r,a)=>{let o,d=!1,f=null,h=null;var p;n&&(o=l&&r.route.id?l[r.route.id]:void 0,f=r.route.errorElement||ae,c&&(u<0&&0===a?(ue[p="route-fallback"]||(ue[p]=!0),d=!0,h=null):u===a&&(d=!0,h=r.route.hydrateFallbackElement||null)));let m=t.concat(s.slice(0,a+1)),g=()=>{let t;return t=o?f:d?h:r.route.Component?i.createElement(r.route.Component,null):r.route.element?r.route.element:e,i.createElement(ie,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===a)?i.createElement(oe,{location:n.location,revalidation:n.revalidation,component:f,error:o,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}(v&&v.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:z([u,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:z([u,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),s,n,r);return t&&b?i.createElement(K.Provider,{value:{location:W({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:o.Pop}},b):b}function re(){let e=function(){var e;let t=i.useContext(Q),n=function(){let e=i.useContext(V);return e||h(!1),e}(le.UseRouteError),r=ce(le.UseRouteError);return void 0!==t?t:null==(e=n.errors)?void 0:e[r]}(),t=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:r},n):null,null)}const ae=i.createElement(re,null);class oe extends i.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?i.createElement(J.Provider,{value:this.props.routeContext},i.createElement(Q.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ie(e){let{routeContext:t,match:n,children:r}=e,a=i.useContext(H);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(J.Provider,{value:t},r)}var se=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(se||{}),le=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(le||{});function ce(e){let t=function(){let e=i.useContext(J);return e||h(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||h(!1),n.route.id}const ue={};function de(e){let{to:t,replace:n,state:r,relative:a}=e;Y()||h(!1);let{future:o,static:s}=i.useContext(G),{matches:l}=i.useContext(J),{pathname:c}=X(),u=ee(),d=L(t,D(l,o.v7_relativeSplatPath),c,"path"===a),f=JSON.stringify(d);return i.useEffect(()=>u(JSON.parse(f),{replace:n,state:r,relative:a}),[u,f,a,n,r]),null}function fe(e){h(!1)}function he(e){let{basename:t="/",children:n=null,location:r,navigationType:a=o.Pop,navigator:s,static:l=!1,future:c}=e;Y()&&h(!1);let u=t.replace(/^\/*/,"/"),d=i.useMemo(()=>({basename:u,navigator:s,static:l,future:W({v7_relativeSplatPath:!1},c)}),[u,c,s,l]);"string"==typeof r&&(r=y(r));let{pathname:f="/",search:p="",hash:m="",state:g=null,key:v="default"}=r,b=i.useMemo(()=>{let e=I(f,u);return null==e?null:{location:{pathname:e,search:p,hash:m,state:g,key:v},navigationType:a}},[u,f,p,m,g,v,a]);return null==b?null:i.createElement(G.Provider,{value:d},i.createElement(K.Provider,{children:n,value:b}))}function pe(e){let{children:t,location:n}=e;return ne(me(t),n)}function me(e,t){void 0===t&&(t=[]);let n=[];return i.Children.forEach(e,(e,r)=>{if(!i.isValidElement(e))return;let a=[...t,r];if(e.type===i.Fragment)return void n.push.apply(n,me(e.props.children,a));e.type!==fe&&h(!1),e.props.index&&e.props.children&&h(!1);let o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=me(e.props.children,a)),n.push(o)}),n}function ge(){return ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ge.apply(this,arguments)}s.startTransition,new Promise(()=>{}),i.Component,new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const ve=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(e){}new Map;const ye=s.startTransition;function be(e){let{basename:t,children:n,future:r,window:a}=e,s=i.useRef();null==s.current&&(s.current=function(e){return void 0===e&&(e={}),function(e,t,n,r){void 0===r&&(r={});let{window:a=document.defaultView,v5Compat:i=!1}=r,s=a.history,l=o.Pop,c=null,u=p();function p(){return(s.state||{idx:null}).idx}function y(){l=o.Pop;let e=p(),t=null==e?null:e-u;u=e,c&&c({action:l,location:w.location,delta:t})}function b(e){let t="null"!==a.location.origin?a.location.origin:a.location.href,n="string"==typeof e?e:v(e);return n=n.replace(/ $/,"%20"),h(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==u&&(u=0,s.replaceState(d({},s.state,{idx:u}),""));let w={get action(){return l},get location(){return e(a,s)},listen(e){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(f,y),c=e,()=>{a.removeEventListener(f,y),c=null}},createHref:e=>t(a,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=o.Push;let r=g(w.location,e,t);n&&n(r,e),u=p()+1;let d=m(r,u),f=w.createHref(r);try{s.pushState(d,"",f)}catch(e){if(e instanceof DOMException&&"DataCloneError"===e.name)throw e;a.location.assign(f)}i&&c&&c({action:l,location:w.location,delta:1})},replace:function(e,t){l=o.Replace;let r=g(w.location,e,t);n&&n(r,e),u=p();let a=m(r,u),d=w.createHref(r);s.replaceState(a,"",d),i&&c&&c({action:l,location:w.location,delta:0})},go:e=>s.go(e)};return w}(function(e,t){let{pathname:n,search:r,hash:a}=e.location;return g("",{pathname:n,search:r,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"==typeof t?t:v(t)},null,e)}({window:a,v5Compat:!0}));let l=s.current,[c,u]=i.useState({action:l.action,location:l.location}),{v7_startTransition:p}=r||{},y=i.useCallback(e=>{p&&ye?ye(()=>u(e)):u(e)},[u,p]);return i.useLayoutEffect(()=>l.listen(y),[l,y]),i.useEffect(()=>{return null==(e=r)||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),void(t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation));var e,t},[r]),i.createElement(he,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:r})}u.flushSync,s.useId;const we="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,_e=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xe=i.forwardRef(function(e,t){let n,{onClick:r,relative:a,reloadDocument:o,replace:s,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f}=e,p=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,ve),{basename:m}=i.useContext(G),g=!1;if("string"==typeof u&&_e.test(u)&&(n=u,we))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=I(t.pathname,m);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:g=!0}catch(e){}let y=function(e,t){let{relative:n}=void 0===t?{}:t;Y()||h(!1);let{basename:r,navigator:a}=i.useContext(G),{hash:o,pathname:s,search:l}=te(e,{relative:n}),c=s;return"/"!==r&&(c="/"===s?r:z([r,s])),a.createHref({pathname:c,search:l,hash:o})}(u,{relative:a}),b=function(e,t){let{target:n,replace:r,state:a,preventScrollReset:o,relative:s,viewTransition:l}=void 0===t?{}:t,c=ee(),u=X(),d=te(e,{relative:s});return i.useCallback(t=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(t,n)){t.preventDefault();let n=void 0!==r?r:v(u)===v(d);c(e,{replace:n,state:a,preventScrollReset:o,relative:s,viewTransition:l})}},[u,c,d,r,a,n,e,o,s,l])}(u,{replace:s,state:l,target:c,preventScrollReset:d,relative:a,viewTransition:f});return i.createElement("a",ge({},p,{href:n||y,onClick:g||o?r:function(e){r&&r(e),e.defaultPrevented||b(e)},ref:t,target:c}))});var Ee,ke,Se;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ee||(Ee={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(ke||(ke={}));class Oe extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class Pe extends Oe{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Te extends Oe{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Ce extends Oe{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(Se||(Se={}));class Ne{constructor(e,{headers:t={},customFetch:n,region:r=Se.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=(e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(a.bind(a,907)).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)})(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return t=this,n=arguments,a=function*(e,t={}){var n;try{const{headers:r,method:a,body:o,signal:i}=t;let s={},{region:l}=t;l||(l=this.region);const c=new URL(`${this.url}/${e}`);let u;l&&"any"!==l&&(s["x-region"]=l,c.searchParams.set("forceFunctionRegion",l)),o&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&("undefined"!=typeof Blob&&o instanceof Blob||o instanceof ArrayBuffer?(s["Content-Type"]="application/octet-stream",u=o):"string"==typeof o?(s["Content-Type"]="text/plain",u=o):"undefined"!=typeof FormData&&o instanceof FormData?u=o:(s["Content-Type"]="application/json",u=JSON.stringify(o)));const d=yield this.fetch(c.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},s),this.headers),r),body:u,signal:i}).catch(e=>{if("AbortError"===e.name)throw e;throw new Pe(e)}),f=d.headers.get("x-relay-error");if(f&&"true"===f)throw new Te(d);if(!d.ok)throw new Ce(d);let h,p=(null!==(n=d.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return h="application/json"===p?yield d.json():"application/octet-stream"===p?yield d.blob():"text/event-stream"===p?d:"multipart/form-data"===p?yield d.formData():yield d.text(),{data:h,error:null,response:d}}catch(e){return e instanceof Error&&"AbortError"===e.name?{data:null,error:new Pe(e)}:{data:null,error:e,response:e instanceof Ce||e instanceof Te?e.context:void 0}}},new((r=void 0)||(r=Promise))(function(e,o){function i(e){try{l(a.next(e))}catch(e){o(e)}}function s(e){try{l(a.throw(e))}catch(e){o(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(e){e(n)})).then(i,s)}l((a=a.apply(t,n||[])).next())});var t,n,r,a}}var je=a(279);const{PostgrestClient:Ae,PostgrestQueryBuilder:Re,PostgrestFilterBuilder:Ie,PostgrestTransformBuilder:$e,PostgrestBuilder:De,PostgrestError:Le}=je,ze=class{static detectEnvironment(){var e;if("undefined"!=typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if(void 0!==a.g&&void 0!==a.g.WebSocket)return{type:"native",constructor:a.g.WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!=typeof globalThis&&globalThis.EdgeRuntime||"undefined"!=typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!=typeof process){const e=process.versions;if(e&&e.node){const t=e.node,n=parseInt(t.replace(/^v/,"").split(".")[0]);return n>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`\n\nSuggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}};var Ue,Me,Fe,Be,qe,We,He;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(Ue||(Ue={})),(He=Me||(Me={})).closed="closed",He.errored="errored",He.joined="joined",He.joining="joining",He.leaving="leaving",function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(Fe||(Fe={})),function(e){e.websocket="websocket"}(Be||(Be={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(qe||(qe={}));class Ve{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const r=t.getUint8(1),a=t.getUint8(2);let o=this.HEADER_LENGTH+2;const i=n.decode(e.slice(o,o+r));o+=r;const s=n.decode(e.slice(o,o+a));return o+=a,{ref:null,topic:i,event:s,payload:JSON.parse(n.decode(e.slice(o,e.byteLength)))}}}class Ge{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(We||(We={}));const Ke=(e,t,n={})=>{var r;const a=null!==(r=n.skipTypes)&&void 0!==r?r:[];return t?Object.keys(t).reduce((n,r)=>(n[r]=Je(r,e,t,a),n),{}):{}},Je=(e,t,n,r)=>{const a=t.find(t=>t.name===e),o=null==a?void 0:a.type,i=n[e];return o&&!r.includes(o)?Qe(o,i):Ye(i)},Qe=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return tt(t,n)}switch(e){case We.bool:return Xe(t);case We.float4:case We.float8:case We.int2:case We.int4:case We.int8:case We.numeric:case We.oid:return Ze(t);case We.json:case We.jsonb:return et(t);case We.timestamp:return nt(t);case We.abstime:case We.date:case We.daterange:case We.int4range:case We.int8range:case We.money:case We.reltime:case We.text:case We.time:case We.timestamptz:case We.timetz:case We.tsrange:case We.tstzrange:default:return Ye(t)}},Ye=e=>e,Xe=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Ze=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},et=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},tt=(e,t)=>{if("string"!=typeof e)return e;const n=e.length-1,r=e[n];if("{"===e[0]&&"}"===r){let r;const a=e.slice(1,n);try{r=JSON.parse("["+a+"]")}catch(e){r=a?a.split(","):[]}return r.map(e=>Qe(t,e))}return e},nt=e=>"string"==typeof e?e.replace(" ","T"):e,rt=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class at{constructor(e,t,n={},r=1e4){this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){this.timeoutTimer||(this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref),this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout))}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ot,it,st,lt;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(ot||(ot={}));class ct{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ct.syncState(this.state,e,t,n),this.pendingDiffs.forEach(e=>{this.state=ct.syncDiff(this.state,e,t,n)}),this.pendingDiffs=[],r()}),this.channel._on(n.diff,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=ct.syncDiff(this.state,e,t,n),r())}),this.onJoin((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})}),this.onLeave((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,r){const a=this.cloneDeep(e),o=this.transformState(t),i={},s={};return this.map(a,(e,t)=>{o[e]||(s[e]=t)}),this.map(o,(e,t)=>{const n=a[e];if(n){const r=t.map(e=>e.presence_ref),a=n.map(e=>e.presence_ref),o=t.filter(e=>a.indexOf(e.presence_ref)<0),l=n.filter(e=>r.indexOf(e.presence_ref)<0);o.length>0&&(i[e]=o),l.length>0&&(s[e]=l)}else i[e]=t}),this.syncDiff(a,{joins:i,leaves:s},n,r)}static syncDiff(e,t,n,r){const{joins:a,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(a,(t,r)=>{var a;const o=null!==(a=e[t])&&void 0!==a?a:[];if(e[t]=this.cloneDeep(r),o.length>0){const n=e[t].map(e=>e.presence_ref),r=o.filter(e=>n.indexOf(e.presence_ref)<0);e[t].unshift(...r)}n(t,o,r)}),this.map(o,(t,n)=>{let a=e[t];if(!a)return;const o=n.map(e=>e.presence_ref);a=a.filter(e=>o.indexOf(e.presence_ref)<0),e[t]=a,r(t,a,n),0===a.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const r=e[n];return t[n]="metas"in r?r.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(it||(it={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(st||(st={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(lt||(lt={}));class ut{constructor(e,t={config:{}},n){var r,a;if(this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=Me.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new at(this,Fe.join,this.params,this.timeout),this.rejoinTimer=new Ge(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Me.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Me.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=Me.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Me.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=Me.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Fe.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new ct(this),this.broadcastEndpointURL=rt(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(null===(a=null===(r=this.params.config)||void 0===r?void 0:r.broadcast)||void 0===a?void 0:a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var n,r,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Me.closed){const{config:{broadcast:o,presence:i,private:s}}=this.params,l=null!==(r=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map(e=>e.filter))&&void 0!==r?r:[],c=!!this.bindings[st.PRESENCE]&&this.bindings[st.PRESENCE].length>0||!0===(null===(a=this.params.config.presence)||void 0===a?void 0:a.enabled),u={},d={broadcast:o,presence:Object.assign(Object.assign({},i),{enabled:c}),postgres_changes:l,private:s};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(t=>null==e?void 0:e(lt.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e(lt.CLOSED)),this.updateJoinPayload(Object.assign({config:d},u)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:t})=>{var n;if(this.socket.setAuth(),void 0!==t){const r=this.bindings.postgres_changes,a=null!==(n=null==r?void 0:r.length)&&void 0!==n?n:0,o=[];for(let n=0;n<a;n++){const a=r[n],{filter:{event:i,schema:s,table:l,filter:c}}=a,u=t&&t[n];if(!u||u.event!==i||u.schema!==s||u.table!==l||u.filter!==c)return this.unsubscribe(),this.state=Me.errored,void(null==e||e(lt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));o.push(Object.assign(Object.assign({},a),{id:u.id}))}return this.bindings.postgres_changes=o,void(e&&e(lt.SUBSCRIBED))}null==e||e(lt.SUBSCRIBED)}).receive("error",t=>{this.state=Me.errored,null==e||e(lt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(lt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this.state===Me.joined&&e===st.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,n)}async send(e,t={}){var n,r;if(this._canPush()||"broadcast"!==e.type)return new Promise(n=>{var r,a,o;const i=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(o=null===(a=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===a?void 0:a.broadcast)||void 0===o?void 0:o.ack)||n("ok"),i.receive("ok",()=>n("ok")),i.receive("error",()=>n("error")),i.receive("timeout",()=>n("timed out"))});{const{event:a,payload:o}=e,i={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,i,null!==(n=t.timeout)&&void 0!==n?n:this.timeout);return await(null===(r=e.body)||void 0===r?void 0:r.cancel()),e.ok?"ok":"error"}catch(e){return"AbortError"===e.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Me.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Fe.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(r=>{n=new at(this,Fe.leave,{},e),n.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{null==n||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Me.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){const r=new AbortController,a=setTimeout(()=>r.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(a),o}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new at(this,e,t,n);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,a;const o=e.toLocaleLowerCase(),{close:i,error:s,leave:l,join:c}=Fe;if(n&&[i,s,l,c].indexOf(o)>=0&&n!==this._joinRef())return;let u=this._onMessage(o,t,n);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter(e=>{var t,n,r;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(r=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===r?void 0:r.toLocaleLowerCase())===o}).map(e=>e.callback(u,n)):null===(a=this.bindings[o])||void 0===a||a.filter(e=>{var n,r,a,i,s,l;if(["broadcast","presence","postgres_changes"].includes(o)){if("id"in e){const o=e.id,i=null===(n=e.filter)||void 0===n?void 0:n.event;return o&&(null===(r=t.ids)||void 0===r?void 0:r.includes(o))&&("*"===i||(null==i?void 0:i.toLocaleLowerCase())===(null===(a=t.data)||void 0===a?void 0:a.type.toLocaleLowerCase()))}{const n=null===(s=null===(i=null==e?void 0:e.filter)||void 0===i?void 0:i.event)||void 0===s?void 0:s.toLocaleLowerCase();return"*"===n||n===(null===(l=null==t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===o}).map(e=>{if("object"==typeof u&&"ids"in u){const e=u.data,{schema:t,table:n,commit_timestamp:r,type:a,errors:o}=e,i={schema:t,table:n,commit_timestamp:r,eventType:a,new:{},old:{},errors:o};u=Object.assign(Object.assign({},i),this._getPayloadRecords(e))}e.callback(u,n)})}_isClosed(){return this.state===Me.closed}_isJoined(){return this.state===Me.joined}_isJoining(){return this.state===Me.joining}_isLeaving(){return this.state===Me.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const r=e.toLocaleLowerCase(),a={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(a):this.bindings[r]=[a],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===n&&ut.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Fe.close,{},e)}_onError(e){this._on(Fe.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Me.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=Ke(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=Ke(e.columns,e.old_record)),t}}const dt=()=>{},ft=[1e3,2e3,5e3,1e4];class ht{constructor(e,t){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=1e4,this.transport=null,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=dt,this.ref=0,this.reconnectTimer=null,this.logger=dt,this.conn=null,this.sendBuffer=[],this.serializer=new Ve,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(a.bind(a,907)).then(({default:t})=>t(...e)).catch(e=>{throw new Error(`Failed to load @supabase/node-fetch: ${e.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):fetch),(...e)=>t(...e)},!(null===(n=null==t?void 0:t.params)||void 0===n?void 0:n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${Be.websocket}`,this.httpEndpoint=rt(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=ze.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error(`${t}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`);throw new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Ue.connecting:return qe.Connecting;case Ue.open:return qe.Open;case Ue.closing:return qe.Closing;default:return qe.Closed}}isConnected(){return this.connectionState()===qe.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e,t={config:{}}){const n=`realtime:${e}`,r=this.getChannels().find(e=>e.topic===n);if(r)return r;{const n=new ut(`realtime:${e}`,t,this);return this.channels.push(n),n}}push(e){const{topic:t,event:n,payload:r,ref:a}=e,o=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${n} (${a})`,r),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(e){this.log("error","error in heartbeat callback",e)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},100)}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(e){this.log("error","error in heartbeat callback",e)}this._setAuthSafely("heartbeat")}else try{this.heartbeatCallback("disconnected")}catch(e){this.log("error","error in heartbeat callback",e)}}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(e){this.log("error","error in heartbeat callback",e)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:n,payload:r,ref:a}=e,o=a?`(${a})`:"",i=r.status||"";this.log("receive",`${i} ${t} ${n} ${o}`.trim(),r),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(n,r,a)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Fe.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?";return`${e}${n}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e,t=!1){this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;t=e||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(e=>{const n={access_token:t,version:"realtime-js/2.75.1"};t&&e.updateJoinPayload(n),e.joinedOnce&&e._isJoined()&&e._push(Fe.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(t){this.log("error",`error in ${e} callback`,t)}})}catch(t){this.log("error",`error triggering ${e} callbacks`,t)}}_setupReconnectionTimer(){this.reconnectTimer=new Ge(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},10)},this.reconnectAfterMs)}_initializeOptions(e){var t,n,r,a,o,i,s,l,c;if(this.transport=null!==(t=null==e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(n=null==e?void 0:e.timeout)&&void 0!==n?n:1e4,this.heartbeatIntervalMs=null!==(r=null==e?void 0:e.heartbeatIntervalMs)&&void 0!==r?r:25e3,this.worker=null!==(a=null==e?void 0:e.worker)&&void 0!==a&&a,this.accessToken=null!==(o=null==e?void 0:e.accessToken)&&void 0!==o?o:null,this.heartbeatCallback=null!==(i=null==e?void 0:e.heartbeatCallback)&&void 0!==i?i:dt,(null==e?void 0:e.params)&&(this.params=e.params),(null==e?void 0:e.logger)&&(this.logger=e.logger),((null==e?void 0:e.logLevel)||(null==e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(s=null==e?void 0:e.reconnectAfterMs)&&void 0!==s?s:e=>ft[e-1]||1e4,this.encode=null!==(l=null==e?void 0:e.encode)&&void 0!==l?l:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(c=null==e?void 0:e.decode)&&void 0!==c?c:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null==e?void 0:e.workerUrl}}}class pt extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function mt(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class gt extends pt{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class vt extends pt{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const yt=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(a.bind(a,907)).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},bt=e=>{if(Array.isArray(e))return e.map(e=>bt(e));if("function"==typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([e,n])=>{const r=e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[r]=bt(n)}),t};var wt=function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,s)}l((r=r.apply(e,t||[])).next())})};const _t=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),xt=(e,t,n)=>wt(void 0,void 0,void 0,function*(){const r=yield(o=void 0,i=void 0,s=void 0,l=function*(){return"undefined"==typeof Response?(yield Promise.resolve().then(a.bind(a,907))).Response:Response},new(s||(s=Promise))(function(e,t){function n(e){try{a(l.next(e))}catch(e){t(e)}}function r(e){try{a(l.throw(e))}catch(e){t(e)}}function a(t){var a;t.done?e(t.value):(a=t.value,a instanceof s?a:new s(function(e){e(a)})).then(n,r)}a((l=l.apply(o,i||[])).next())}));var o,i,s,l;e instanceof r&&!(null==n?void 0:n.noResolveJson)?e.json().then(n=>{const r=e.status||500,a=(null==n?void 0:n.statusCode)||r+"";t(new gt(_t(n),r,a))}).catch(e=>{t(new vt(_t(e),e))}):t(new vt(_t(e),e))});function Et(e,t,n,r,a,o){return wt(this,void 0,void 0,function*(){return new Promise((i,s)=>{e(n,((e,t,n,r)=>{const a={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"!==e&&r?((e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)})(r)?(a.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),a.body=JSON.stringify(r)):a.body=r,(null==t?void 0:t.duplex)&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),n)):a})(t,r,a,o)).then(e=>{if(!e.ok)throw e;return(null==r?void 0:r.noResolveJson)?e:e.json()}).then(e=>i(e)).catch(e=>xt(e,s,r))})})}function kt(e,t,n,r){return wt(this,void 0,void 0,function*(){return Et(e,"GET",t,n,r)})}function St(e,t,n,r,a){return wt(this,void 0,void 0,function*(){return Et(e,"POST",t,r,a,n)})}function Ot(e,t,n,r,a){return wt(this,void 0,void 0,function*(){return Et(e,"PUT",t,r,a,n)})}function Pt(e,t,n,r,a){return wt(this,void 0,void 0,function*(){return Et(e,"DELETE",t,r,a,n)})}class Tt{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return e=this,t=void 0,r=function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(mt(e))return{data:null,error:e};throw e}},new((n=void 0)||(n=Promise))(function(a,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,s)}l((r=r.apply(e,t||[])).next())});var e,t,n,r}}var Ct;Ct=Symbol.toStringTag;const Nt=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[Ct]="BlobDownloadBuilder",this.promise=null}asStream(){return new Tt(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return e=this,t=void 0,r=function*(){try{const e=yield this.downloadFn();return{data:yield e.blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(mt(e))return{data:null,error:e};throw e}},new((n=void 0)||(n=Promise))(function(a,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,s)}l((r=r.apply(e,t||[])).next())});var e,t,n,r}};var jt=function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,s)}l((r=r.apply(e,t||[])).next())})};const At={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Rt={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class It{constructor(e,t={},n,r){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=yt(r)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,n,r){return jt(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},Rt),r);let i=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(o.upsert)});const s=o.metadata;"undefined"!=typeof Blob&&n instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),s&&a.append("metadata",this.encodeMetadata(s)),a.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(a=n,a.append("cacheControl",o.cacheControl),s&&a.append("metadata",this.encodeMetadata(s))):(a=n,i["cache-control"]=`max-age=${o.cacheControl}`,i["content-type"]=o.contentType,s&&(i["x-metadata"]=this.toBase64(this.encodeMetadata(s)))),(null==r?void 0:r.headers)&&(i=Object.assign(Object.assign({},i),r.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),u=yield("PUT"==e?Ot:St)(this.fetch,`${this.url}/object/${c}`,a,Object.assign({headers:i},(null==o?void 0:o.duplex)?{duplex:o.duplex}:{}));return{data:{path:l,id:u.Id,fullPath:u.Key},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(mt(e))return{data:null,error:e};throw e}})}upload(e,t,n){return jt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,r){return jt(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),o=this._getFinalPath(a),i=new URL(this.url+`/object/upload/sign/${o}`);i.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:Rt.upsert},r),o=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});return"undefined"!=typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,o["cache-control"]=`max-age=${t.cacheControl}`,o["content-type"]=t.contentType),{data:{path:a,fullPath:(yield Ot(this.fetch,i.toString(),e,{headers:o})).Key},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(mt(e))return{data:null,error:e};throw e}})}createSignedUploadUrl(e,t){return jt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(r["x-upsert"]="true");const a=yield St(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),o=new URL(this.url+a.url),i=o.searchParams.get("token");if(!i)throw new pt("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:i},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(mt(e))return{data:null,error:e};throw e}})}update(e,t,n){return jt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return jt(this,void 0,void 0,function*(){try{return{data:yield St(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==n?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(mt(e))return{data:null,error:e};throw e}})}copy(e,t,n){return jt(this,void 0,void 0,function*(){try{return{data:{path:(yield St(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==n?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(mt(e))return{data:null,error:e};throw e}})}createSignedUrl(e,t,n){return jt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),a=yield St(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},(null==n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const o=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(mt(e))return{data:null,error:e};throw e}})}createSignedUrls(e,t,n){return jt(this,void 0,void 0,function*(){try{const r=yield St(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),a=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return{data:r.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${a}`):null})),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(mt(e))return{data:null,error:e};throw e}})}download(e,t){const n=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",r=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),a=r?`?${r}`:"",o=this._getFinalPath(e);return new Nt(()=>kt(this.fetch,`${this.url}/${n}/${o}${a}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}info(e){return jt(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield kt(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:bt(e),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(mt(e))return{data:null,error:e};throw e}})}exists(e){return jt(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,n){return wt(this,void 0,void 0,function*(){return Et(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),undefined)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(mt(e)&&e instanceof vt){const t=e.originalError;if([400,404].includes(null==t?void 0:t.status))return{data:!1,error:e}}throw e}})}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],a=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==a&&r.push(a);const o=void 0!==(null==t?void 0:t.transform)?"render/image":"object",i=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==i&&r.push(i);let s=r.join("&");return""!==s&&(s=`?${s}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${s}`)}}}remove(e){return jt(this,void 0,void 0,function*(){try{return{data:yield Pt(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(mt(e))return{data:null,error:e};throw e}})}list(e,t,n){return jt(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},At),t),{prefix:e||""});return{data:yield St(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(mt(e))return{data:null,error:e};throw e}})}listV2(e,t){return jt(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield St(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},t),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(mt(e))return{data:null,error:e};throw e}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const $t={"X-Client-Info":"storage-js/2.75.1"};var Dt=function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,s)}l((r=r.apply(e,t||[])).next())})};class Lt{constructor(e,t={},n,r){this.shouldThrowOnError=!1;const a=new URL(e);(null==r?void 0:r.useNewHostname)&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},$t),t),this.fetch=yt(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Dt(this,void 0,void 0,function*(){try{return{data:yield kt(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(mt(e))return{data:null,error:e};throw e}})}getBucket(e){return Dt(this,void 0,void 0,function*(){try{return{data:yield kt(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(mt(e))return{data:null,error:e};throw e}})}createBucket(e){return Dt(this,arguments,void 0,function*(e,t={public:!1}){try{return{data:yield St(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(mt(e))return{data:null,error:e};throw e}})}updateBucket(e,t){return Dt(this,void 0,void 0,function*(){try{return{data:yield Ot(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(mt(e))return{data:null,error:e};throw e}})}emptyBucket(e){return Dt(this,void 0,void 0,function*(){try{return{data:yield St(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(mt(e))return{data:null,error:e};throw e}})}deleteBucket(e){return Dt(this,void 0,void 0,function*(){try{return{data:yield Pt(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(mt(e))return{data:null,error:e};throw e}})}}class zt extends Lt{constructor(e,t={},n,r){super(e,t,n,r)}from(e){return new It(this.url,this.headers,e,this.fetch)}}let Ut="";Ut="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const Mt={headers:{"X-Client-Info":`supabase-js-${Ut}/2.75.1`}},Ft={schema:"public"},Bt={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},qt={};var Wt=a(907);const Ht=e=>{let t;return t=e||("undefined"==typeof fetch?Wt.default:fetch),(...e)=>t(...e)},Vt=(e,t,n)=>{const r=Ht(n),a="undefined"==typeof Headers?Wt.Headers:Headers;return(n,o)=>{return i=void 0,s=void 0,c=function*(){var i;const s=null!==(i=yield t())&&void 0!==i?i:e;let l=new a(null==o?void 0:o.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${s}`),r(n,Object.assign(Object.assign({},o),{headers:l}))},new((l=void 0)||(l=Promise))(function(e,t){function n(e){try{a(c.next(e))}catch(e){t(e)}}function r(e){try{a(c.throw(e))}catch(e){t(e)}}function a(t){var a;t.done?e(t.value):(a=t.value,a instanceof l?a:new l(function(e){e(a)})).then(n,r)}a((c=c.apply(i,s||[])).next())});var i,s,l,c}};const Gt="2.75.1",Kt=3e4,Jt={"X-Client-Info":`gotrue-js/${Gt}`},Qt="X-Supabase-Api-Version",Yt=Date.parse("2024-01-01T00:00:00.0Z"),Xt="2024-01-01",Zt=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class en extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function tn(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class nn extends en{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}class rn extends en{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class an extends en{constructor(e,t,n,r){super(e,n,r),this.name=t,this.status=n}}class on extends an{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class sn extends an{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ln extends an{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class cn extends an{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class un extends an{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class dn extends an{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function fn(e){return tn(e)&&"AuthRetryableFetchError"===e.name}class hn extends an{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class pn extends an{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const mn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),gn=" \t\n\r=".split(""),vn=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<gn.length;t+=1)e[gn[t].charCodeAt(0)]=-2;for(let t=0;t<mn.length;t+=1)e[mn[t].charCodeAt(0)]=t;return e})();function yn(e,t,n){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(mn[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(mn[e]),t.queuedBits-=6}}function bn(e,t,n){const r=vn[e];if(!(r>-1)){if(-2===r)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function wn(e){const t=[],n=e=>{t.push(String.fromCodePoint(e))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},o=e=>{!function(e,t,n){if(0===t.utf8seq){if(e<=127)return void n(e);for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&n(t.codepoint)}}(e,r,n)};for(let t=0;t<e.length;t+=1)bn(e.charCodeAt(t),a,o);return t.join("")}function _n(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function xn(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};for(let t=0;t<e.length;t+=1)bn(e.charCodeAt(t),n,r);return new Uint8Array(t)}function En(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};return e.forEach(e=>yn(e,n,r)),yn(null,n,r),t.join("")}const kn=()=>"undefined"!=typeof window&&"undefined"!=typeof document,Sn={tested:!1,writable:!1},On=()=>{if(!kn())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(e){return!1}if(Sn.tested)return Sn.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Sn.tested=!0,Sn.writable=!0}catch(e){Sn.tested=!0,Sn.writable=!1}return Sn.writable},Pn=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(a.bind(a,907)).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},Tn=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Cn=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(e){return n}},Nn=async(e,t)=>{await e.removeItem(t)};class jn{constructor(){this.promise=new jn.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function An(e){const t=e.split(".");if(3!==t.length)throw new pn("Invalid JWT structure");for(let e=0;e<t.length;e++)if(!Zt.test(t[e]))throw new pn("JWT not in base64url format");return{header:JSON.parse(wn(t[0])),payload:JSON.parse(wn(t[1])),signature:xn(t[2]),raw:{header:t[0],payload:t[1]}}}function Rn(e){return("0"+e.toString(16)).substr(-2)}async function In(e,t,n=!1){const r=function(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let r=0;r<56;r++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,Rn).join("")}();let a=r;n&&(a+="/PASSWORD_RECOVERY"),await Tn(e,`${t}-code-verifier`,a);const o=await async function(e){if("undefined"==typeof crypto||void 0===crypto.subtle||"undefined"==typeof TextEncoder)return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}(r);return[o,r===o?"plain":"s256"]}jn.promiseConstructor=Promise;const $n=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i,Dn=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ln(e){if(!Dn.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function zn(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"==typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Un(e){return JSON.parse(JSON.stringify(e))}const Mn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Fn=[502,503,504];async function Bn(e){var t,n;if(!("object"==typeof(n=e)&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"==typeof n.json))throw new dn(Mn(e),0);if(Fn.includes(e.status))throw new dn(Mn(e),e.status);let r,a;try{r=await e.json()}catch(e){throw new rn(Mn(e),e)}const o=function(e){const t=e.headers.get(Qt);if(!t)return null;if(!t.match($n))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(e){return null}}(e);if(o&&o.getTime()>=Yt&&"object"==typeof r&&r&&"string"==typeof r.code?a=r.code:"object"==typeof r&&r&&"string"==typeof r.error_code&&(a=r.error_code),a){if("weak_password"===a)throw new hn(Mn(r),e.status,(null===(t=r.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===a)throw new on}else if("object"==typeof r&&r&&"object"==typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0))throw new hn(Mn(r),e.status,r.weak_password.reasons);throw new nn(Mn(r),e.status||500,a)}async function qn(e,t,n,r){var a;const o=Object.assign({},null==r?void 0:r.headers);o[Qt]||(o[Qt]=Xt),(null==r?void 0:r.jwt)&&(o.Authorization=`Bearer ${r.jwt}`);const i=null!==(a=null==r?void 0:r.query)&&void 0!==a?a:{};(null==r?void 0:r.redirectTo)&&(i.redirect_to=r.redirectTo);const s=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await async function(e,t,n,r,a,o){const i=((e,t,n,r)=>{const a={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),n))})(t,r,{},o);let s;try{s=await e(n,Object.assign({},i))}catch(e){throw console.error(e),new dn(Mn(e),0)}if(s.ok||await Bn(s),null==r?void 0:r.noResolveJson)return s;try{return await s.json()}catch(e){await Bn(e)}}(e,t,n+s,{headers:o,noResolveJson:null==r?void 0:r.noResolveJson},0,null==r?void 0:r.body);return(null==r?void 0:r.xform)?null==r?void 0:r.xform(l):{data:Object.assign({},l),error:null}}function Wn(e){var t;let n=null;var r;return function(e){return e.access_token&&e.refresh_token&&e.expires_in}(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r))),{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Hn(e){const t=Wn(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function Vn(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Gn(e){return{data:e,error:null}}function Kn(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:o}=e,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:o},user:Object.assign({},i)},error:null}}function Jn(e){return e}const Qn=["global","local","others"];class Yn{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=Pn(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=Qn[0]){if(Qn.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Qn.join(", ")}`);try{return await qn(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(e){if(tn(e))return{data:null,error:e};throw e}}async inviteUserByEmail(e,t={}){try{return await qn(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Vn})}catch(e){if(tn(e))return{data:{user:null},error:e};throw e}}async generateLink(e){try{const{options:t}=e,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=null==n?void 0:n.newEmail,delete r.newEmail),await qn(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:Kn,redirectTo:null==t?void 0:t.redirectTo})}catch(e){if(tn(e))return{data:{properties:null,user:null},error:e};throw e}}async createUser(e){try{return await qn(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Vn})}catch(e){if(tn(e))return{data:{user:null},error:e};throw e}}async listUsers(e){var t,n,r,a,o,i,s;try{const l={nextPage:null,lastPage:0,total:0},c=await qn(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(a=null===(r=null==e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==a?a:""},xform:Jn});if(c.error)throw c.error;const u=await c.json(),d=null!==(o=c.headers.get("x-total-count"))&&void 0!==o?o:0,f=null!==(s=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==s?s:[];return f.length>0&&(f.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l[`${n}Page`]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(e){if(tn(e))return{data:{users:[]},error:e};throw e}}async getUserById(e){Ln(e);try{return await qn(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Vn})}catch(e){if(tn(e))return{data:{user:null},error:e};throw e}}async updateUserById(e,t){Ln(e);try{return await qn(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Vn})}catch(e){if(tn(e))return{data:{user:null},error:e};throw e}}async deleteUser(e,t=!1){Ln(e);try{return await qn(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Vn})}catch(e){if(tn(e))return{data:{user:null},error:e};throw e}}async _listFactors(e){Ln(e.userId);try{const{data:t,error:n}=await qn(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(e){if(tn(e))return{data:null,error:e};throw e}}async _deleteFactor(e){Ln(e.userId),Ln(e.id);try{return{data:await qn(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(e){if(tn(e))return{data:null,error:e};throw e}}async _listOAuthClients(e){var t,n,r,a,o,i,s;try{const l={nextPage:null,lastPage:0,total:0},c=await qn(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(a=null===(r=null==e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==a?a:""},xform:Jn});if(c.error)throw c.error;const u=await c.json(),d=null!==(o=c.headers.get("x-total-count"))&&void 0!==o?o:0,f=null!==(s=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==s?s:[];return f.length>0&&(f.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l[`${n}Page`]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(e){if(tn(e))return{data:{clients:[]},error:e};throw e}}async _createOAuthClient(e){try{return await qn(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(tn(e))return{data:null,error:e};throw e}}async _getOAuthClient(e){try{return await qn(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(tn(e))return{data:null,error:e};throw e}}async _deleteOAuthClient(e){try{return await qn(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(tn(e))return{data:null,error:e};throw e}}async _regenerateOAuthClientSecret(e){try{return await qn(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(tn(e))return{data:null,error:e};throw e}}}function Xn(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Zn=!!(globalThis&&On()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class er extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class tr extends er{}async function nr(e,t,n){Zn&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Zn&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async r=>{if(!r){if(0===t)throw Zn&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new tr(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Zn)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(e){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",e)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}Zn&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,r.name);try{return await n()}finally{Zn&&console.log("@supabase/gotrue-js: navigatorLock: released",e,r.name)}}))}function rr(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function ar(e){const t=(new TextEncoder).encode(e);return"0x"+Array.from(t,e=>e.toString(16).padStart(2,"0")).join("")}class or extends Error{constructor({message:e,code:t,cause:n,name:r}){var a;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=null!==(a=null!=r?r:n instanceof Error?n.name:void 0)&&void 0!==a?a:"Unknown Error",this.code=t}}class ir extends or{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function sr({error:e,options:t}){var n,r,a;const{publicKey:o}=t;if(!o)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(t.signal instanceof AbortSignal)return new or({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if("ConstraintError"===e.name){if(!0===(null===(n=o.authenticatorSelection)||void 0===n?void 0:n.requireResidentKey))return new or({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if("conditional"===t.mediation&&"required"===(null===(r=o.authenticatorSelection)||void 0===r?void 0:r.userVerification))return new or({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if("required"===(null===(a=o.authenticatorSelection)||void 0===a?void 0:a.userVerification))return new or({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if("InvalidStateError"===e.name)return new or({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if("NotAllowedError"===e.name)return new or({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if("NotSupportedError"===e.name)return 0===o.pubKeyCredParams.filter(e=>"public-key"===e.type).length?new or({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new or({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if("SecurityError"===e.name){const t=window.location.hostname;if(!mr(t))return new or({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(o.rp.id!==t)return new or({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("TypeError"===e.name){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new or({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if("UnknownError"===e.name)return new or({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new or({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function lr({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(t.signal instanceof AbortSignal)return new or({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if("NotAllowedError"===e.name)return new or({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if("SecurityError"===e.name){const t=window.location.hostname;if(!mr(t))return new or({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(n.rpId!==t)return new or({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("UnknownError"===e.name)return new or({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new or({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var cr=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};const ur=new class{createNewAbortSignal(){if(this.controller){const e=new Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}};function dr(e){if(!e)throw new Error("Credential creation options are required");if("undefined"!=typeof PublicKeyCredential&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,a=cr(e,["challenge","user","excludeCredentials"]),o=xn(t).buffer,i=Object.assign(Object.assign({},n),{id:xn(n.id).buffer}),s=Object.assign(Object.assign({},a),{challenge:o,user:i});if(r&&r.length>0){s.excludeCredentials=new Array(r.length);for(let e=0;e<r.length;e++){const t=r[e];s.excludeCredentials[e]=Object.assign(Object.assign({},t),{id:xn(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return s}function fr(e){if(!e)throw new Error("Credential request options are required");if("undefined"!=typeof PublicKeyCredential&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=cr(e,["challenge","allowCredentials"]),a=xn(t).buffer,o=Object.assign(Object.assign({},r),{challenge:a});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let e=0;e<n.length;e++){const t=n[e];o.allowCredentials[e]=Object.assign(Object.assign({},t),{id:xn(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return o}function hr(e){var t;if("toJSON"in e&&"function"==typeof e.toJSON)return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:En(new Uint8Array(e.response.attestationObject)),clientDataJSON:En(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:null!==(t=n.authenticatorAttachment)&&void 0!==t?t:void 0}}function pr(e){var t;if("toJSON"in e&&"function"==typeof e.toJSON)return e.toJSON();const n=e,r=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:En(new Uint8Array(a.authenticatorData)),clientDataJSON:En(new Uint8Array(a.clientDataJSON)),signature:En(new Uint8Array(a.signature)),userHandle:a.userHandle?En(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:null!==(t=n.authenticatorAttachment)&&void 0!==t?t:void 0}}function mr(e){return"localhost"===e||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function gr(){var e,t;return!!(kn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"==typeof(null===(e=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===e?void 0:e.create)&&"function"==typeof(null===(t=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===t?void 0:t.get))}const vr={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},yr={userVerification:"preferred",hints:["security-key"]};function br(...e){const t=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),n=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),r={};for(const a of e)if(a)for(const e in a){const o=a[e];if(void 0!==o)if(Array.isArray(o))r[e]=o;else if(n(o))r[e]=o;else if(t(o)){const n=r[e];t(n)?r[e]=br(n,o):r[e]=br(o)}else r[e]=o}return r}class wr{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:n,signal:r},a){try{const{data:o,error:i}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!o)return{data:null,error:i};const s=null!=r?r:ur.createNewAbortSignal();if("create"===o.webauthn.type){const{user:e}=o.webauthn.credential_options.publicKey;e.name||(e.name=`${e.id}:${n}`),e.displayName||(e.displayName=e.name)}switch(o.webauthn.type){case"create":{const t=function(e,t){return br(vr,e,t||{})}(o.webauthn.credential_options.publicKey,null==a?void 0:a.create),{data:n,error:r}=await async function(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new ir("Browser returned unexpected credential type",t)}:{data:null,error:new ir("Empty credential response",t)}}catch(t){return{data:null,error:sr({error:t,options:e})}}}({publicKey:t,signal:s});return n?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:n}},error:null}:{data:null,error:r}}case"request":{const t=function(e,t){return br(yr,e,t||{})}(o.webauthn.credential_options.publicKey,null==a?void 0:a.request),{data:n,error:r}=await async function(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new ir("Browser returned unexpected credential type",t)}:{data:null,error:new ir("Empty credential response",t)}}catch(t){return{data:null,error:lr({error:t,options:e})}}}(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:t,signal:s}));return n?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:n}},error:null}:{data:null,error:r}}}}catch(e){return tn(e)?{data:null,error:e}:{data:null,error:new rn("Unexpected error in challenge",e)}}}async _verify({challengeId:e,factorId:t,webauthn:n}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:t=("undefined"!=typeof window?window.location.hostname:void 0),rpOrigins:n=("undefined"!=typeof window?[window.location.origin]:void 0),signal:r}},a){if(!t)return{data:null,error:new en("rpId is required for WebAuthn authentication")};try{if(!gr())return{data:null,error:new rn("Browser does not support WebAuthn",null)};const{data:o,error:i}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:n},signal:r},{request:a});if(!o)return{data:null,error:i};const{webauthn:s}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:s.type,rpId:t,rpOrigins:n,credential_response:s.credential_response}})}catch(e){return tn(e)?{data:null,error:e}:{data:null,error:new rn("Unexpected error in authenticate",e)}}}async _register({friendlyName:e,rpId:t=("undefined"!=typeof window?window.location.hostname:void 0),rpOrigins:n=("undefined"!=typeof window?[window.location.origin]:void 0),signal:r},a){if(!t)return{data:null,error:new en("rpId is required for WebAuthn registration")};try{if(!gr())return{data:null,error:new rn("Browser does not support WebAuthn",null)};const{data:o,error:i}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(t=>{var n;return null===(n=t.data)||void 0===n?void 0:n.all.find(t=>"webauthn"===t.factor_type&&t.friendly_name===e&&"unverified"!==t.status)}).then(e=>e?this.client.mfa.unenroll({factorId:null==e?void 0:e.id}):void 0),{data:null,error:i};const{data:s,error:l}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:t,rpOrigins:n},signal:r},{create:a});return s?this._verify({factorId:o.id,challengeId:s.challengeId,webauthn:{rpId:t,rpOrigins:n,type:s.webauthn.type,credential_response:s.webauthn.credential_response}}):{data:null,error:l}}catch(e){return tn(e)?{data:null,error:e}:{data:null,error:new rn("Unexpected error in register",e)}}}}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!=typeof self&&(self.globalThis=self)}}();const _r={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Jt,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function xr(e,t,n){return await n()}const Er={};class kr{get jwks(){var e,t;return null!==(t=null===(e=Er[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){Er[this.storageKey]=Object.assign(Object.assign({},Er[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=Er[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Er[this.storageKey]=Object.assign(Object.assign({},Er[this.storageKey]),{cachedAt:e})}constructor(e){var t,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=kr.nextInstanceID,kr.nextInstanceID+=1,this.instanceID>0&&kn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},_r),e);if(this.logDebugMessages=!!r.debug,"function"==typeof r.debug&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new Yn({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=Pn(r.fetch),this.lock=r.lock||xr,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:kn()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=nr:this.lock=xr,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new wr(this)},this.persistSession?(r.storage?this.storage=r.storage:On()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Xn(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=Xn(this.memoryStorage)),kn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(e){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",e)}null===(n=this.broadcastChannel)||void 0===n||n.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Gt}) ${(new Date).toISOString()}`,...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach((e,n)=>{t[n]=e})}catch(e){}return n.searchParams.forEach((e,n)=>{t[n]=e}),t}(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),kn()&&this.detectSessionInUrl&&"none"!==n){const{data:r,error:a}=await this._getSessionFromURL(t,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),function(e){return tn(e)&&"AuthImplicitGrantRedirectError"===e.name}(a)){const t=null===(e=a.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:i}=r;return this._debug("#_initialize()","detected session in URL",o,"redirect type",i),await this._saveSession(o),setTimeout(async()=>{"recovery"===i?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return tn(e)?{error:e}:{error:new rn("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,r;try{const a=await qn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(n=null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken}},xform:Wn}),{data:o,error:i}=a;if(i||!o)return{data:{user:null,session:null},error:i};const s=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",s)),{data:{user:l,session:s},error:null}}catch(e){if(tn(e))return{data:{user:null,session:null},error:e};throw e}}async signUp(e){var t,n,r;try{let a;if("email"in e){const{email:n,password:r,options:o}=e;let i=null,s=null;"pkce"===this.flowType&&([i,s]=await In(this.storage,this.storageKey)),a=await qn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==o?void 0:o.emailRedirectTo,body:{email:n,password:r,data:null!==(t=null==o?void 0:o.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==o?void 0:o.captchaToken},code_challenge:i,code_challenge_method:s},xform:Wn})}else{if(!("phone"in e))throw new ln("You must provide either an email or phone number and a password");{const{phone:t,password:o,options:i}=e;a=await qn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:o,data:null!==(n=null==i?void 0:i.data)&&void 0!==n?n:{},channel:null!==(r=null==i?void 0:i.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:Wn})}}const{data:o,error:i}=a;if(i||!o)return{data:{user:null,session:null},error:i};const s=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",s)),{data:{user:l,session:s},error:null}}catch(e){if(tn(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithPassword(e){try{let t;if("email"in e){const{email:n,password:r,options:a}=e;t=await qn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:r,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:Hn})}else{if(!("phone"in e))throw new ln("You must provide either an email or phone number and a password");{const{phone:n,password:r,options:a}=e;t=await qn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:r,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:Hn})}}const{data:n,error:r}=t;return r?{data:{user:null,session:null},error:r}:n&&n.session&&n.user?(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r}):{data:{user:null,session:null},error:new sn}}catch(e){if(tn(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOAuth(e){var t,n,r,a;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(a=e.options)||void 0===a?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,n,r,a,o,i,s,l,c,u,d;let f,h;if("message"in e)f=e.message,h=e.signature;else{const{chain:u,wallet:d,statement:p,options:m}=e;let g;if(kn())if("object"==typeof d)g=d;else{const e=window;if(!("ethereum"in e)||"object"!=typeof e.ethereum||!("request"in e.ethereum)||"function"!=typeof e.ethereum.request)throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.");g=e.ethereum}else{if("object"!=typeof d||!(null==m?void 0:m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=d}const v=new URL(null!==(t=null==m?void 0:m.url)&&void 0!==t?t:window.location.href),y=await g.request({method:"eth_requestAccounts"}).then(e=>e).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!y||0===y.length)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const b=rr(y[0]);let w=null===(n=null==m?void 0:m.signInWithEthereum)||void 0===n?void 0:n.chainId;if(!w){const e=await g.request({method:"eth_chainId"});w=parseInt(e,16)}f=function(e){var t;const{chainId:n,domain:r,expirationTime:a,issuedAt:o=new Date,nonce:i,notBefore:s,requestId:l,resources:c,scheme:u,uri:d,version:f}=e;if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(i&&i.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${i}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==f)throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(null===(t=e.statement)||void 0===t?void 0:t.includes("\n"))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`);const h=`${u?`${u}://${r}`:r} wants you to sign in with your Ethereum account:\n${rr(e.address)}\n\n${e.statement?`${e.statement}\n`:""}`;let p=`URI: ${d}\nVersion: ${f}\nChain ID: ${n}${i?`\nNonce: ${i}`:""}\nIssued At: ${o.toISOString()}`;if(a&&(p+=`\nExpiration Time: ${a.toISOString()}`),s&&(p+=`\nNot Before: ${s.toISOString()}`),l&&(p+=`\nRequest ID: ${l}`),c){let e="\nResources:";for(const t of c){if(!t||"string"!=typeof t)throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${t}`);e+=`\n- ${t}`}p+=e}return`${h}\n${p}`}({domain:v.host,address:b,statement:p,uri:v.href,version:"1",chainId:w,nonce:null===(r=null==m?void 0:m.signInWithEthereum)||void 0===r?void 0:r.nonce,issuedAt:null!==(o=null===(a=null==m?void 0:m.signInWithEthereum)||void 0===a?void 0:a.issuedAt)&&void 0!==o?o:new Date,expirationTime:null===(i=null==m?void 0:m.signInWithEthereum)||void 0===i?void 0:i.expirationTime,notBefore:null===(s=null==m?void 0:m.signInWithEthereum)||void 0===s?void 0:s.notBefore,requestId:null===(l=null==m?void 0:m.signInWithEthereum)||void 0===l?void 0:l.requestId,resources:null===(c=null==m?void 0:m.signInWithEthereum)||void 0===c?void 0:c.resources}),h=await g.request({method:"personal_sign",params:[ar(f),b]})}try{const{data:t,error:n}=await qn(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:f,signature:h},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(d=e.options)||void 0===d?void 0:d.captchaToken}}:null),xform:Wn});if(n)throw n;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:n}):{data:{user:null,session:null},error:new sn}}catch(e){if(tn(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithSolana(e){var t,n,r,a,o,i,s,l,c,u,d,f;let h,p;if("message"in e)h=e.message,p=e.signature;else{const{chain:d,wallet:f,statement:m,options:g}=e;let v;if(kn())if("object"==typeof f)v=f;else{const e=window;if(!("solana"in e)||"object"!=typeof e.solana||!("signIn"in e.solana&&"function"==typeof e.solana.signIn||"signMessage"in e.solana&&"function"==typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");v=e.solana}else{if("object"!=typeof f||!(null==g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=f}const y=new URL(null!==(t=null==g?void 0:g.url)&&void 0!==t?t:window.location.href);if("signIn"in v&&v.signIn){const e=await v.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null==g?void 0:g.signInWithSolana),{version:"1",domain:y.host,uri:y.href}),m?{statement:m}:null));let t;if(Array.isArray(e)&&e[0]&&"object"==typeof e[0])t=e[0];else{if(!(e&&"object"==typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"==typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");h="string"==typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),p=t.signature}else{if(!("signMessage"in v&&"function"==typeof v.signMessage&&"publicKey"in v&&"object"==typeof v&&v.publicKey&&"toBase58"in v.publicKey&&"function"==typeof v.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");h=[`${y.host} wants you to sign in with your Solana account:`,v.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${y.href}`,`Issued At: ${null!==(r=null===(n=null==g?void 0:g.signInWithSolana)||void 0===n?void 0:n.issuedAt)&&void 0!==r?r:(new Date).toISOString()}`,...(null===(a=null==g?void 0:g.signInWithSolana)||void 0===a?void 0:a.notBefore)?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...(null===(o=null==g?void 0:g.signInWithSolana)||void 0===o?void 0:o.expirationTime)?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...(null===(i=null==g?void 0:g.signInWithSolana)||void 0===i?void 0:i.chainId)?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...(null===(s=null==g?void 0:g.signInWithSolana)||void 0===s?void 0:s.nonce)?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...(null===(l=null==g?void 0:g.signInWithSolana)||void 0===l?void 0:l.requestId)?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...(null===(u=null===(c=null==g?void 0:g.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===u?void 0:u.length)?["Resources",...g.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=await v.signMessage((new TextEncoder).encode(h),"utf8");if(!(e&&e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=e}}try{const{data:t,error:n}=await qn(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:h,signature:En(p)},(null===(d=e.options)||void 0===d?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:null===(f=e.options)||void 0===f?void 0:f.captchaToken}}:null),xform:Wn});if(n)throw n;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:n}):{data:{user:null,session:null},error:new sn}}catch(e){if(tn(e))return{data:{user:null,session:null},error:e};throw e}}async _exchangeCodeForSession(e){const t=await Cn(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(null!=t?t:"").split("/");try{const{data:t,error:a}=await qn(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Wn});if(await Nn(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!=r?r:null}),error:a}):{data:{user:null,session:null,redirectType:null},error:new sn}}catch(e){if(tn(e))return{data:{user:null,session:null,redirectType:null},error:e};throw e}}async signInWithIdToken(e){try{const{options:t,provider:n,token:r,access_token:a,nonce:o}=e,i=await qn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:Wn}),{data:s,error:l}=i;return l?{data:{user:null,session:null},error:l}:s&&s.session&&s.user?(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:s,error:l}):{data:{user:null,session:null},error:new sn}}catch(e){if(tn(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOtp(e){var t,n,r,a,o;try{if("email"in e){const{email:r,options:a}=e;let o=null,i=null;"pkce"===this.flowType&&([o,i]=await In(this.storage,this.storageKey));const{error:s}=await qn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:r,data:null!==(t=null==a?void 0:a.data)&&void 0!==t?t:{},create_user:null===(n=null==a?void 0:a.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken},code_challenge:o,code_challenge_method:i},redirectTo:null==a?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:s}}if("phone"in e){const{phone:t,options:n}=e,{data:i,error:s}=await qn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(r=null==n?void 0:n.data)&&void 0!==r?r:{},create_user:null===(a=null==n?void 0:n.shouldCreateUser)||void 0===a||a,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},channel:null!==(o=null==n?void 0:n.channel)&&void 0!==o?o:"sms"}});return{data:{user:null,session:null,messageId:null==i?void 0:i.message_id},error:s}}throw new ln("You must provide either an email or phone number.")}catch(e){if(tn(e))return{data:{user:null,session:null},error:e};throw e}}async verifyOtp(e){var t,n;try{let r,a;"options"in e&&(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo,a=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:o,error:i}=await qn(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:r,xform:Wn});if(i)throw i;if(!o)throw new Error("An error occurred on token verification.");const s=o.session,l=o.user;return(null==s?void 0:s.access_token)&&(await this._saveSession(s),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",s)),{data:{user:l,session:s},error:null}}catch(e){if(tn(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithSSO(e){var t,n,r;try{let a=null,o=null;return"pkce"===this.flowType&&([a,o]=await In(this.storage,this.storageKey)),await qn(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:Gn})}catch(e){if(tn(e))return{data:null,error:e};throw e}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new on;const{error:r}=await qn(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(tn(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:a}=e,{error:o}=await qn(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},redirectTo:null==a?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:n,type:r,options:a}=e,{data:o,error:i}=await qn(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:null==o?void 0:o.message_id},error:i}}throw new ln("You must provide either an email or phone number and a type")}catch(e){if(tn(e))return{data:{user:null,session:null},error:e};throw e}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(e){}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(e){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await Cn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&1e3*e.expires_at-Date.now()<9e4;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const t=await Cn(this.userStorage,this.storageKey+"-user");(null==t?void 0:t.user)?e.user=t.user:e.user=zn()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,n,r)=>(t||"user"!==n||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,n,r))})}return{data:{session:e},error:null}}const{data:r,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await qn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Vn}):await this._useSession(async e=>{var t,n,r;const{data:a,error:o}=e;if(o)throw o;return(null===(t=a.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await qn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(r=null===(n=a.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0,xform:Vn}):{data:{user:null},error:new on}})}catch(e){if(tn(e))return function(e){return tn(e)&&"AuthSessionMissingError"===e.name}(e)&&(await this._removeSession(),await Nn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:e};throw e}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:r,error:a}=n;if(a)throw a;if(!r.session)throw new on;const o=r.session;let i=null,s=null;"pkce"===this.flowType&&null!=e.email&&([i,s]=await In(this.storage,this.storageKey));const{data:l,error:c}=await qn(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:i,code_challenge_method:s}),jwt:o.access_token,xform:Vn});if(c)throw c;return o.user=l.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(e){if(tn(e))return{data:{user:null},error:e};throw e}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new on;const t=Date.now()/1e3;let n=t,r=!0,a=null;const{payload:o}=An(e.access_token);if(o.exp&&(n=o.exp,r=n<=t),r){const{data:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return{data:{user:null,session:null},error:n};if(!t)return{data:{user:null,session:null},error:null};a=t}else{const{data:r,error:o}=await this._getUser(e.access_token);if(o)throw o;a={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(e){if(tn(e))return{data:{session:null,user:null},error:e};throw e}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:r,error:a}=t;if(a)throw a;e=null!==(n=r.session)&&void 0!==n?n:void 0}if(!(null==e?void 0:e.refresh_token))throw new on;const{data:r,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(e){if(tn(e))return{data:{user:null,session:null},error:e};throw e}}async _getSessionFromURL(e,t){try{if(!kn())throw new cn("No browser detected.");if(e.error||e.error_description||e.error_code)throw new cn(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new un("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new cn("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new un("No code detected.");const{data:t,error:n}=await this._exchangeCodeForSession(e.code);if(n)throw n;const r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:a,refresh_token:o,expires_in:i,expires_at:s,token_type:l}=e;if(!(a&&i&&o&&l))throw new cn("No session defined in URL");const c=Math.round(Date.now()/1e3),u=parseInt(i);let d=c+u;s&&(d=parseInt(s));const f=d-c;1e3*f<=Kt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${u}s`);const h=d-u;c-h>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",h,d,c):c-h<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",h,d,c);const{data:p,error:m}=await this._getUser(a);if(m)throw m;const g={provider_token:n,provider_refresh_token:r,access_token:a,expires_in:u,expires_at:d,refresh_token:o,token_type:l,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(e){if(tn(e))return{data:{session:null,redirectType:null},error:e};throw e}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Cn(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:r,error:a}=t;if(a)return{error:a};const o=null===(n=r.session)||void 0===n?void 0:n.access_token;if(o){const{error:t}=await this.admin.signOut(o,e);if(t&&(!function(e){return tn(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await Nn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,r;try{const{data:{session:r},error:a}=t;if(a)throw a;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(t){await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",t),console.error(t)}})}async resetPasswordForEmail(e,t={}){let n=null,r=null;"pkce"===this.flowType&&([n,r]=await In(this.storage,this.storageKey,!0));try{return await qn(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(e){if(tn(e))return{data:null,error:e};throw e}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(e){if(tn(e))return{data:null,error:e};throw e}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:n,error:r}=await this._useSession(async t=>{var n,r,a,o,i;const{data:s,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(a=e.options)||void 0===a?void 0:a.queryParams,skipBrowserRedirect:!0});return await qn(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(i=null===(o=s.session)||void 0===o?void 0:o.access_token)&&void 0!==i?i:void 0})});if(r)throw r;return kn()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null==n?void 0:n.url),{data:{provider:e.provider,url:null==n?void 0:n.url},error:null}}catch(t){if(tn(t))return{data:{provider:e.provider,url:null},error:t};throw t}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var n;try{const{error:r,data:{session:a}}=t;if(r)throw r;const{options:o,provider:i,token:s,access_token:l,nonce:c}=e,u=await qn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:null!==(n=null==a?void 0:a.access_token)&&void 0!==n?n:void 0,body:{provider:i,id_token:s,access_token:l,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:null==o?void 0:o.captchaToken}},xform:Wn}),{data:d,error:f}=u;return f?{data:{user:null,session:null},error:f}:d&&d.session&&d.user?(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("USER_UPDATED",d.session)),{data:d,error:f}):{data:{user:null,session:null},error:new sn}}catch(e){if(tn(e))return{data:{user:null,session:null},error:e};throw e}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,r;const{data:a,error:o}=t;if(o)throw o;return await qn(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(r=null===(n=a.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0})})}catch(e){if(tn(e))return{data:null,error:e};throw e}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const a=Date.now();return await(n=async n=>(n>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await qn(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Wn})),r=(e,t)=>{const n=200*Math.pow(2,e);return t&&fn(t)&&Date.now()+n-a<Kt},new Promise((e,t)=>{(async()=>{for(let a=0;a<1/0;a++)try{const t=await n(a);if(!r(a,null))return void e(t)}catch(e){if(!r(a,e))return void t(e)}})()}))}catch(e){if(this._debug(t,"error",e),tn(e))return{data:{session:null,user:null},error:e};throw e}finally{this._debug(t,"end")}var n,r}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),kn()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Cn(this.storage,this.storageKey);if(r&&this.userStorage){let t=await Cn(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:r.user},await Tn(this.userStorage,this.storageKey+"-user",t)),r.user=null!==(e=null==t?void 0:t.user)&&void 0!==e?e:zn()}else if(r&&!r.user&&!r.user){const e=await Cn(this.storage,this.storageKey+"-user");e&&(null==e?void 0:e.user)?(r.user=e.user,await Nn(this.storage,this.storageKey+"-user"),await Tn(this.storage,this.storageKey,r)):r.user=zn()}if(this._debug(n,"session from storage",r),!this._isValidSession(r))return this._debug(n,"session is not valid"),void(null!==r&&await this._removeSession());const a=1e3*(null!==(t=r.expires_at)&&void 0!==t?t:1/0)-Date.now()<9e4;if(this._debug(n,`session has${a?"":" not"} expired with margin of 90000s`),a){if(this.autoRefreshToken&&r.refresh_token){const{error:e}=await this._callRefreshToken(r.refresh_token);e&&(console.error(e),fn(e)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(r.user&&!0===r.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(r.access_token);!t&&(null==e?void 0:e.user)?(r.user=e.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(e){console.error("Error getting user data:",e),this._debug(n,"error getting user data, skipping SIGNED_IN notification",e)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(e){return this._debug(n,"error",e),void console.error(e)}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new on;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new jn;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new on;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const r={data:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(e){if(this._debug(r,"error",e),tn(e)){const n={data:null,error:e};return fn(e)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(n),n}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(e),e}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,n=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],a=Array.from(this.stateChangeEmitters.values()).map(async n=>{try{await n.callback(e,t)}catch(e){r.push(e)}});if(await Promise.all(a),r.length>0){for(let e=0;e<r.length;e+=1)console.error(r[e]);throw r[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),n=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!n&&t.user&&await Tn(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const r=Un(e);await Tn(this.storage,this.storageKey,r)}else{const e=Un(t);await Tn(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await Nn(this.storage,this.storageKey),await Nn(this.storage,this.storageKey+"-code-verifier"),await Nn(this.storage,this.storageKey+"-user"),this.userStorage&&await Nn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&kn()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(e){console.error("removing visibilitychange callback failed",e)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Kt);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*n.expires_at-e)/Kt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),r<=3&&await this._callRefreshToken(n.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(!(e.isAcquireTimeout||e instanceof er))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!kn()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const r=[`provider=${encodeURIComponent(t)}`];if((null==n?void 0:n.redirectTo)&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),(null==n?void 0:n.scopes)&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),"pkce"===this.flowType){const[e,t]=await In(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});r.push(n.toString())}if(null==n?void 0:n.queryParams){const e=new URLSearchParams(n.queryParams);r.push(e.toString())}return(null==n?void 0:n.skipBrowserRedirect)&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:r,error:a}=t;return a?{data:null,error:a}:await qn(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token})})}catch(e){if(tn(e))return{data:null,error:e};throw e}}async _enroll(e){try{return await this._useSession(async t=>{var n,r;const{data:a,error:o}=t;if(o)return{data:null,error:o};const i=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:"totp"===e.factorType?{issuer:e.issuer}:{}),{data:s,error:l}=await qn(this.fetch,"POST",`${this.url}/factors`,{body:i,headers:this.headers,jwt:null===(n=null==a?void 0:a.session)||void 0===n?void 0:n.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&"totp"===s.type&&(null===(r=null==s?void 0:s.totp)||void 0===r?void 0:r.qr_code)&&(s.totp.qr_code=`data:image/svg+xml;utf-8,${s.totp.qr_code}`),{data:s,error:null})})}catch(e){if(tn(e))return{data:null,error:e};throw e}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:a}=t;if(a)return{data:null,error:a};const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:"create"===e.webauthn.type?hr(e.webauthn.credential_response):pr(e.webauthn.credential_response)})}:{code:e.code}),{data:i,error:s}=await qn(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token});return s?{data:null,error:s}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:s})})}catch(e){if(tn(e))return{data:null,error:e};throw e}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:a}=t;if(a)return{data:null,error:a};const o=await qn(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token});if(o.error)return o;const{data:i}=o;if("webauthn"!==i.type)return{data:i,error:null};switch(i.webauthn.type){case"create":return{data:Object.assign(Object.assign({},i),{webauthn:Object.assign(Object.assign({},i.webauthn),{credential_options:Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:dr(i.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},i),{webauthn:Object.assign(Object.assign({},i.webauthn),{credential_options:Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:fr(i.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(e){if(tn(e))return{data:null,error:e};throw e}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r={all:[],phone:[],totp:[],webauthn:[]};for(const n of null!==(e=null==t?void 0:t.factors)&&void 0!==e?e:[])r.all.push(n),"verified"===n.status&&r[n.factor_type].push(n);return{data:r,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:r},error:a}=e;if(a)return{data:null,error:a};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=An(r.access_token);let i=null;o.aal&&(i=o.aal);let s=i;return(null!==(n=null===(t=r.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==n?n:[]).length>0&&(s="aal2"),{data:{currentLevel:i,nextLevel:s,currentAuthenticationMethods:o.amr||[]},error:null}}))}async fetchJwk(e,t={keys:[]}){let n=t.keys.find(t=>t.kid===e);if(n)return n;const r=Date.now();if(n=this.jwks.keys.find(t=>t.kid===e),n&&this.jwks_cached_at+6e5>r)return n;const{data:a,error:o}=await qn(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return a.keys&&0!==a.keys.length?(this.jwks=a,this.jwks_cached_at=r,n=a.keys.find(t=>t.kid===e),n||null):null}async getClaims(e,t={}){try{let n=e;if(!n){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};n=e.session.access_token}const{header:r,payload:a,signature:o,raw:{header:i,payload:s}}=An(n);(null==t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(a.exp);const l=r.alg&&!r.alg.startsWith("HS")&&r.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(r.kid,(null==t?void 0:t.keys)?{keys:t.keys}:null==t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(n);if(e)throw e;return{data:{claims:a,header:r,signature:o},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(r.alg),u=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]),d=await crypto.subtle.verify(c,u,o,function(e){const t=[];return function(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const t=1024*(r-55296)&65535;r=65536+(e.charCodeAt(n+1)-56320&65535|t),n+=1}_n(r,t)}}(e,e=>t.push(e)),new Uint8Array(t)}(`${i}.${s}`));if(!d)throw new pn("Invalid JWT signature");return{data:{claims:a,header:r,signature:o},error:null}}catch(e){if(tn(e))return{data:null,error:e};throw e}}}kr.nextInstanceID=0;const Sr=kr;class Or extends Sr{constructor(e){super(e)}}class Pr{constructor(e,t,n){var r,a,o;this.supabaseUrl=e,this.supabaseKey=t;const i=function(e){const t=null==e?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL((n=t).endsWith("/")?n:n+"/")}catch(e){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}var n}(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const s=`sb-${i.hostname.split(".")[0]}-auth-token`,l=function(e,t){var n,r;const{db:a,auth:o,realtime:i,global:s}=e,{db:l,auth:c,realtime:u,global:d}=t,f={db:Object.assign(Object.assign({},l),a),auth:Object.assign(Object.assign({},c),o),realtime:Object.assign(Object.assign({},u),i),storage:{},global:Object.assign(Object.assign(Object.assign({},d),s),{headers:Object.assign(Object.assign({},null!==(n=null==d?void 0:d.headers)&&void 0!==n?n:{}),null!==(r=null==s?void 0:s.headers)&&void 0!==r?r:{})}),accessToken:()=>{return e=this,t=void 0,r=function*(){return""},new((n=void 0)||(n=Promise))(function(a,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,s)}l((r=r.apply(e,t||[])).next())});var e,t,n,r}};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}(null!=n?n:{},{db:Ft,realtime:qt,auth:Object.assign(Object.assign({},Bt),{storageKey:s}),global:Mt});this.storageKey=null!==(r=l.auth.storageKey)&&void 0!==r?r:"",this.headers=null!==(a=l.global.headers)&&void 0!==a?a:{},l.accessToken?(this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(o=l.auth)&&void 0!==o?o:{},this.headers,l.global.fetch),this.fetch=Vt(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.rest=new Ae(new URL("rest/v1",i).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new zt(this.storageUrl.href,this.headers,this.fetch,null==n?void 0:n.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new Ne(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return e=this,t=void 0,r=function*(){var e,t;if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey},new((n=void 0)||(n=Promise))(function(a,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,s)}l((r=r.apply(e,t||[])).next())});var e,t,n,r}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:a,storageKey:o,flowType:i,lock:s,debug:l},c,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Or({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),c),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:a,flowType:i,lock:s,debug:l,fetch:u,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new ht(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=n,this.realtime.setAuth(n))}}function Tr(e){return Tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tr(e)}function Cr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Nr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cr(Object(n),!0).forEach(function(t){jr(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function jr(e,t,n){return(t=function(e){var t=function(e){if("object"!=Tr(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Tr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Tr(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ar(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return Rr(c,"_invoke",function(n,r,a){var o,s,l,c=0,u=a||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,i}};function h(n,r){for(s=n,l=r,t=0;!d&&c&&!a&&t<u.length;t++){var a,o=u[t],h=f.p,p=o[2];n>3?(a=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((a=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(a||n>1)return i;throw d=!0,r}return function(a,u,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),s=u,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(c=2,o){if(s||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==i)break}catch(t){o=e,s=1,l=t}finally{c=1}}return{value:t,done:d}}}(n,a,o),!0),c}var i={};function s(){}function l(){}function c(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(Rr(t={},r,function(){return this}),t),d=c.prototype=s.prototype=Object.create(u);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,Rr(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=c,Rr(d,"constructor",c),Rr(c,"constructor",l),l.displayName="GeneratorFunction",Rr(c,a,"GeneratorFunction"),Rr(d),Rr(d,a,"Generator"),Rr(d,r,function(){return this}),Rr(d,"toString",function(){return"[object Generator]"}),(Ar=function(){return{w:o,m:f}})()}function Rr(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}Rr=function(e,t,n,r){function o(t,n){Rr(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},Rr(e,t,n,r)}function Ir(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function $r(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){Ir(o,r,a,i,s,"next",e)}function s(e){Ir(o,r,a,i,s,"throw",e)}i(void 0)})}}(function(){if("undefined"!=typeof window)return!1;if("undefined"==typeof process)return!1;const e=process.version;if(null==e)return!1;const t=e.match(/^v(\d+)\./);return!!t&&parseInt(t[1],10)<=18})()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var Dr,Lr,zr,Ur,Mr,Fr,Br,qr,Wr,Hr,Vr,Gr,Kr,Jr,Qr,Yr,Xr,Zr,ea,ta,na,ra,aa=new Pr("https://bvpeqfvlkqsckkmkuesf.supabase.co","sb_publishable_AwILwDR2sMT9usNN3qFzMA_4xTbE24B",void 0),oa={signUp:(Mr=$r(Ar().m(function e(t,n){var r,a,o,i,s=arguments;return Ar().w(function(e){for(;;)switch(e.n){case 0:return r=s.length>2&&void 0!==s[2]?s[2]:{},e.n=1,aa.auth.signUp({email:t,password:n,options:{data:r}});case 1:return a=e.v,o=a.data,i=a.error,e.a(2,{data:o,error:i})}},e)})),function(e,t){return Mr.apply(this,arguments)}),signIn:(Ur=$r(Ar().m(function e(t,n){var r,a,o;return Ar().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,aa.auth.signInWithPassword({email:t,password:n});case 1:return r=e.v,a=r.data,o=r.error,e.a(2,{data:a,error:o})}},e)})),function(e,t){return Ur.apply(this,arguments)}),signOut:(zr=$r(Ar().m(function e(){var t,n;return Ar().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,aa.auth.signOut();case 1:return t=e.v,n=t.error,e.a(2,{error:n})}},e)})),function(){return zr.apply(this,arguments)}),getCurrentUser:(Lr=$r(Ar().m(function e(){var t,n,r;return Ar().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,aa.auth.getUser();case 1:return t=e.v,n=t.data.user,r=t.error,e.a(2,{user:n,error:r})}},e)})),function(){return Lr.apply(this,arguments)}),getSession:(Dr=$r(Ar().m(function e(){var t,n,r;return Ar().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,aa.auth.getSession();case 1:return t=e.v,n=t.data.session,r=t.error,e.a(2,{session:n,error:r})}},e)})),function(){return Dr.apply(this,arguments)}),onAuthStateChange:function(e){return aa.auth.onAuthStateChange(e)}},ia={create:(qr=$r(Ar().m(function e(t,n){var r,a,o;return Ar().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,aa.from("profiles").insert([Nr({id:t},n)]);case 1:return r=e.v,a=r.data,o=r.error,e.a(2,{data:a,error:o})}},e)})),function(e,t){return qr.apply(this,arguments)}),get:(Br=$r(Ar().m(function e(t){var n,r,a;return Ar().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,aa.from("profiles").select("*").eq("id",t).single();case 1:return n=e.v,r=n.data,a=n.error,e.a(2,{data:r,error:a})}},e)})),function(e){return Br.apply(this,arguments)}),update:(Fr=$r(Ar().m(function e(t,n){var r,a,o;return Ar().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,aa.from("profiles").update(n).eq("id",t);case 1:return r=e.v,a=r.data,o=r.error,e.a(2,{data:a,error:o})}},e)})),function(e,t){return Fr.apply(this,arguments)})},sa={create:(Jr=$r(Ar().m(function e(t){var n,r,a;return Ar().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,aa.from("travel_plans").insert([t]).select();case 1:return n=e.v,r=n.data,a=n.error,e.a(2,{data:r,error:a})}},e)})),function(e){return Jr.apply(this,arguments)}),getByUser:(Kr=$r(Ar().m(function e(t){var n,r,a;return Ar().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,aa.from("travel_plans").select("*").eq("user_id",t).order("created_at",{ascending:!1});case 1:return n=e.v,r=n.data,a=n.error,e.a(2,{data:r,error:a})}},e)})),function(e){return Kr.apply(this,arguments)}),getById:(Gr=$r(Ar().m(function e(t){var n,r,a;return Ar().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,aa.from("travel_plans").select("*").eq("id",t).single();case 1:return n=e.v,r=n.data,a=n.error,e.a(2,{data:r,error:a})}},e)})),function(e){return Gr.apply(this,arguments)}),update:(Vr=$r(Ar().m(function e(t,n){var r,a,o;return Ar().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,aa.from("travel_plans").update(Nr(Nr({},n),{},{updated_at:(new Date).toISOString()})).eq("id",t).select();case 1:return r=e.v,a=r.data,o=r.error,e.a(2,{data:a,error:o})}},e)})),function(e,t){return Vr.apply(this,arguments)}),delete:(Hr=$r(Ar().m(function e(t){var n,r,a;return Ar().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,aa.from("travel_plans").delete().eq("id",t);case 1:return n=e.v,r=n.data,a=n.error,e.a(2,{data:r,error:a})}},e)})),function(e){return Hr.apply(this,arguments)}),getAIGenerated:(Wr=$r(Ar().m(function e(t){var n,r,a;return Ar().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,aa.from("travel_plans").select("*").eq("user_id",t).eq("ai_generated",!0).order("created_at",{ascending:!1});case 1:return n=e.v,r=n.data,a=n.error,e.a(2,{data:r,error:a})}},e)})),function(e){return Wr.apply(this,arguments)})},la=($r(Ar().m(function e(t){var n,r,a;return Ar().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,aa.from("travel_plan_comments").insert([t]).select();case 1:return n=e.v,r=n.data,a=n.error,e.a(2,{data:r,error:a})}},e)})),$r(Ar().m(function e(t){var n,r,a;return Ar().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,aa.from("travel_plan_comments").select("\n        *,\n        profiles:user_id (name, email)\n      ").eq("plan_id",t).order("created_at",{ascending:!1});case 1:return n=e.v,r=n.data,a=n.error,e.a(2,{data:r,error:a})}},e)})),$r(Ar().m(function e(t){var n,r,a;return Ar().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,aa.from("travel_plan_comments").delete().eq("id",t);case 1:return n=e.v,r=n.data,a=n.error,e.a(2,{data:r,error:a})}},e)})),$r(Ar().m(function e(t,n){var r,a,o;return Ar().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,aa.from("travel_plan_favorites").insert([{plan_id:t,user_id:n}]);case 1:return r=e.v,a=r.data,o=r.error,e.a(2,{data:a,error:o})}},e)})),$r(Ar().m(function e(t,n){var r,a,o;return Ar().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,aa.from("travel_plan_favorites").delete().eq("plan_id",t).eq("user_id",n);case 1:return r=e.v,a=r.data,o=r.error,e.a(2,{data:a,error:o})}},e)})),$r(Ar().m(function e(t,n){var r,a,o;return Ar().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,aa.from("travel_plan_favorites").select("id").eq("plan_id",t).eq("user_id",n).single();case 1:return r=e.v,a=r.data,o=r.error,e.a(2,{data:null!==a,error:o})}},e)})),$r(Ar().m(function e(t){var n,r,a;return Ar().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,aa.from("travel_plan_favorites").select("\n        *,\n        travel_plans (*)\n      ").eq("user_id",t).order("created_at",{ascending:!1});case 1:return n=e.v,r=n.data,a=n.error,e.a(2,{data:r,error:a})}},e)})),{create:(ra=$r(Ar().m(function e(t){var n,r,a;return Ar().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,aa.from("user_preferences").insert([t]).select();case 1:return n=e.v,r=n.data,a=n.error,e.a(2,{data:r,error:a})}},e)})),function(e){return ra.apply(this,arguments)}),getByUser:(na=$r(Ar().m(function e(t){var n,r,a;return Ar().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,aa.from("user_preferences").select("*").eq("user_id",t).order("is_default",{ascending:!1}).order("created_at",{ascending:!1});case 1:return n=e.v,r=n.data,a=n.error,e.a(2,{data:r,error:a})}},e)})),function(e){return na.apply(this,arguments)}),getDefault:(ta=$r(Ar().m(function e(t){var n,r,a;return Ar().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,aa.from("user_preferences").select("*").eq("user_id",t).eq("is_default",!0).single();case 1:return n=e.v,r=n.data,a=n.error,e.a(2,{data:r,error:a})}},e)})),function(e){return ta.apply(this,arguments)}),getById:(ea=$r(Ar().m(function e(t){var n,r,a;return Ar().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,aa.from("user_preferences").select("*").eq("id",t).single();case 1:return n=e.v,r=n.data,a=n.error,e.a(2,{data:r,error:a})}},e)})),function(e){return ea.apply(this,arguments)}),update:(Zr=$r(Ar().m(function e(t,n){var r,a,o;return Ar().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,aa.from("user_preferences").update(Nr(Nr({},n),{},{updated_at:(new Date).toISOString()})).eq("id",t).select();case 1:return r=e.v,a=r.data,o=r.error,e.a(2,{data:a,error:o})}},e)})),function(e,t){return Zr.apply(this,arguments)}),delete:(Xr=$r(Ar().m(function e(t){var n,r,a;return Ar().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,aa.from("user_preferences").delete().eq("id",t);case 1:return n=e.v,r=n.data,a=n.error,e.a(2,{data:r,error:a})}},e)})),function(e){return Xr.apply(this,arguments)}),setDefault:(Yr=$r(Ar().m(function e(t,n){var r,a,o;return Ar().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,aa.from("user_preferences").update({is_default:!1}).eq("user_id",n);case 1:return e.n=2,aa.from("user_preferences").update({is_default:!0}).eq("id",t).select();case 2:return r=e.v,a=r.data,o=r.error,e.a(2,{data:a,error:o})}},e)})),function(e,t){return Yr.apply(this,arguments)}),checkNameExists:(Qr=$r(Ar().m(function e(t,n){var r,a,o,i,s,l=arguments;return Ar().w(function(e){for(;;)switch(e.n){case 0:return r=l.length>2&&void 0!==l[2]?l[2]:null,a=aa.from("user_preferences").select("id").eq("user_id",t).eq("name",n),r&&(a=a.neq("id",r)),e.n=1,a;case 1:return o=e.v,i=o.data,s=o.error,e.a(2,{exists:i&&i.length>0,error:s})}},e)})),function(e,t){return Qr.apply(this,arguments)})}),ca=a(72),ua=a.n(ca),da=a(206),fa=a.n(da),ha=a(659),pa=a.n(ha),ma=a(56),ga=a.n(ma),va=a(159),ya=a.n(va),ba=a(113),wa=a.n(ba),_a=a(469),xa={};function Ea(e){return Ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ea(e)}function ka(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return Sa(c,"_invoke",function(n,r,a){var o,s,l,c=0,u=a||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,i}};function h(n,r){for(s=n,l=r,t=0;!d&&c&&!a&&t<u.length;t++){var a,o=u[t],h=f.p,p=o[2];n>3?(a=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((a=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(a||n>1)return i;throw d=!0,r}return function(a,u,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),s=u,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(c=2,o){if(s||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==i)break}catch(t){o=e,s=1,l=t}finally{c=1}}return{value:t,done:d}}}(n,a,o),!0),c}var i={};function s(){}function l(){}function c(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(Sa(t={},r,function(){return this}),t),d=c.prototype=s.prototype=Object.create(u);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,Sa(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=c,Sa(d,"constructor",c),Sa(c,"constructor",l),l.displayName="GeneratorFunction",Sa(c,a,"GeneratorFunction"),Sa(d),Sa(d,a,"Generator"),Sa(d,r,function(){return this}),Sa(d,"toString",function(){return"[object Generator]"}),(ka=function(){return{w:o,m:f}})()}function Sa(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}Sa=function(e,t,n,r){function o(t,n){Sa(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},Sa(e,t,n,r)}function Oa(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function Pa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ta(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pa(Object(n),!0).forEach(function(t){Ca(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pa(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ca(e,t,n){return(t=function(e){var t=function(e){if("object"!=Ea(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Ea(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ea(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Na(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ja(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ja(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ja(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}xa.styleTagTransform=wa(),xa.setAttributes=ga(),xa.insert=pa().bind(null,"head"),xa.domAPI=fa(),xa.insertStyleElement=ya(),ua()(_a.A,xa),_a.A&&_a.A.locals&&_a.A.locals;const Aa=function(e){var t=e.onLogin,n=Na((0,i.useState)({email:"",password:""}),2),r=n[0],a=n[1],o=Na((0,i.useState)(""),2),s=o[0],l=o[1],c=Na((0,i.useState)(!1),2),u=c[0],d=c[1],f=ee(),h=function(e){a(Ta(Ta({},r),{},Ca({},e.target.name,e.target.value))),l("")},p=function(){var e,n=(e=ka().m(function e(n){var a,o,i,s,c,u;return ka().w(function(e){for(;;)switch(e.p=e.n){case 0:return n.preventDefault(),d(!0),l(""),e.p=1,e.n=2,oa.signIn(r.email,r.password);case 2:a=e.v,o=a.data,(i=a.error)?l("登录失败: ".concat(i.message)):o.user&&(c={id:o.user.id,email:o.user.email,name:(null===(s=o.user.user_metadata)||void 0===s?void 0:s.name)||o.user.email.split("@")[0],created_at:o.user.created_at},t(c),f("/dashboard")),e.n=4;break;case 3:e.p=3,u=e.v,l("登录失败，请重试"),console.error("Login error:",u);case 4:return e.p=4,d(!1),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}),function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){Oa(o,r,a,i,s,"next",e)}function s(e){Oa(o,r,a,i,s,"throw",e)}i(void 0)})});return function(e){return n.apply(this,arguments)}}();return i.createElement("div",{className:"auth-container"},i.createElement("div",{className:"auth-card"},i.createElement("div",{className:"auth-header"},i.createElement("h1",null,"🌍 AI旅行规划师"),i.createElement("h2",null,"登录账户"),i.createElement("p",null,"欢迎回来！请登录您的账户")),i.createElement("form",{onSubmit:p,className:"auth-form"},s&&i.createElement("div",{className:"error-message"},s),i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"email"},"邮箱地址"),i.createElement("input",{type:"email",id:"email",name:"email",value:r.email,onChange:h,required:!0,placeholder:"请输入您的邮箱"})),i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"password"},"密码"),i.createElement("input",{type:"password",id:"password",name:"password",value:r.password,onChange:h,required:!0,placeholder:"请输入您的密码"})),i.createElement("button",{type:"submit",className:"auth-button",disabled:u},u?"登录中...":"登录")),i.createElement("div",{className:"auth-footer"},i.createElement("p",null,"还没有账户？ ",i.createElement(xe,{to:"/register"},"立即注册")))))};function Ra(e){return Ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ra(e)}function Ia(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return $a(c,"_invoke",function(n,r,a){var o,s,l,c=0,u=a||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,i}};function h(n,r){for(s=n,l=r,t=0;!d&&c&&!a&&t<u.length;t++){var a,o=u[t],h=f.p,p=o[2];n>3?(a=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((a=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(a||n>1)return i;throw d=!0,r}return function(a,u,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),s=u,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(c=2,o){if(s||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==i)break}catch(t){o=e,s=1,l=t}finally{c=1}}return{value:t,done:d}}}(n,a,o),!0),c}var i={};function s(){}function l(){}function c(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):($a(t={},r,function(){return this}),t),d=c.prototype=s.prototype=Object.create(u);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,$a(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=c,$a(d,"constructor",c),$a(c,"constructor",l),l.displayName="GeneratorFunction",$a(c,a,"GeneratorFunction"),$a(d),$a(d,a,"Generator"),$a(d,r,function(){return this}),$a(d,"toString",function(){return"[object Generator]"}),(Ia=function(){return{w:o,m:f}})()}function $a(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}$a=function(e,t,n,r){function o(t,n){$a(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},$a(e,t,n,r)}function Da(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function La(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function za(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?La(Object(n),!0).forEach(function(t){Ua(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):La(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ua(e,t,n){return(t=function(e){var t=function(e){if("object"!=Ra(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Ra(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ra(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ma(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Fa(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fa(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const Ba=function(e){var t=e.onLogin,n=Ma((0,i.useState)({name:"",email:"",password:"",confirmPassword:""}),2),r=n[0],a=n[1],o=Ma((0,i.useState)(""),2),s=o[0],l=o[1],c=Ma((0,i.useState)(!1),2),u=c[0],d=c[1],f=ee(),h=function(e){a(za(za({},r),{},Ua({},e.target.name,e.target.value))),l("")},p=function(){var e,n=(e=Ia().m(function e(n){var a,o,i,s,c;return Ia().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n.preventDefault(),d(!0),l(""),r.password===r.confirmPassword){e.n=1;break}return l("两次输入的密码不一致"),d(!1),e.a(2);case 1:if(!(r.password.length<6)){e.n=2;break}return l("密码长度至少6位"),d(!1),e.a(2);case 2:return e.p=2,e.n=3,oa.signUp(r.email,r.password,{name:r.name});case 3:if(a=e.v,o=a.data,!(i=a.error)){e.n=4;break}l(i.message),e.n=6;break;case 4:if(!o.user){e.n=6;break}return s={name:r.name,email:r.email,created_at:(new Date).toISOString()},e.n=5,ia.create(o.user.id,s);case 5:e.v.error,c={id:o.user.id,email:o.user.email,name:r.name,created_at:o.user.created_at},t(c),f("/dashboard");case 6:e.n=8;break;case 7:e.p=7,e.v,l("注册失败，请重试");case 8:return e.p=8,d(!1),e.f(8);case 9:return e.a(2)}},e,null,[[2,7,8,9]])}),function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){Da(o,r,a,i,s,"next",e)}function s(e){Da(o,r,a,i,s,"throw",e)}i(void 0)})});return function(e){return n.apply(this,arguments)}}();return i.createElement("div",{className:"auth-container"},i.createElement("div",{className:"auth-card"},i.createElement("div",{className:"auth-header"},i.createElement("h1",null,"🌍 AI旅行规划师"),i.createElement("h2",null,"创建账户"),i.createElement("p",null,"开始您的智能旅行规划之旅")),i.createElement("form",{onSubmit:p,className:"auth-form"},s&&i.createElement("div",{className:"error-message"},s),i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"name"},"姓名"),i.createElement("input",{type:"text",id:"name",name:"name",value:r.name,onChange:h,required:!0,placeholder:"请输入您的姓名"})),i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"email"},"邮箱地址"),i.createElement("input",{type:"email",id:"email",name:"email",value:r.email,onChange:h,required:!0,placeholder:"请输入您的邮箱"})),i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"password"},"密码"),i.createElement("input",{type:"password",id:"password",name:"password",value:r.password,onChange:h,required:!0,placeholder:"请输入密码（至少6位）"})),i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"confirmPassword"},"确认密码"),i.createElement("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:r.confirmPassword,onChange:h,required:!0,placeholder:"请再次输入密码"})),i.createElement("button",{type:"submit",className:"auth-button",disabled:u},u?"注册中...":"创建账户")),i.createElement("div",{className:"auth-footer"},i.createElement("p",null,"已有账户？ ",i.createElement(xe,{to:"/login"},"立即登录")))))},qa="RFC3986",Wa={RFC1738:e=>String(e).replace(/%20/g,"+"),RFC3986:e=>String(e)},Ha=(Object.prototype.hasOwnProperty,Array.isArray),Va=(()=>{const e=[];for(let t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e})(),Ga=1024;function Ka(e,t){if(Ha(e)){const n=[];for(let r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)}const Ja=Object.prototype.hasOwnProperty,Qa={brackets:e=>String(e)+"[]",comma:"comma",indices:(e,t)=>String(e)+"["+t+"]",repeat:e=>String(e)},Ya=Array.isArray,Xa=Array.prototype.push,Za=function(e,t){Xa.apply(e,Ya(t)?t:[t])},eo=Date.prototype.toISOString,to={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:(e,t,n,r,a)=>{if(0===e.length)return e;let o=e;if("symbol"==typeof e?o=Symbol.prototype.toString.call(e):"string"!=typeof e&&(o=String(e)),"iso-8859-1"===n)return escape(o).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});let i="";for(let e=0;e<o.length;e+=Ga){const t=o.length>=Ga?o.slice(e,e+Ga):o,n=[];for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);45===r||46===r||95===r||126===r||r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122||"RFC1738"===a&&(40===r||41===r)?n[n.length]=t.charAt(e):r<128?n[n.length]=Va[r]:r<2048?n[n.length]=Va[192|r>>6]+Va[128|63&r]:r<55296||r>=57344?n[n.length]=Va[224|r>>12]+Va[128|r>>6&63]+Va[128|63&r]:(e+=1,r=65536+((1023&r)<<10|1023&t.charCodeAt(e)),n[n.length]=Va[240|r>>18]+Va[128|r>>12&63]+Va[128|r>>6&63]+Va[128|63&r])}i+=n.join("")}return i},encodeValuesOnly:!1,format:qa,formatter:Wa[qa],indices:!1,serializeDate:e=>eo.call(e),skipNulls:!1,strictNullHandling:!1},no={};function ro(e,t,n,r,a,o,i,s,l,c,u,d,f,h,p,m,g,v){let y=e,b=v,w=0,_=!1;for(;void 0!==(b=b.get(no))&&!_;){const t=b.get(e);if(w+=1,void 0!==t){if(t===w)throw new RangeError("Cyclic object value");_=!0}void 0===b.get(no)&&(w=0)}if("function"==typeof c?y=c(t,y):y instanceof Date?y=f?.(y):"comma"===n&&Ya(y)&&(y=Ka(y,function(e){return e instanceof Date?f?.(e):e})),null===y){if(o)return l&&!m?l(t,to.encoder,g,"key",h):t;y=""}if("string"==typeof(x=y)||"number"==typeof x||"boolean"==typeof x||"symbol"==typeof x||"bigint"==typeof x||function(e){return!(!e||"object"!=typeof e||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))}(y)){if(l){const e=m?t:l(t,to.encoder,g,"key",h);return[p?.(e)+"="+p?.(l(y,to.encoder,g,"value",h))]}return[p?.(t)+"="+p?.(String(y))]}var x;const E=[];if(void 0===y)return E;let k;if("comma"===n&&Ya(y))m&&l&&(y=Ka(y,l)),k=[{value:y.length>0?y.join(",")||null:void 0}];else if(Ya(c))k=c;else{const e=Object.keys(y);k=u?e.sort(u):e}const S=s?String(t).replace(/\./g,"%2E"):String(t),O=r&&Ya(y)&&1===y.length?S+"[]":S;if(a&&Ya(y)&&0===y.length)return O+"[]";for(let t=0;t<k.length;++t){const b=k[t],_="object"==typeof b&&void 0!==b.value?b.value:y[b];if(i&&null===_)continue;const x=d&&s?b.replace(/\./g,"%2E"):b,S=Ya(y)?"function"==typeof n?n(O,x):O:O+(d?"."+x:"["+x+"]");v.set(e,w);const P=new WeakMap;P.set(no,v),Za(E,ro(_,S,n,r,a,o,i,s,"comma"===n&&m&&Ya(y)?null:l,c,u,d,f,h,p,m,g,P))}return E}const ao="4.104.0";let oo,io,so,lo,co,uo,fo,ho,po,mo=!1,go=null,vo=null,yo=null,bo=null;class wo{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}const _o=()=>{oo||function(e,t={auto:!1}){if(mo)throw new Error(`you must \`import 'openai/shims/${e.kind}'\` before importing anything else from openai`);if(oo)throw new Error(`can't \`import 'openai/shims/${e.kind}'\` after \`import 'openai/shims/${oo}'\``);mo=t.auto,oo=e.kind,io=e.fetch,go=e.Request,vo=e.Response,yo=e.Headers,so=e.FormData,bo=e.Blob,lo=e.File,co=e.ReadableStream,uo=e.getMultipartRequestOptions,fo=e.getDefaultAgent,ho=e.fileFromPath,po=e.isFsReadStream}(function({manuallyImported:e}={}){const t=e?"You may need to use polyfills":"Add one of these imports before your first `import … from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let n,r,a,o;try{n=fetch,r=Request,a=Response,o=Headers}catch(e){throw new Error(`this environment is missing the following Web Fetch API type: ${e.message}. ${t}`)}return{kind:"web",fetch:n,Request:r,Response:a,Headers:o,FormData:"undefined"!=typeof FormData?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${t}`)}},Blob:"undefined"!=typeof Blob?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${t}`)}},File:"undefined"!=typeof File?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${t}`)}},ReadableStream:"undefined"!=typeof ReadableStream?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${t}`)}},getMultipartRequestOptions:async(e,t)=>({...t,body:new wo(e)}),getDefaultAgent:e=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:e=>!1}}(),{auto:!0})};_o();class xo extends Error{}class Eo extends xo{constructor(e,t,n,r){super(`${Eo.makeMessage(e,t,n)}`),this.status=e,this.headers=r,this.request_id=r?.["x-request-id"],this.error=t;const a=t;this.code=a?.code,this.param=a?.param,this.type=a?.type}static makeMessage(e,t,n){const r=t?.message?"string"==typeof t.message?t.message:JSON.stringify(t.message):t?JSON.stringify(t):n;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,n,r){if(!e||!r)return new So({message:n,cause:_i(t)});const a=t?.error;return 400===e?new Po(e,a,n,r):401===e?new To(e,a,n,r):403===e?new Co(e,a,n,r):404===e?new No(e,a,n,r):409===e?new jo(e,a,n,r):422===e?new Ao(e,a,n,r):429===e?new Ro(e,a,n,r):e>=500?new Io(e,a,n,r):new Eo(e,a,n,r)}}class ko extends Eo{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class So extends Eo{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class Oo extends So{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Po extends Eo{}class To extends Eo{}class Co extends Eo{}class No extends Eo{}class jo extends Eo{}class Ao extends Eo{}class Ro extends Eo{}class Io extends Eo{}class $o extends xo{constructor(){super("Could not parse response content as the length limit was reached")}}class Do extends xo{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var Lo,zo=function(e,t,n,r,a){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?a.call(e,n):a?a.value=n:t.set(e,n),n},Uo=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class Mo{constructor(){Lo.set(this,void 0),this.buffer=new Uint8Array,zo(this,Lo,null,"f")}decode(e){if(null==e)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):"string"==typeof e?(new TextEncoder).encode(e):e;let n=new Uint8Array(this.buffer.length+t.length);n.set(this.buffer),n.set(t,this.buffer.length),this.buffer=n;const r=[];let a;for(;null!=(a=Fo(this.buffer,Uo(this,Lo,"f")));){if(a.carriage&&null==Uo(this,Lo,"f")){zo(this,Lo,a.index,"f");continue}if(null!=Uo(this,Lo,"f")&&(a.index!==Uo(this,Lo,"f")+1||a.carriage)){r.push(this.decodeText(this.buffer.slice(0,Uo(this,Lo,"f")-1))),this.buffer=this.buffer.slice(Uo(this,Lo,"f")),zo(this,Lo,null,"f");continue}const e=null!==Uo(this,Lo,"f")?a.preceding-1:a.preceding,t=this.decodeText(this.buffer.slice(0,e));r.push(t),this.buffer=this.buffer.slice(a.index),zo(this,Lo,null,"f")}return r}decodeText(e){if(null==e)return"";if("string"==typeof e)return e;if("undefined"!=typeof Buffer){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new xo(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if("undefined"!=typeof TextDecoder){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new xo(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new xo("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode("\n"):[]}}function Fo(e,t){for(let n=t??0;n<e.length;n++){if(10===e[n])return{preceding:n,index:n+1,carriage:!1};if(13===e[n])return{preceding:n,index:n+1,carriage:!0}}return null}function Bo(e){for(let t=0;t<e.length-1;t++){if(10===e[t]&&10===e[t+1])return t+2;if(13===e[t]&&13===e[t+1])return t+2;if(13===e[t]&&10===e[t+1]&&t+3<e.length&&13===e[t+2]&&10===e[t+3])return t+4}return-1}function qo(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const e=await t.read();return e?.done&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){const e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}Lo=new WeakMap,Mo.NEWLINE_CHARS=new Set(["\n","\r"]),Mo.NEWLINE_REGEXP=/\r\n|[\n\r]/g;class Wo{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let n=!1;return new Wo(async function*(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let r=!1;try{for await(const n of async function*(e,t){if(!e.body)throw t.abort(),new xo("Attempted to iterate over a response with no body");const n=new Ho,r=new Mo,a=qo(e.body);for await(const e of async function*(e){let t=new Uint8Array;for await(const n of e){if(null==n)continue;const e=n instanceof ArrayBuffer?new Uint8Array(n):"string"==typeof n?(new TextEncoder).encode(n):n;let r,a=new Uint8Array(t.length+e.length);for(a.set(t),a.set(e,t.length),t=a;-1!==(r=Bo(t));)yield t.slice(0,r),t=t.slice(r)}t.length>0&&(yield t)}(a))for(const t of r.decode(e)){const e=n.decode(t);e&&(yield e)}for(const e of r.flush()){const t=n.decode(e);t&&(yield t)}}(e,t))if(!r)if(n.data.startsWith("[DONE]"))r=!0;else if(null===n.event||n.event.startsWith("response.")||n.event.startsWith("transcript.")){let t;try{t=JSON.parse(n.data)}catch(e){throw console.error("Could not parse message into JSON:",n.data),console.error("From chunk:",n.raw),e}if(t&&t.error)throw new Eo(void 0,t.error,void 0,ci(e.headers));yield t}else{let e;try{e=JSON.parse(n.data)}catch(e){throw console.error("Could not parse message into JSON:",n.data),console.error("From chunk:",n.raw),e}if("error"==n.event)throw new Eo(void 0,e.error,e.message,void 0);yield{event:n.event,data:e}}r=!0}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;throw e}finally{r||t.abort()}},t)}static fromReadableStream(e,t){let n=!1;return new Wo(async function*(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let r=!1;try{for await(const t of async function*(){const t=new Mo,n=qo(e);for await(const e of n)for(const n of t.decode(e))yield n;for(const e of t.flush())yield e}())r||t&&(yield JSON.parse(t));r=!0}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;throw e}finally{r||t.abort()}},t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],n=this.iterator(),r=r=>({next:()=>{if(0===r.length){const r=n.next();e.push(r),t.push(r)}return r.shift()}});return[new Wo(()=>r(e),this.controller),new Wo(()=>r(t),this.controller)]}toReadableStream(){const e=this;let t;const n=new TextEncoder;return new co({async start(){t=e[Symbol.asyncIterator]()},async pull(e){try{const{value:r,done:a}=await t.next();if(a)return e.close();const o=n.encode(JSON.stringify(r)+"\n");e.enqueue(o)}catch(t){e.error(t)}},async cancel(){await(t.return?.())}})}}class Ho{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const e={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],e}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,n,r]=function(e){const t=e.indexOf(":");return-1!==t?[e.substring(0,t),":",e.substring(t+1)]:[e,"",""]}(e);return r.startsWith(" ")&&(r=r.substring(1)),"event"===t?this.event=r:"data"===t&&this.data.push(r),null}}const Vo=e=>null!=e&&"object"==typeof e&&"string"==typeof e.url&&"function"==typeof e.blob,Go=e=>null!=e&&"object"==typeof e&&"string"==typeof e.name&&"number"==typeof e.lastModified&&Ko(e),Ko=e=>null!=e&&"object"==typeof e&&"number"==typeof e.size&&"string"==typeof e.type&&"function"==typeof e.text&&"function"==typeof e.slice&&"function"==typeof e.arrayBuffer;async function Jo(e,t,n){if(e=await e,Go(e))return e;if(Vo(e)){const r=await e.blob();t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()??"unknown_file");const a=Ko(r)?[await r.arrayBuffer()]:[r];return new lo(a,t,n)}const r=await async function(e){let t=[];if("string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(Ko(e))t.push(await e.arrayBuffer());else{if(!Yo(e))throw new Error(`Unexpected data type: ${typeof e}; constructor: ${e?.constructor?.name}; props: ${function(e){return`[${Object.getOwnPropertyNames(e).map(e=>`"${e}"`).join(", ")}]`}(e)}`);for await(const n of e)t.push(n)}return t}(e);if(t||(t=function(e){return Qo(e.name)||Qo(e.filename)||Qo(e.path)?.split(/[\\/]/).pop()}(e)??"unknown_file"),!n?.type){const e=r[0]?.type;"string"==typeof e&&(n={...n,type:e})}return new lo(r,t,n)}const Qo=e=>"string"==typeof e?e:"undefined"!=typeof Buffer&&e instanceof Buffer?String(e):void 0,Yo=e=>null!=e&&"object"==typeof e&&"function"==typeof e[Symbol.asyncIterator],Xo=e=>e&&"object"==typeof e&&e.body&&"MultipartBody"===e[Symbol.toStringTag],Zo=async e=>{const t=await ei(e.body);return uo(t,e)},ei=async e=>{const t=new so;return await Promise.all(Object.entries(e||{}).map(([e,n])=>ti(t,e,n))),t},ti=async(e,t,n)=>{if(void 0!==n){if(null==n)throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if("string"==typeof n||"number"==typeof n||"boolean"==typeof n)e.append(t,String(n));else if((e=>Go(e)||Vo(e)||po(e))(n)){const r=await Jo(n);e.append(t,r)}else if(Array.isArray(n))await Promise.all(n.map(n=>ti(e,t+"[]",n)));else{if("object"!=typeof n)throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`);await Promise.all(Object.entries(n).map(([n,r])=>ti(e,`${t}[${n}]`,r)))}}};var ni;async function ri(e){const{response:t}=e;if(e.options.stream)return Pi("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller):Wo.fromSSEResponse(t,e.controller);if(204===t.status)return null;if(e.options.__binaryResponse)return t;const n=t.headers.get("content-type"),r=n?.split(";")[0]?.trim();if(r?.includes("application/json")||r?.endsWith("+json")){const e=await t.json();return Pi("response",t.status,t.url,t.headers,e),ai(e,t)}const a=await t.text();return Pi("response",t.status,t.url,t.headers,a),a}function ai(e,t){return!e||"object"!=typeof e||Array.isArray(e)?e:Object.defineProperty(e,"_request_id",{value:t.headers.get("x-request-id"),enumerable:!1})}_o();class oi extends Promise{constructor(e,t=ri){super(e=>{e(null)}),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new oi(this.responsePromise,async t=>ai(e(await this.parseResponse(t),t),t.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class ii{constructor({baseURL:e,maxRetries:t=2,timeout:n=6e5,httpAgent:r,fetch:a}){this.baseURL=e,this.maxRetries=wi("maxRetries",t),this.timeout=wi("timeout",n),this.httpAgent=r,this.fetch=a??io}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...mi(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${Ti()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,n){return this.request(Promise.resolve(n).then(async n=>{const r=n&&Ko(n?.body)?new DataView(await n.body.arrayBuffer()):n?.body instanceof DataView?n.body:n?.body instanceof ArrayBuffer?new DataView(n.body):n&&ArrayBuffer.isView(n?.body)?new DataView(n.body.buffer):n?.body;return{method:e,path:t,...n,body:r}}))}getAPIList(e,t,n){return this.requestAPIList(t,{method:"get",path:e,...n})}calculateContentLength(e){if("string"==typeof e){if("undefined"!=typeof Buffer)return Buffer.byteLength(e,"utf8").toString();if("undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:t=0}={}){const n={...e},{method:r,path:a,query:o,headers:i={}}=n,s=ArrayBuffer.isView(n.body)||n.__binaryRequest&&"string"==typeof n.body?n.body:Xo(n.body)?n.body.body:n.body?JSON.stringify(n.body,null,2):null,l=this.calculateContentLength(s),c=this.buildURL(a,o);"timeout"in n&&wi("timeout",n.timeout),n.timeout=n.timeout??this.timeout;const u=n.httpAgent??this.httpAgent??fo(c),d=n.timeout+1e3;return"number"==typeof u?.options?.timeout&&d>(u.options.timeout??0)&&(u.options.timeout=d),this.idempotencyHeader&&"get"!==r&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey),{req:{method:r,...s&&{body:s},headers:this.buildHeaders({options:n,headers:i,contentLength:l,retryCount:t}),...u&&{agent:u},signal:n.signal??null},url:c,timeout:n.timeout}}buildHeaders({options:e,headers:t,contentLength:n,retryCount:r}){const a={};n&&(a["content-length"]=n);const o=this.defaultHeaders(e);return Si(a,o),Si(a,t),Xo(e.body)&&"node"!==oo&&delete a["content-type"],void 0===Ci(o,"x-stainless-retry-count")&&void 0===Ci(t,"x-stainless-retry-count")&&(a["x-stainless-retry-count"]=String(r)),void 0===Ci(o,"x-stainless-timeout")&&void 0===Ci(t,"x-stainless-timeout")&&e.timeout&&(a["x-stainless-timeout"]=String(Math.trunc(e.timeout/1e3))),this.validateHeaders(a,t),a}async prepareOptions(e){}async prepareRequest(e,{url:t,options:n}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(e=>[...e])):{...e}:{}}makeStatusError(e,t,n,r){return Eo.generate(e,t,n,r)}request(e,t=null){return new oi(this.makeRequest(e,t))}async makeRequest(e,t){const n=await e,r=n.maxRetries??this.maxRetries;null==t&&(t=r),await this.prepareOptions(n);const{req:a,url:o,timeout:i}=this.buildRequest(n,{retryCount:r-t});if(await this.prepareRequest(a,{url:o,options:n}),Pi("request",o,n,a.headers),n.signal?.aborted)throw new ko;const s=new AbortController,l=await this.fetchWithTimeout(o,a,i,s).catch(_i);if(l instanceof Error){if(n.signal?.aborted)throw new ko;if(t)return this.retryRequest(n,t);if("AbortError"===l.name)throw new Oo;throw new So({cause:l})}const c=ci(l.headers);if(!l.ok){if(t&&this.shouldRetry(l))return Pi(`response (error; retrying, ${t} attempts remaining)`,l.status,o,c),this.retryRequest(n,t,c);const e=await l.text().catch(e=>_i(e).message),r=gi(e),a=r?void 0:e;throw Pi(`response (error; ${t?"(error; no more retries left)":"(error; not retryable)"})`,l.status,o,c,a),this.makeStatusError(l.status,r,a,c)}return{response:l,options:n,controller:s}}requestAPIList(e,t){const n=this.makeRequest(t,null);return new li(this,n,e)}buildURL(e,t){const n=yi(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),r=this.defaultQuery();return Ei(r)||(t={...r,...t}),"object"==typeof t&&t&&!Array.isArray(t)&&(n.search=this.stringifyQuery(t)),n.toString()}stringifyQuery(e){return Object.entries(e).filter(([e,t])=>void 0!==t).map(([e,t])=>{if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return`${encodeURIComponent(e)}=${encodeURIComponent(t)}`;if(null===t)return`${encodeURIComponent(e)}=`;throw new xo(`Cannot stringify type ${typeof t}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,t,n,r){const{signal:a,...o}=t||{};a&&a.addEventListener("abort",()=>r.abort());const i=setTimeout(()=>r.abort(),n),s={signal:r.signal,...o};return s.method&&(s.method=s.method.toUpperCase()),this.fetch.call(void 0,e,s).finally(()=>{clearTimeout(i)})}shouldRetry(e){const t=e.headers.get("x-should-retry");return"true"===t||"false"!==t&&(408===e.status||409===e.status||429===e.status||e.status>=500)}async retryRequest(e,t,n){let r;const a=n?.["retry-after-ms"];if(a){const e=parseFloat(a);Number.isNaN(e)||(r=e)}const o=n?.["retry-after"];if(o&&!r){const e=parseFloat(o);r=Number.isNaN(e)?Date.parse(o)-Date.now():1e3*e}if(!(r&&0<=r&&r<6e4)){const n=e.maxRetries??this.maxRetries;r=this.calculateDefaultRetryTimeoutMillis(t,n)}return await bi(r),this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){const n=t-e;return Math.min(.5*Math.pow(2,n),8)*(1-.25*Math.random())*1e3}getUserAgent(){return`${this.constructor.name}/JS ${ao}`}}class si{constructor(e,t,n,r){ni.set(this,void 0),function(e,t,n,r,a){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===r?a.call(e,n):a?a.value=n:t.set(e,n)}(this,ni,e,"f"),this.options=r,this.response=t,this.body=n}hasNextPage(){return!!this.getPaginatedItems().length&&null!=this.nextPageInfo()}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new xo("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const t={...this.options};if("params"in e&&"object"==typeof t.query)t.query={...t.query,...e.params};else if("url"in e){const n=[...Object.entries(t.query||{}),...e.url.searchParams.entries()];for(const[t,r]of n)e.url.searchParams.set(t,r);t.query=void 0,t.path=e.url.toString()}return await function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}(this,ni,"f").requestAPIList(this.constructor,t)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(ni=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class li extends oi{constructor(e,t,n){super(t,async t=>new n(e,t.response,await ri(t),t.options))}async*[Symbol.asyncIterator](){const e=await(this);for await(const t of e)yield t}}const ci=e=>new Proxy(Object.fromEntries(e.entries()),{get(e,t){const n=t.toString();return e[n.toLowerCase()]||e[n]}}),ui={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},di=e=>"object"==typeof e&&null!==e&&!Ei(e)&&Object.keys(e).every(e=>ki(ui,e)),fi=e=>"x32"===e?"x32":"x86_64"===e||"x64"===e?"x64":"arm"===e?"arm":"aarch64"===e||"arm64"===e?"arm64":e?`other:${e}`:"unknown",hi=e=>(e=e.toLowerCase()).includes("ios")?"iOS":"android"===e?"Android":"darwin"===e?"MacOS":"win32"===e?"Windows":"freebsd"===e?"FreeBSD":"openbsd"===e?"OpenBSD":"linux"===e?"Linux":e?`Other:${e}`:"Unknown";let pi;const mi=()=>pi??(pi=(()=>{if("undefined"!=typeof Deno&&null!=Deno.build)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ao,"X-Stainless-OS":hi(Deno.build.os),"X-Stainless-Arch":fi(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"==typeof Deno.version?Deno.version:Deno.version?.deno??"unknown"};if("undefined"!=typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ao,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if("[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0))return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ao,"X-Stainless-OS":hi(process.platform),"X-Stainless-Arch":fi(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const e=function(){if("undefined"==typeof navigator||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const e=n.exec(navigator.userAgent);if(e)return{browser:t,version:`${e[1]||0}.${e[2]||0}.${e[3]||0}`}}return null}();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ao,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ao,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}})()),gi=e=>{try{return JSON.parse(e)}catch(e){return}},vi=/^[a-z][a-z0-9+.-]*:/i,yi=e=>vi.test(e),bi=e=>new Promise(t=>setTimeout(t,e)),wi=(e,t)=>{if("number"!=typeof t||!Number.isInteger(t))throw new xo(`${e} must be an integer`);if(t<0)throw new xo(`${e} must be a positive integer`);return t},_i=e=>{if(e instanceof Error)return e;if("object"==typeof e&&null!==e)try{return new Error(JSON.stringify(e))}catch{}return new Error(e)},xi=e=>"undefined"!=typeof process?"MISSING_ENV_VAR"?.[e]?.trim()??void 0:"undefined"!=typeof Deno?Deno.env?.get?.(e)?.trim():void 0;function Ei(e){if(!e)return!0;for(const t in e)return!1;return!0}function ki(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Si(e,t){for(const n in t){if(!ki(t,n))continue;const r=n.toLowerCase();if(!r)continue;const a=t[n];null===a?delete e[r]:void 0!==a&&(e[r]=a)}}const Oi=new Set(["authorization","api-key"]);function Pi(e,...t){if("undefined"!=typeof process&&"true"==="MISSING_ENV_VAR"?.DEBUG){const n=t.map(e=>{if(!e)return e;if(e.headers){const t={...e,headers:{...e.headers}};for(const n in e.headers)Oi.has(n.toLowerCase())&&(t.headers[n]="REDACTED");return t}let t=null;for(const n in e)Oi.has(n.toLowerCase())&&(t??(t={...e}),t[n]="REDACTED");return t??e});console.log(`OpenAI:DEBUG:${e}`,...n)}}const Ti=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),Ci=(e,t)=>{const n=t.toLowerCase();if((e=>"function"==typeof e?.get)(e)){const r=t[0]?.toUpperCase()+t.substring(1).replace(/([^\w])(\w)/g,(e,t,n)=>t+n.toUpperCase());for(const a of[t,n,t.toUpperCase(),r]){const t=e.get(a);if(t)return t}}for(const[r,a]of Object.entries(e))if(r.toLowerCase()===n)return Array.isArray(a)?(a.length<=1||console.warn(`Received ${a.length} entries for the ${t} header, using the first entry.`),a[0]):a};function Ni(e){return null!=e&&"object"==typeof e&&!Array.isArray(e)}class ji{constructor(e){this._client=e}}class Ai extends ji{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}class Ri extends ji{list(e,t={},n){return di(t)?this.list(e,{},t):this._client.getAPIList(`/chat/completions/${e}/messages`,zi,{query:t,...n})}}class Ii extends si{constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[],this.object=n.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class $i extends si{constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[],this.has_more=n.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return!1!==this.has_more&&super.hasNextPage()}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const t=Object.fromEntries(e.url.searchParams);return Object.keys(t).length?t:null}nextPageInfo(){const e=this.getPaginatedItems();if(!e.length)return null;const t=e[e.length-1]?.id;return t?{params:{after:t}}:null}}class Di extends ji{constructor(){super(...arguments),this.messages=new Ri(this._client)}create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}retrieve(e,t){return this._client.get(`/chat/completions/${e}`,t)}update(e,t,n){return this._client.post(`/chat/completions/${e}`,{body:t,...n})}list(e={},t){return di(e)?this.list({},e):this._client.getAPIList("/chat/completions",Li,{query:e,...t})}del(e,t){return this._client.delete(`/chat/completions/${e}`,t)}}class Li extends $i{}class zi extends $i{}Di.ChatCompletionsPage=Li,Di.Messages=Ri;class Ui extends ji{constructor(){super(...arguments),this.completions=new Di(this._client)}}Ui.Completions=Di,Ui.ChatCompletionsPage=Li;class Mi extends ji{create(e,t){const n=!!e.encoding_format;let r=n?e.encoding_format:"base64";n&&Pi("Request","User defined encoding_format:",e.encoding_format);const a=this._client.post("/embeddings",{body:{...e,encoding_format:r},...t});return n?a:(Pi("response","Decoding base64 embeddings to float32 array"),a._thenUnwrap(e=>(e&&e.data&&e.data.forEach(e=>{const t=e.embedding;e.embedding=(e=>{if("undefined"!=typeof Buffer){const t=Buffer.from(e,"base64");return Array.from(new Float32Array(t.buffer,t.byteOffset,t.length/Float32Array.BYTES_PER_ELEMENT))}{const t=atob(e),n=t.length,r=new Uint8Array(n);for(let e=0;e<n;e++)r[e]=t.charCodeAt(e);return Array.from(new Float32Array(r.buffer))}})(t)}),e)))}}class Fi extends ji{create(e,t){return this._client.post("/files",Zo({body:e,...t}))}retrieve(e,t){return this._client.get(`/files/${e}`,t)}list(e={},t){return di(e)?this.list({},e):this._client.getAPIList("/files",Bi,{query:e,...t})}del(e,t){return this._client.delete(`/files/${e}`,t)}content(e,t){return this._client.get(`/files/${e}/content`,{...t,headers:{Accept:"application/binary",...t?.headers},__binaryResponse:!0})}retrieveContent(e,t){return this._client.get(`/files/${e}/content`,t)}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:n=18e5}={}){const r=new Set(["processed","error","deleted"]),a=Date.now();let o=await this.retrieve(e);for(;!o.status||!r.has(o.status);)if(await bi(t),o=await this.retrieve(e),Date.now()-a>n)throw new Oo({message:`Giving up on waiting for file ${e} to finish processing after ${n} milliseconds.`});return o}}class Bi extends $i{}Fi.FileObjectsPage=Bi;class qi extends ji{createVariation(e,t){return this._client.post("/images/variations",Zo({body:e,...t}))}edit(e,t){return this._client.post("/images/edits",Zo({body:e,...t}))}generate(e,t){return this._client.post("/images/generations",{body:e,...t})}}class Wi extends ji{create(e,t){return this._client.post("/audio/speech",{body:e,...t,headers:{Accept:"application/octet-stream",...t?.headers},__binaryResponse:!0})}}class Hi extends ji{create(e,t){return this._client.post("/audio/transcriptions",Zo({body:e,...t,stream:e.stream??!1,__metadata:{model:e.model}}))}}class Vi extends ji{create(e,t){return this._client.post("/audio/translations",Zo({body:e,...t,__metadata:{model:e.model}}))}}class Gi extends ji{constructor(){super(...arguments),this.transcriptions=new Hi(this._client),this.translations=new Vi(this._client),this.speech=new Wi(this._client)}}Gi.Transcriptions=Hi,Gi.Translations=Vi,Gi.Speech=Wi;class Ki extends ji{create(e,t){return this._client.post("/moderations",{body:e,...t})}}class Ji extends ji{retrieve(e,t){return this._client.get(`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",Qi,e)}del(e,t){return this._client.delete(`/models/${e}`,t)}}class Qi extends Ii{}Ji.ModelsPage=Qi;class Yi extends ji{}class Xi extends ji{run(e,t){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...t})}validate(e,t){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...t})}}class Zi extends ji{constructor(){super(...arguments),this.graders=new Xi(this._client)}}Zi.Graders=Xi;class es extends ji{create(e,t,n){return this._client.getAPIList(`/fine_tuning/checkpoints/${e}/permissions`,ts,{body:t,method:"post",...n})}retrieve(e,t={},n){return di(t)?this.retrieve(e,{},t):this._client.get(`/fine_tuning/checkpoints/${e}/permissions`,{query:t,...n})}del(e,t,n){return this._client.delete(`/fine_tuning/checkpoints/${e}/permissions/${t}`,n)}}class ts extends Ii{}es.PermissionCreateResponsesPage=ts;class ns extends ji{constructor(){super(...arguments),this.permissions=new es(this._client)}}ns.Permissions=es,ns.PermissionCreateResponsesPage=ts;class rs extends ji{list(e,t={},n){return di(t)?this.list(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,as,{query:t,...n})}}class as extends $i{}rs.FineTuningJobCheckpointsPage=as;class os extends ji{constructor(){super(...arguments),this.checkpoints=new rs(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(`/fine_tuning/jobs/${e}`,t)}list(e={},t){return di(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",is,{query:e,...t})}cancel(e,t){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},n){return di(t)?this.listEvents(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,ss,{query:t,...n})}pause(e,t){return this._client.post(`/fine_tuning/jobs/${e}/pause`,t)}resume(e,t){return this._client.post(`/fine_tuning/jobs/${e}/resume`,t)}}class is extends $i{}class ss extends $i{}os.FineTuningJobsPage=is,os.FineTuningJobEventsPage=ss,os.Checkpoints=rs,os.FineTuningJobCheckpointsPage=as;class ls extends ji{constructor(){super(...arguments),this.methods=new Yi(this._client),this.jobs=new os(this._client),this.checkpoints=new ns(this._client),this.alpha=new Zi(this._client)}}ls.Methods=Yi,ls.Jobs=os,ls.FineTuningJobsPage=is,ls.FineTuningJobEventsPage=ss,ls.Checkpoints=ns,ls.Alpha=Zi;class cs extends ji{}class us extends ji{constructor(){super(...arguments),this.graderModels=new cs(this._client)}}us.GraderModels=cs;class ds extends ji{create(e,t,n){return this._client.post(`/vector_stores/${e}/files`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(e,t,n){return this._client.get(`/vector_stores/${e}/files/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}update(e,t,n,r){return this._client.post(`/vector_stores/${e}/files/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(e,t={},n){return di(t)?this.list(e,{},t):this._client.getAPIList(`/vector_stores/${e}/files`,fs,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}del(e,t,n){return this._client.delete(`/vector_stores/${e}/files/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}async createAndPoll(e,t,n){const r=await this.create(e,t,n);return await this.poll(e,r.id,n)}async poll(e,t,n){const r={...n?.headers,"X-Stainless-Poll-Helper":"true"};for(n?.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const a=await this.retrieve(e,t,{...n,headers:r}).withResponse(),o=a.data;switch(o.status){case"in_progress":let e=5e3;if(n?.pollIntervalMs)e=n.pollIntervalMs;else{const t=a.response.headers.get("openai-poll-after-ms");if(t){const n=parseInt(t);isNaN(n)||(e=n)}}await bi(e);break;case"failed":case"completed":return o}}}async upload(e,t,n){const r=await this._client.files.create({file:t,purpose:"assistants"},n);return this.create(e,{file_id:r.id},n)}async uploadAndPoll(e,t,n){const r=await this.upload(e,t,n);return await this.poll(e,r.id,n)}content(e,t,n){return this._client.getAPIList(`/vector_stores/${e}/files/${t}/content`,hs,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}}class fs extends $i{}class hs extends Ii{}ds.VectorStoreFilesPage=fs,ds.FileContentResponsesPage=hs;class ps extends ji{create(e,t,n){return this._client.post(`/vector_stores/${e}/file_batches`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(e,t,n){return this._client.get(`/vector_stores/${e}/file_batches/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}cancel(e,t,n){return this._client.post(`/vector_stores/${e}/file_batches/${t}/cancel`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}async createAndPoll(e,t,n){const r=await this.create(e,t);return await this.poll(e,r.id,n)}listFiles(e,t,n={},r){return di(n)?this.listFiles(e,t,{},n):this._client.getAPIList(`/vector_stores/${e}/file_batches/${t}/files`,fs,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}async poll(e,t,n){const r={...n?.headers,"X-Stainless-Poll-Helper":"true"};for(n?.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const{data:a,response:o}=await this.retrieve(e,t,{...n,headers:r}).withResponse();switch(a.status){case"in_progress":let e=5e3;if(n?.pollIntervalMs)e=n.pollIntervalMs;else{const t=o.headers.get("openai-poll-after-ms");if(t){const n=parseInt(t);isNaN(n)||(e=n)}}await bi(e);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:t,fileIds:n=[]},r){if(null==t||0==t.length)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=r?.maxConcurrency??5,o=Math.min(a,t.length),i=this._client,s=t.values(),l=[...n],c=Array(o).fill(s).map(async function(e){for(let t of e){const e=await i.files.create({file:t,purpose:"assistants"},r);l.push(e.id)}});return await(async e=>{const t=await Promise.allSettled(e),n=t.filter(e=>"rejected"===e.status);if(n.length){for(const e of n)console.error(e.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const e of t)"fulfilled"===e.status&&r.push(e.value);return r})(c),await this.createAndPoll(e,{file_ids:l})}}class ms extends ji{constructor(){super(...arguments),this.files=new ds(this._client),this.fileBatches=new ps(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}retrieve(e,t){return this._client.get(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}update(e,t,n){return this._client.post(`/vector_stores/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}list(e={},t){return di(e)?this.list({},e):this._client.getAPIList("/vector_stores",gs,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}del(e,t){return this._client.delete(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}search(e,t,n){return this._client.getAPIList(`/vector_stores/${e}/search`,vs,{body:t,method:"post",...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}}class gs extends $i{}class vs extends Ii{}ms.VectorStoresPage=gs,ms.VectorStoreSearchResponsesPage=vs,ms.Files=ds,ms.VectorStoreFilesPage=fs,ms.FileContentResponsesPage=hs,ms.FileBatches=ps;class ys extends ji{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}retrieve(e,t){return this._client.get(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}update(e,t,n){return this._client.post(`/assistants/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}list(e={},t){return di(e)?this.list({},e):this._client.getAPIList("/assistants",bs,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}del(e,t){return this._client.delete(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}}class bs extends $i{}function ws(e){return"function"==typeof e.parse}ys.AssistantsPage=bs;const _s=e=>"assistant"===e?.role,xs=e=>"function"===e?.role,Es=e=>"tool"===e?.role;var ks,Ss,Os,Ps,Ts,Cs,Ns,js,As,Rs,Is,$s,Ds,Ls=function(e,t,n,r,a){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?a.call(e,n):a?a.value=n:t.set(e,n),n},zs=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class Us{constructor(){ks.add(this),this.controller=new AbortController,Ss.set(this,void 0),Os.set(this,()=>{}),Ps.set(this,()=>{}),Ts.set(this,void 0),Cs.set(this,()=>{}),Ns.set(this,()=>{}),js.set(this,{}),As.set(this,!1),Rs.set(this,!1),Is.set(this,!1),$s.set(this,!1),Ls(this,Ss,new Promise((e,t)=>{Ls(this,Os,e,"f"),Ls(this,Ps,t,"f")}),"f"),Ls(this,Ts,new Promise((e,t)=>{Ls(this,Cs,e,"f"),Ls(this,Ns,t,"f")}),"f"),zs(this,Ss,"f").catch(()=>{}),zs(this,Ts,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},zs(this,ks,"m",Ds).bind(this))},0)}_connected(){this.ended||(zs(this,Os,"f").call(this),this._emit("connect"))}get ended(){return zs(this,As,"f")}get errored(){return zs(this,Rs,"f")}get aborted(){return zs(this,Is,"f")}abort(){this.controller.abort()}on(e,t){return(zs(this,js,"f")[e]||(zs(this,js,"f")[e]=[])).push({listener:t}),this}off(e,t){const n=zs(this,js,"f")[e];if(!n)return this;const r=n.findIndex(e=>e.listener===t);return r>=0&&n.splice(r,1),this}once(e,t){return(zs(this,js,"f")[e]||(zs(this,js,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,n)=>{Ls(this,$s,!0,"f"),"error"!==e&&this.once("error",n),this.once(e,t)})}async done(){Ls(this,$s,!0,"f"),await zs(this,Ts,"f")}_emit(e,...t){if(zs(this,As,"f"))return;"end"===e&&(Ls(this,As,!0,"f"),zs(this,Cs,"f").call(this));const n=zs(this,js,"f")[e];if(n&&(zs(this,js,"f")[e]=n.filter(e=>!e.once),n.forEach(({listener:e})=>e(...t))),"abort"===e){const e=t[0];return zs(this,$s,"f")||n?.length||Promise.reject(e),zs(this,Ps,"f").call(this,e),zs(this,Ns,"f").call(this,e),void this._emit("end")}if("error"===e){const e=t[0];zs(this,$s,"f")||n?.length||Promise.reject(e),zs(this,Ps,"f").call(this,e),zs(this,Ns,"f").call(this,e),this._emit("end")}}_emitFinal(){}}function Ms(e){return"auto-parseable-response-format"===e?.$brand}function Fs(e){return"auto-parseable-tool"===e?.$brand}function Bs(e,t){const n=e.choices.map(e=>{if("length"===e.finish_reason)throw new $o;if("content_filter"===e.finish_reason)throw new Do;return{...e,message:{...e.message,...e.message.tool_calls?{tool_calls:e.message.tool_calls?.map(e=>function(e,t){const n=e.tools?.find(e=>e.function?.name===t.function.name);return{...t,function:{...t.function,parsed_arguments:Fs(n)?n.$parseRaw(t.function.arguments):n?.function.strict?JSON.parse(t.function.arguments):null}}}(t,e))??void 0}:void 0,parsed:e.message.content&&!e.message.refusal?qs(t,e.message.content):null}}});return{...e,choices:n}}function qs(e,t){return"json_schema"!==e.response_format?.type?null:"json_schema"===e.response_format?.type?"$parseRaw"in e.response_format?e.response_format.$parseRaw(t):JSON.parse(t):null}function Ws(e,t){if(!e)return!1;const n=e.tools?.find(e=>e.function?.name===t.function.name);return Fs(n)||n?.function.strict||!1}function Hs(e){return!!Ms(e.response_format)||(e.tools?.some(e=>Fs(e)||"function"===e.type&&!0===e.function.strict)??!1)}Ss=new WeakMap,Os=new WeakMap,Ps=new WeakMap,Ts=new WeakMap,Cs=new WeakMap,Ns=new WeakMap,js=new WeakMap,As=new WeakMap,Rs=new WeakMap,Is=new WeakMap,$s=new WeakMap,ks=new WeakSet,Ds=function(e){if(Ls(this,Rs,!0,"f"),e instanceof Error&&"AbortError"===e.name&&(e=new ko),e instanceof ko)return Ls(this,Is,!0,"f"),this._emit("abort",e);if(e instanceof xo)return this._emit("error",e);if(e instanceof Error){const t=new xo(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new xo(String(e)))};var Vs,Gs,Ks,Js,Qs,Ys,Xs,Zs,el=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};const tl=10;class nl extends Us{constructor(){super(...arguments),Vs.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const t=e.choices[0]?.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t)if(this._emit("message",e),(xs(e)||Es(e))&&e.content)this._emit("functionCallResult",e.content);else if(_s(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(_s(e)&&e.tool_calls)for(const t of e.tool_calls)"function"===t.type&&this._emit("functionCall",t.function)}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new xo("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),el(this,Vs,"m",Gs).call(this)}async finalMessage(){return await this.done(),el(this,Vs,"m",Ks).call(this)}async finalFunctionCall(){return await this.done(),el(this,Vs,"m",Js).call(this)}async finalFunctionCallResult(){return await this.done(),el(this,Vs,"m",Qs).call(this)}async totalUsage(){return await this.done(),el(this,Vs,"m",Ys).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=el(this,Vs,"m",Ks).call(this);t&&this._emit("finalMessage",t);const n=el(this,Vs,"m",Gs).call(this);n&&this._emit("finalContent",n);const r=el(this,Vs,"m",Js).call(this);r&&this._emit("finalFunctionCall",r);const a=el(this,Vs,"m",Qs).call(this);null!=a&&this._emit("finalFunctionCallResult",a),this._chatCompletions.some(e=>e.usage)&&this._emit("totalUsage",el(this,Vs,"m",Ys).call(this))}async _createChatCompletion(e,t,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),el(this,Vs,"m",Xs).call(this,t);const a=await e.chat.completions.create({...t,stream:!1},{...n,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Bs(a,t))}async _runChatCompletion(e,t,n){for(const e of t.messages)this._addMessage(e,!1);return await this._createChatCompletion(e,t,n)}async _runFunctions(e,t,n){const r="function",{function_call:a="auto",stream:o,...i}=t,s="string"!=typeof a&&a?.name,{maxChatCompletions:l=tl}=n||{},c={};for(const e of t.functions)c[e.name||e.function.name]=e;const u=t.functions.map(e=>({name:e.name||e.function.name,parameters:e.parameters,description:e.description}));for(const e of t.messages)this._addMessage(e,!1);for(let t=0;t<l;++t){const t=await this._createChatCompletion(e,{...i,function_call:a,functions:u,messages:[...this.messages]},n),o=t.choices[0]?.message;if(!o)throw new xo("missing message in ChatCompletion response");if(!o.function_call)return;const{name:l,arguments:d}=o.function_call,f=c[l];if(!f){const e=`Invalid function_call: ${JSON.stringify(l)}. Available options are: ${u.map(e=>JSON.stringify(e.name)).join(", ")}. Please try again`;this._addMessage({role:r,name:l,content:e});continue}if(s&&s!==l){const e=`Invalid function_call: ${JSON.stringify(l)}. ${JSON.stringify(s)} requested. Please try again`;this._addMessage({role:r,name:l,content:e});continue}let h;try{h=ws(f)?await f.parse(d):d}catch(e){this._addMessage({role:r,name:l,content:e instanceof Error?e.message:String(e)});continue}const p=await f.function(h,this),m=el(this,Vs,"m",Zs).call(this,p);if(this._addMessage({role:r,name:l,content:m}),s)return}}async _runTools(e,t,n){const r="tool",{tool_choice:a="auto",stream:o,...i}=t,s="string"!=typeof a&&a?.function?.name,{maxChatCompletions:l=tl}=n||{},c=t.tools.map(e=>{if(Fs(e)){if(!e.$callback)throw new xo("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:e.$callback,name:e.function.name,description:e.function.description||"",parameters:e.function.parameters,parse:e.$parseRaw,strict:!0}}}return e}),u={};for(const e of c)"function"===e.type&&(u[e.function.name||e.function.function.name]=e.function);const d="tools"in t?c.map(e=>"function"===e.type?{type:"function",function:{name:e.function.name||e.function.function.name,parameters:e.function.parameters,description:e.function.description,strict:e.function.strict}}:e):void 0;for(const e of t.messages)this._addMessage(e,!1);for(let t=0;t<l;++t){const t=await this._createChatCompletion(e,{...i,tool_choice:a,tools:d,messages:[...this.messages]},n),o=t.choices[0]?.message;if(!o)throw new xo("missing message in ChatCompletion response");if(!o.tool_calls?.length)return;for(const e of o.tool_calls){if("function"!==e.type)continue;const t=e.id,{name:n,arguments:a}=e.function,o=u[n];if(!o){const e=`Invalid tool_call: ${JSON.stringify(n)}. Available options are: ${Object.keys(u).map(e=>JSON.stringify(e)).join(", ")}. Please try again`;this._addMessage({role:r,tool_call_id:t,content:e});continue}if(s&&s!==n){const e=`Invalid tool_call: ${JSON.stringify(n)}. ${JSON.stringify(s)} requested. Please try again`;this._addMessage({role:r,tool_call_id:t,content:e});continue}let i;try{i=ws(o)?await o.parse(a):a}catch(e){const n=e instanceof Error?e.message:String(e);this._addMessage({role:r,tool_call_id:t,content:n});continue}const l=await o.function(i,this),c=el(this,Vs,"m",Zs).call(this,l);if(this._addMessage({role:r,tool_call_id:t,content:c}),s)return}}}}Vs=new WeakSet,Gs=function(){return el(this,Vs,"m",Ks).call(this).content??null},Ks=function(){let e=this.messages.length;for(;e-- >0;){const t=this.messages[e];if(_s(t)){const{function_call:e,...n}=t,r={...n,content:t.content??null,refusal:t.refusal??null};return e&&(r.function_call=e),r}}throw new xo("stream ended without producing a ChatCompletionMessage with role=assistant")},Js=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(_s(t)&&t?.function_call)return t.function_call;if(_s(t)&&t?.tool_calls?.length)return t.tool_calls.at(-1)?.function}},Qs=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(xs(t)&&null!=t.content)return t.content;if(Es(t)&&null!=t.content&&"string"==typeof t.content&&this.messages.some(e=>"assistant"===e.role&&e.tool_calls?.some(e=>"function"===e.type&&e.id===t.tool_call_id)))return t.content}},Ys=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},Xs=function(e){if(null!=e.n&&e.n>1)throw new xo("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},Zs=function(e){return"string"==typeof e?e:void 0===e?"undefined":JSON.stringify(e)};class rl extends nl{static runFunctions(e,t,n){const r=new rl,a={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return r._run(()=>r._runFunctions(e,t,a)),r}static runTools(e,t,n){const r=new rl,a={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,t,a)),r}_addMessage(e,t=!0){super._addMessage(e,t),_s(e)&&e.content&&this._emit("content",e.content)}}class al extends Error{}class ol extends Error{}const il=e=>function(e,t=511){if("string"!=typeof e)throw new TypeError("expecting str, got "+typeof e);if(!e.trim())throw new Error(`${e} is empty`);return((e,t)=>{const n=e.length;let r=0;const a=e=>{throw new al(`${e} at position ${r}`)},o=e=>{throw new ol(`${e} at position ${r}`)},i=()=>(d(),r>=n&&a("Unexpected end of input"),'"'===e[r]?s():"{"===e[r]?l():"["===e[r]?c():"null"===e.substring(r,r+4)||16&t&&n-r<4&&"null".startsWith(e.substring(r))?(r+=4,null):"true"===e.substring(r,r+4)||32&t&&n-r<4&&"true".startsWith(e.substring(r))?(r+=4,!0):"false"===e.substring(r,r+5)||32&t&&n-r<5&&"false".startsWith(e.substring(r))?(r+=5,!1):"Infinity"===e.substring(r,r+8)||128&t&&n-r<8&&"Infinity".startsWith(e.substring(r))?(r+=8,1/0):"-Infinity"===e.substring(r,r+9)||256&t&&1<n-r&&n-r<9&&"-Infinity".startsWith(e.substring(r))?(r+=9,-1/0):"NaN"===e.substring(r,r+3)||64&t&&n-r<3&&"NaN".startsWith(e.substring(r))?(r+=3,NaN):u()),s=()=>{const i=r;let s=!1;for(r++;r<n&&('"'!==e[r]||s&&"\\"===e[r-1]);)s="\\"===e[r]&&!s,r++;if('"'==e.charAt(r))try{return JSON.parse(e.substring(i,++r-Number(s)))}catch(e){o(String(e))}else if(1&t)try{return JSON.parse(e.substring(i,r-Number(s))+'"')}catch(t){return JSON.parse(e.substring(i,e.lastIndexOf("\\"))+'"')}a("Unterminated string literal")},l=()=>{r++,d();const o={};try{for(;"}"!==e[r];){if(d(),r>=n&&8&t)return o;const a=s();d(),r++;try{const e=i();Object.defineProperty(o,a,{value:e,writable:!0,enumerable:!0,configurable:!0})}catch(e){if(8&t)return o;throw e}d(),","===e[r]&&r++}}catch(e){if(8&t)return o;a("Expected '}' at end of object")}return r++,o},c=()=>{r++;const n=[];try{for(;"]"!==e[r];)n.push(i()),d(),","===e[r]&&r++}catch(e){if(4&t)return n;a("Expected ']' at end of array")}return r++,n},u=()=>{if(0===r){"-"===e&&2&t&&a("Not sure what '-' is");try{return JSON.parse(e)}catch(n){if(2&t)try{return"."===e[e.length-1]?JSON.parse(e.substring(0,e.lastIndexOf("."))):JSON.parse(e.substring(0,e.lastIndexOf("e")))}catch(e){}o(String(n))}}const i=r;for("-"===e[r]&&r++;e[r]&&!",]}".includes(e[r]);)r++;r!=n||2&t||a("Unterminated number literal");try{return JSON.parse(e.substring(i,r))}catch(n){"-"===e.substring(i,r)&&2&t&&a("Not sure what '-' is");try{return JSON.parse(e.substring(i,e.lastIndexOf("e")))}catch(e){o(String(e))}}},d=()=>{for(;r<n&&" \n\r\t".includes(e[r]);)r++};return i()})(e.trim(),t)}(e,509);var sl,ll,cl,ul,dl,fl,hl,pl,ml,gl,vl,yl,bl=function(e,t,n,r,a){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?a.call(e,n):a?a.value=n:t.set(e,n),n},wl=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class _l extends nl{constructor(e){super(),sl.add(this),ll.set(this,void 0),cl.set(this,void 0),ul.set(this,void 0),bl(this,ll,e,"f"),bl(this,cl,[],"f")}get currentChatCompletionSnapshot(){return wl(this,ul,"f")}static fromReadableStream(e){const t=new _l(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,n){const r=new _l(t);return r._run(()=>r._runChatCompletion(e,{...t,stream:!0},{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createChatCompletion(e,t,n){super._createChatCompletion;const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),wl(this,sl,"m",dl).call(this);const a=await e.chat.completions.create({...t,stream:!0},{...n,signal:this.controller.signal});this._connected();for await(const e of a)wl(this,sl,"m",hl).call(this,e);if(a.controller.signal?.aborted)throw new ko;return this._addChatCompletion(wl(this,sl,"m",gl).call(this))}async _fromReadableStream(e,t){const n=t?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),wl(this,sl,"m",dl).call(this),this._connected();const r=Wo.fromReadableStream(e,this.controller);let a;for await(const e of r)a&&a!==e.id&&this._addChatCompletion(wl(this,sl,"m",gl).call(this)),wl(this,sl,"m",hl).call(this,e),a=e.id;if(r.controller.signal?.aborted)throw new ko;return this._addChatCompletion(wl(this,sl,"m",gl).call(this))}[(ll=new WeakMap,cl=new WeakMap,ul=new WeakMap,sl=new WeakSet,dl=function(){this.ended||bl(this,ul,void 0,"f")},fl=function(e){let t=wl(this,cl,"f")[e.index];return t||(t={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},wl(this,cl,"f")[e.index]=t,t)},hl=function(e){if(this.ended)return;const t=wl(this,sl,"m",yl).call(this,e);this._emit("chunk",e,t);for(const n of e.choices){const e=t.choices[n.index];null!=n.delta.content&&"assistant"===e.message?.role&&e.message?.content&&(this._emit("content",n.delta.content,e.message.content),this._emit("content.delta",{delta:n.delta.content,snapshot:e.message.content,parsed:e.message.parsed})),null!=n.delta.refusal&&"assistant"===e.message?.role&&e.message?.refusal&&this._emit("refusal.delta",{delta:n.delta.refusal,snapshot:e.message.refusal}),null!=n.logprobs?.content&&"assistant"===e.message?.role&&this._emit("logprobs.content.delta",{content:n.logprobs?.content,snapshot:e.logprobs?.content??[]}),null!=n.logprobs?.refusal&&"assistant"===e.message?.role&&this._emit("logprobs.refusal.delta",{refusal:n.logprobs?.refusal,snapshot:e.logprobs?.refusal??[]});const r=wl(this,sl,"m",fl).call(this,e);e.finish_reason&&(wl(this,sl,"m",ml).call(this,e),null!=r.current_tool_call_index&&wl(this,sl,"m",pl).call(this,e,r.current_tool_call_index));for(const t of n.delta.tool_calls??[])r.current_tool_call_index!==t.index&&(wl(this,sl,"m",ml).call(this,e),null!=r.current_tool_call_index&&wl(this,sl,"m",pl).call(this,e,r.current_tool_call_index)),r.current_tool_call_index=t.index;for(const t of n.delta.tool_calls??[]){const n=e.message.tool_calls?.[t.index];n?.type&&("function"===n?.type?this._emit("tool_calls.function.arguments.delta",{name:n.function?.name,index:t.index,arguments:n.function.arguments,parsed_arguments:n.function.parsed_arguments,arguments_delta:t.function?.arguments??""}):kl())}}},pl=function(e,t){if(wl(this,sl,"m",fl).call(this,e).done_tool_calls.has(t))return;const n=e.message.tool_calls?.[t];if(!n)throw new Error("no tool call snapshot");if(!n.type)throw new Error("tool call snapshot missing `type`");if("function"===n.type){const e=wl(this,ll,"f")?.tools?.find(e=>"function"===e.type&&e.function.name===n.function.name);this._emit("tool_calls.function.arguments.done",{name:n.function.name,index:t,arguments:n.function.arguments,parsed_arguments:Fs(e)?e.$parseRaw(n.function.arguments):e?.function.strict?JSON.parse(n.function.arguments):null})}else n.type},ml=function(e){const t=wl(this,sl,"m",fl).call(this,e);if(e.message.content&&!t.content_done){t.content_done=!0;const n=wl(this,sl,"m",vl).call(this);this._emit("content.done",{content:e.message.content,parsed:n?n.$parseRaw(e.message.content):null})}e.message.refusal&&!t.refusal_done&&(t.refusal_done=!0,this._emit("refusal.done",{refusal:e.message.refusal})),e.logprobs?.content&&!t.logprobs_content_done&&(t.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:e.logprobs.content})),e.logprobs?.refusal&&!t.logprobs_refusal_done&&(t.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:e.logprobs.refusal}))},gl=function(){if(this.ended)throw new xo("stream has ended, this shouldn't happen");const e=wl(this,ul,"f");if(!e)throw new xo("request ended without sending any chunks");return bl(this,ul,void 0,"f"),bl(this,cl,[],"f"),function(e,t){const{id:n,choices:r,created:a,model:o,system_fingerprint:i,...s}=e,l={...s,id:n,choices:r.map(({message:t,finish_reason:n,index:r,logprobs:a,...o})=>{if(!n)throw new xo(`missing finish_reason for choice ${r}`);const{content:i=null,function_call:s,tool_calls:l,...c}=t,u=t.role;if(!u)throw new xo(`missing role for choice ${r}`);if(s){const{arguments:e,name:l}=s;if(null==e)throw new xo(`missing function_call.arguments for choice ${r}`);if(!l)throw new xo(`missing function_call.name for choice ${r}`);return{...o,message:{content:i,function_call:{arguments:e,name:l},role:u,refusal:t.refusal??null},finish_reason:n,index:r,logprobs:a}}return l?{...o,index:r,finish_reason:n,logprobs:a,message:{...c,role:u,content:i,refusal:t.refusal??null,tool_calls:l.map((t,n)=>{const{function:a,type:o,id:i,...s}=t,{arguments:l,name:c,...u}=a||{};if(null==i)throw new xo(`missing choices[${r}].tool_calls[${n}].id\n${xl(e)}`);if(null==o)throw new xo(`missing choices[${r}].tool_calls[${n}].type\n${xl(e)}`);if(null==c)throw new xo(`missing choices[${r}].tool_calls[${n}].function.name\n${xl(e)}`);if(null==l)throw new xo(`missing choices[${r}].tool_calls[${n}].function.arguments\n${xl(e)}`);return{...s,id:i,type:o,function:{...u,name:c,arguments:l}}})}}:{...o,message:{...c,content:i,role:u,refusal:t.refusal??null},finish_reason:n,index:r,logprobs:a}}),created:a,model:o,object:"chat.completion",...i?{system_fingerprint:i}:{}};return function(e,t){return t&&Hs(t)?Bs(e,t):{...e,choices:e.choices.map(e=>({...e,message:{...e.message,parsed:null,...e.message.tool_calls?{tool_calls:e.message.tool_calls}:void 0}}))}}(l,t)}(e,wl(this,ll,"f"))},vl=function(){const e=wl(this,ll,"f")?.response_format;return Ms(e)?e:null},yl=function(e){var t,n,r,a;let o=wl(this,ul,"f");const{choices:i,...s}=e;o?Object.assign(o,s):o=bl(this,ul,{...s,choices:[]},"f");for(const{delta:i,finish_reason:s,index:l,logprobs:c=null,...u}of e.choices){let e=o.choices[l];if(e||(e=o.choices[l]={finish_reason:s,index:l,message:{},logprobs:c,...u}),c)if(e.logprobs){const{content:r,refusal:a,...o}=c;El(),Object.assign(e.logprobs,o),r&&((t=e.logprobs).content??(t.content=[]),e.logprobs.content.push(...r)),a&&((n=e.logprobs).refusal??(n.refusal=[]),e.logprobs.refusal.push(...a))}else e.logprobs=Object.assign({},c);if(s&&(e.finish_reason=s,wl(this,ll,"f")&&Hs(wl(this,ll,"f")))){if("length"===s)throw new $o;if("content_filter"===s)throw new Do}if(Object.assign(e,u),!i)continue;const{content:d,refusal:f,function_call:h,role:p,tool_calls:m,...g}=i;if(El(),Object.assign(e.message,g),f&&(e.message.refusal=(e.message.refusal||"")+f),p&&(e.message.role=p),h&&(e.message.function_call?(h.name&&(e.message.function_call.name=h.name),h.arguments&&((r=e.message.function_call).arguments??(r.arguments=""),e.message.function_call.arguments+=h.arguments)):e.message.function_call=h),d&&(e.message.content=(e.message.content||"")+d,!e.message.refusal&&wl(this,sl,"m",vl).call(this)&&(e.message.parsed=il(e.message.content))),m){e.message.tool_calls||(e.message.tool_calls=[]);for(const{index:t,id:n,type:r,function:o,...i}of m){const s=(a=e.message.tool_calls)[t]??(a[t]={});Object.assign(s,i),n&&(s.id=n),r&&(s.type=r),o&&(s.function??(s.function={name:o.name??"",arguments:""})),o?.name&&(s.function.name=o.name),o?.arguments&&(s.function.arguments+=o.arguments,Ws(wl(this,ll,"f"),s)&&(s.function.parsed_arguments=il(s.function.arguments)))}}}return o},Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("chunk",n=>{const r=t.shift();r?r.resolve(n):e.push(n)}),this.on("end",()=>{n=!0;for(const e of t)e.resolve(void 0);t.length=0}),this.on("abort",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),this.on("error",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((e,n)=>t.push({resolve:e,reject:n})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Wo(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function xl(e){return JSON.stringify(e)}function El(e){}function kl(e){}class Sl extends _l{static fromReadableStream(e){const t=new Sl(null);return t._run(()=>t._fromReadableStream(e)),t}static runFunctions(e,t,n){const r=new Sl(null),a={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return r._run(()=>r._runFunctions(e,t,a)),r}static runTools(e,t,n){const r=new Sl(t),a={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,t,a)),r}}class Ol extends ji{parse(e,t){return function(e){for(const t of e??[]){if("function"!==t.type)throw new xo(`Currently only \`function\` tool types support auto-parsing; Received \`${t.type}\``);if(!0!==t.function.strict)throw new xo(`The \`${t.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t?.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(t=>Bs(t,e))}runFunctions(e,t){return e.stream?Sl.runFunctions(this._client,e,t):rl.runFunctions(this._client,e,t)}runTools(e,t){return e.stream?Sl.runTools(this._client,e,t):rl.runTools(this._client,e,t)}stream(e,t){return _l.createChatCompletion(this._client,e,t)}}class Pl extends ji{constructor(){super(...arguments),this.completions=new Ol(this._client)}}!function(e){e.Completions=Ol}(Pl||(Pl={}));class Tl extends ji{create(e,t){return this._client.post("/realtime/sessions",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}}class Cl extends ji{create(e,t){return this._client.post("/realtime/transcription_sessions",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}}class Nl extends ji{constructor(){super(...arguments),this.sessions=new Tl(this._client),this.transcriptionSessions=new Cl(this._client)}}Nl.Sessions=Tl,Nl.TranscriptionSessions=Cl;var jl,Al,Rl,Il,$l,Dl,Ll,zl,Ul,Ml,Fl,Bl,ql,Wl,Hl,Vl,Gl,Kl,Jl,Ql,Yl,Xl,Zl=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},ec=function(e,t,n,r,a){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?a.call(e,n):a?a.value=n:t.set(e,n),n};class tc extends Us{constructor(){super(...arguments),jl.add(this),Al.set(this,[]),Rl.set(this,{}),Il.set(this,{}),$l.set(this,void 0),Dl.set(this,void 0),Ll.set(this,void 0),zl.set(this,void 0),Ul.set(this,void 0),Ml.set(this,void 0),Fl.set(this,void 0),Bl.set(this,void 0),ql.set(this,void 0)}[(Al=new WeakMap,Rl=new WeakMap,Il=new WeakMap,$l=new WeakMap,Dl=new WeakMap,Ll=new WeakMap,zl=new WeakMap,Ul=new WeakMap,Ml=new WeakMap,Fl=new WeakMap,Bl=new WeakMap,ql=new WeakMap,jl=new WeakSet,Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("event",n=>{const r=t.shift();r?r.resolve(n):e.push(n)}),this.on("end",()=>{n=!0;for(const e of t)e.resolve(void 0);t.length=0}),this.on("abort",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),this.on("error",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((e,n)=>t.push({resolve:e,reject:n})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const t=new tc;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){const n=t?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),this._connected();const r=Wo.fromReadableStream(e,this.controller);for await(const e of r)Zl(this,jl,"m",Wl).call(this,e);if(r.controller.signal?.aborted)throw new ko;return this._addRun(Zl(this,jl,"m",Hl).call(this))}toReadableStream(){return new Wo(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,n,r,a){const o=new tc;return o._run(()=>o._runToolAssistantStream(e,t,n,r,{...a,headers:{...a?.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createToolAssistantStream(e,t,n,r,a){const o=a?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const i={...r,stream:!0},s=await e.submitToolOutputs(t,n,i,{...a,signal:this.controller.signal});this._connected();for await(const e of s)Zl(this,jl,"m",Wl).call(this,e);if(s.controller.signal?.aborted)throw new ko;return this._addRun(Zl(this,jl,"m",Hl).call(this))}static createThreadAssistantStream(e,t,n){const r=new tc;return r._run(()=>r._threadAssistantStream(e,t,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),r}static createAssistantStream(e,t,n,r){const a=new tc;return a._run(()=>a._runAssistantStream(e,t,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return Zl(this,Fl,"f")}currentRun(){return Zl(this,Bl,"f")}currentMessageSnapshot(){return Zl(this,$l,"f")}currentRunStepSnapshot(){return Zl(this,ql,"f")}async finalRunSteps(){return await this.done(),Object.values(Zl(this,Rl,"f"))}async finalMessages(){return await this.done(),Object.values(Zl(this,Il,"f"))}async finalRun(){if(await this.done(),!Zl(this,Dl,"f"))throw Error("Final run was not received.");return Zl(this,Dl,"f")}async _createThreadAssistantStream(e,t,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const a={...t,stream:!0},o=await e.createAndRun(a,{...n,signal:this.controller.signal});this._connected();for await(const e of o)Zl(this,jl,"m",Wl).call(this,e);if(o.controller.signal?.aborted)throw new ko;return this._addRun(Zl(this,jl,"m",Hl).call(this))}async _createAssistantStream(e,t,n,r){const a=r?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const o={...n,stream:!0},i=await e.create(t,o,{...r,signal:this.controller.signal});this._connected();for await(const e of i)Zl(this,jl,"m",Wl).call(this,e);if(i.controller.signal?.aborted)throw new ko;return this._addRun(Zl(this,jl,"m",Hl).call(this))}static accumulateDelta(e,t){for(const[n,r]of Object.entries(t)){if(!e.hasOwnProperty(n)){e[n]=r;continue}let t=e[n];if(null!=t)if("index"!==n&&"type"!==n){if("string"==typeof t&&"string"==typeof r)t+=r;else if("number"==typeof t&&"number"==typeof r)t+=r;else{if(!Ni(t)||!Ni(r)){if(Array.isArray(t)&&Array.isArray(r)){if(t.every(e=>"string"==typeof e||"number"==typeof e)){t.push(...r);continue}for(const e of r){if(!Ni(e))throw new Error(`Expected array delta entry to be an object but got: ${e}`);const n=e.index;if(null==n)throw console.error(e),new Error("Expected array delta entry to have an `index` property");if("number"!=typeof n)throw new Error(`Expected array delta entry \`index\` property to be a number but got ${n}`);const r=t[n];null==r?t.push(e):t[n]=this.accumulateDelta(r,e)}continue}throw Error(`Unhandled record type: ${n}, deltaValue: ${r}, accValue: ${t}`)}t=this.accumulateDelta(t,r)}e[n]=t}else e[n]=r;else e[n]=r}return e}_addRun(e){return e}async _threadAssistantStream(e,t,n){return await this._createThreadAssistantStream(t,e,n)}async _runAssistantStream(e,t,n,r){return await this._createAssistantStream(t,e,n,r)}async _runToolAssistantStream(e,t,n,r,a){return await this._createToolAssistantStream(n,e,t,r,a)}}Wl=function(e){if(!this.ended)switch(ec(this,Fl,e,"f"),Zl(this,jl,"m",Kl).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":Zl(this,jl,"m",Xl).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Zl(this,jl,"m",Gl).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":Zl(this,jl,"m",Vl).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Hl=function(){if(this.ended)throw new xo("stream has ended, this shouldn't happen");if(!Zl(this,Dl,"f"))throw Error("Final run has not been received");return Zl(this,Dl,"f")},Vl=function(e){const[t,n]=Zl(this,jl,"m",Ql).call(this,e,Zl(this,$l,"f"));ec(this,$l,t,"f"),Zl(this,Il,"f")[t.id]=t;for(const e of n){const n=t.content[e.index];"text"==n?.type&&this._emit("textCreated",n.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(const n of e.data.delta.content){if("text"==n.type&&n.text){let e=n.text,r=t.content[n.index];if(!r||"text"!=r.type)throw Error("The snapshot associated with this text delta is not text or missing");this._emit("textDelta",e,r.text)}if(n.index!=Zl(this,Ll,"f")){if(Zl(this,zl,"f"))switch(Zl(this,zl,"f").type){case"text":this._emit("textDone",Zl(this,zl,"f").text,Zl(this,$l,"f"));break;case"image_file":this._emit("imageFileDone",Zl(this,zl,"f").image_file,Zl(this,$l,"f"))}ec(this,Ll,n.index,"f")}ec(this,zl,t.content[n.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(void 0!==Zl(this,Ll,"f")){const t=e.data.content[Zl(this,Ll,"f")];if(t)switch(t.type){case"image_file":this._emit("imageFileDone",t.image_file,Zl(this,$l,"f"));break;case"text":this._emit("textDone",t.text,Zl(this,$l,"f"))}}Zl(this,$l,"f")&&this._emit("messageDone",e.data),ec(this,$l,void 0,"f")}},Gl=function(e){const t=Zl(this,jl,"m",Jl).call(this,e);switch(ec(this,ql,t,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const n=e.data.delta;if(n.step_details&&"tool_calls"==n.step_details.type&&n.step_details.tool_calls&&"tool_calls"==t.step_details.type)for(const e of n.step_details.tool_calls)e.index==Zl(this,Ul,"f")?this._emit("toolCallDelta",e,t.step_details.tool_calls[e.index]):(Zl(this,Ml,"f")&&this._emit("toolCallDone",Zl(this,Ml,"f")),ec(this,Ul,e.index,"f"),ec(this,Ml,t.step_details.tool_calls[e.index],"f"),Zl(this,Ml,"f")&&this._emit("toolCallCreated",Zl(this,Ml,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":ec(this,ql,void 0,"f"),"tool_calls"==e.data.step_details.type&&Zl(this,Ml,"f")&&(this._emit("toolCallDone",Zl(this,Ml,"f")),ec(this,Ml,void 0,"f")),this._emit("runStepDone",e.data,t)}},Kl=function(e){Zl(this,Al,"f").push(e),this._emit("event",e)},Jl=function(e){switch(e.event){case"thread.run.step.created":return Zl(this,Rl,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=Zl(this,Rl,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let n=e.data;if(n.delta){const r=tc.accumulateDelta(t,n.delta);Zl(this,Rl,"f")[e.data.id]=r}return Zl(this,Rl,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":Zl(this,Rl,"f")[e.data.id]=e.data}if(Zl(this,Rl,"f")[e.data.id])return Zl(this,Rl,"f")[e.data.id];throw new Error("No snapshot available")},Ql=function(e,t){let n=[];switch(e.event){case"thread.message.created":return[e.data,n];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let r=e.data;if(r.delta.content)for(const e of r.delta.content)if(e.index in t.content){let n=t.content[e.index];t.content[e.index]=Zl(this,jl,"m",Yl).call(this,e,n)}else t.content[e.index]=e,n.push(e);return[t,n];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,n];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},Yl=function(e,t){return tc.accumulateDelta(t,e)},Xl=function(e){switch(ec(this,Bl,e.data,"f"),e.event){case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.cancelling":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":ec(this,Dl,e.data,"f"),Zl(this,Ml,"f")&&(this._emit("toolCallDone",Zl(this,Ml,"f")),ec(this,Ml,void 0,"f"))}};class nc extends ji{create(e,t,n){return this._client.post(`/threads/${e}/messages`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(e,t,n){return this._client.get(`/threads/${e}/messages/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}update(e,t,n,r){return this._client.post(`/threads/${e}/messages/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(e,t={},n){return di(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/messages`,rc,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}del(e,t,n){return this._client.delete(`/threads/${e}/messages/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}}class rc extends $i{}nc.MessagesPage=rc;class ac extends ji{retrieve(e,t,n,r={},a){return di(r)?this.retrieve(e,t,n,{},r):this._client.get(`/threads/${e}/runs/${t}/steps/${n}`,{query:r,...a,headers:{"OpenAI-Beta":"assistants=v2",...a?.headers}})}list(e,t,n={},r){return di(n)?this.list(e,t,{},n):this._client.getAPIList(`/threads/${e}/runs/${t}/steps`,oc,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}}class oc extends $i{}ac.RunStepsPage=oc;class ic extends ji{constructor(){super(...arguments),this.steps=new ac(this._client)}create(e,t,n){const{include:r,...a}=t;return this._client.post(`/threads/${e}/runs`,{query:{include:r},body:a,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers},stream:t.stream??!1})}retrieve(e,t,n){return this._client.get(`/threads/${e}/runs/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}update(e,t,n,r){return this._client.post(`/threads/${e}/runs/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(e,t={},n){return di(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/runs`,sc,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}cancel(e,t,n){return this._client.post(`/threads/${e}/runs/${t}/cancel`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}async createAndPoll(e,t,n){const r=await this.create(e,t,n);return await this.poll(e,r.id,n)}createAndStream(e,t,n){return tc.createAssistantStream(e,this._client.beta.threads.runs,t,n)}async poll(e,t,n){const r={...n?.headers,"X-Stainless-Poll-Helper":"true"};for(n?.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const{data:a,response:o}=await this.retrieve(e,t,{...n,headers:{...n?.headers,...r}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let e=5e3;if(n?.pollIntervalMs)e=n.pollIntervalMs;else{const t=o.headers.get("openai-poll-after-ms");if(t){const n=parseInt(t);isNaN(n)||(e=n)}}await bi(e);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,t,n){return tc.createAssistantStream(e,this._client.beta.threads.runs,t,n)}submitToolOutputs(e,t,n,r){return this._client.post(`/threads/${e}/runs/${t}/submit_tool_outputs`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers},stream:n.stream??!1})}async submitToolOutputsAndPoll(e,t,n,r){const a=await this.submitToolOutputs(e,t,n,r);return await this.poll(e,a.id,r)}submitToolOutputsStream(e,t,n,r){return tc.createToolAssistantStream(e,t,this._client.beta.threads.runs,n,r)}}class sc extends $i{}ic.RunsPage=sc,ic.Steps=ac,ic.RunStepsPage=oc;class lc extends ji{constructor(){super(...arguments),this.runs=new ic(this._client),this.messages=new nc(this._client)}create(e={},t){return di(e)?this.create({},e):this._client.post("/threads",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}retrieve(e,t){return this._client.get(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}update(e,t,n){return this._client.post(`/threads/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}del(e,t){return this._client.delete(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers},stream:e.stream??!1})}async createAndRunPoll(e,t){const n=await this.createAndRun(e,t);return await this.runs.poll(n.thread_id,n.id,t)}createAndRunStream(e,t){return tc.createThreadAssistantStream(e,this._client.beta.threads,t)}}lc.Runs=ic,lc.RunsPage=sc,lc.Messages=nc,lc.MessagesPage=rc;class cc extends ji{constructor(){super(...arguments),this.realtime=new Nl(this._client),this.chat=new Pl(this._client),this.assistants=new ys(this._client),this.threads=new lc(this._client)}}cc.Realtime=Nl,cc.Assistants=ys,cc.AssistantsPage=bs,cc.Threads=lc;class uc extends ji{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(`/batches/${e}`,t)}list(e={},t){return di(e)?this.list({},e):this._client.getAPIList("/batches",dc,{query:e,...t})}cancel(e,t){return this._client.post(`/batches/${e}/cancel`,t)}}class dc extends $i{}uc.BatchesPage=dc;class fc extends ji{create(e,t,n){return this._client.post(`/uploads/${e}/parts`,Zo({body:t,...n}))}}class hc extends ji{constructor(){super(...arguments),this.parts=new fc(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(`/uploads/${e}/cancel`,t)}complete(e,t,n){return this._client.post(`/uploads/${e}/complete`,{body:t,...n})}}function pc(e,t){const n=e.output.map(e=>{if("function_call"===e.type)return{...e,parsed_arguments:gc(t,e)};if("message"===e.type){const n=e.content.map(e=>"output_text"===e.type?{...e,parsed:mc(t,e.text)}:e);return{...e,content:n}}return e}),r=Object.assign({},e,{output:n});return Object.getOwnPropertyDescriptor(e,"output_text")||vc(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const e of r.output)if("message"===e.type)for(const t of e.content)if("output_text"===t.type&&null!==t.parsed)return t.parsed;return null}}),r}function mc(e,t){if("json_schema"!==e.text?.format?.type)return null;if("$parseRaw"in e.text?.format){const n=e.text?.format;return n.$parseRaw(t)}return JSON.parse(t)}function gc(e,t){const n=(r=e.tools??[],a=t.name,r.find(e=>"function"===e.type&&e.name===a));var r,a,o;return{...t,...t,parsed_arguments:(o=n,"auto-parseable-tool"===o?.$brand?n.$parseRaw(t.arguments):n?.strict?JSON.parse(t.arguments):null)}}function vc(e){const t=[];for(const n of e.output)if("message"===n.type)for(const e of n.content)"output_text"===e.type&&t.push(e.text);e.output_text=t.join("")}hc.Parts=fc;class yc extends ji{list(e,t={},n){return di(t)?this.list(e,{},t):this._client.getAPIList(`/responses/${e}/input_items`,Ac,{query:t,...n})}}var bc,wc,_c,xc,Ec,kc,Sc,Oc,Pc,Tc=function(e,t,n,r,a){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?a.call(e,n):a?a.value=n:t.set(e,n),n},Cc=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class Nc extends Us{constructor(e){super(),bc.add(this),wc.set(this,void 0),_c.set(this,void 0),xc.set(this,void 0),Tc(this,wc,e,"f")}static createResponse(e,t,n){const r=new Nc(t);return r._run(()=>r._createOrRetrieveResponse(e,t,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createOrRetrieveResponse(e,t,n){const r=n?.signal;let a;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),Cc(this,bc,"m",Ec).call(this);let o=null;"response_id"in t?(a=await e.responses.retrieve(t.response_id,{stream:!0},{...n,signal:this.controller.signal,stream:!0}),o=t.starting_after??null):a=await e.responses.create({...t,stream:!0},{...n,signal:this.controller.signal}),this._connected();for await(const e of a)Cc(this,bc,"m",kc).call(this,e,o);if(a.controller.signal?.aborted)throw new ko;return Cc(this,bc,"m",Sc).call(this)}[(wc=new WeakMap,_c=new WeakMap,xc=new WeakMap,bc=new WeakSet,Ec=function(){this.ended||Tc(this,_c,void 0,"f")},kc=function(e,t){if(this.ended)return;const n=(e,n)=>{(null==t||n.sequence_number>t)&&this._emit(e,n)},r=Cc(this,bc,"m",Oc).call(this,e);switch(n("event",e),e.type){case"response.output_text.delta":{const t=r.output[e.output_index];if(!t)throw new xo(`missing output at index ${e.output_index}`);if("message"===t.type){const r=t.content[e.content_index];if(!r)throw new xo(`missing content at index ${e.content_index}`);if("output_text"!==r.type)throw new xo(`expected content to be 'output_text', got ${r.type}`);n("response.output_text.delta",{...e,snapshot:r.text})}break}case"response.function_call_arguments.delta":{const t=r.output[e.output_index];if(!t)throw new xo(`missing output at index ${e.output_index}`);"function_call"===t.type&&n("response.function_call_arguments.delta",{...e,snapshot:t.arguments});break}default:n(e.type,e)}},Sc=function(){if(this.ended)throw new xo("stream has ended, this shouldn't happen");const e=Cc(this,_c,"f");if(!e)throw new xo("request ended without sending any events");Tc(this,_c,void 0,"f");const t=function(e,t){return function(e,t){return t&&function(e){return!!Ms(e.text?.format)}(t)?pc(e,t):{...e,output_parsed:null,output:e.output.map(e=>"function_call"===e.type?{...e,parsed_arguments:null}:"message"===e.type?{...e,content:e.content.map(e=>({...e,parsed:null}))}:e)}}(e,t)}(e,Cc(this,wc,"f"));return Tc(this,xc,t,"f"),t},Oc=function(e){let t=Cc(this,_c,"f");if(!t){if("response.created"!==e.type)throw new xo(`When snapshot hasn't been set yet, expected 'response.created' event, got ${e.type}`);return t=Tc(this,_c,e.response,"f"),t}switch(e.type){case"response.output_item.added":t.output.push(e.item);break;case"response.content_part.added":{const n=t.output[e.output_index];if(!n)throw new xo(`missing output at index ${e.output_index}`);"message"===n.type&&n.content.push(e.part);break}case"response.output_text.delta":{const n=t.output[e.output_index];if(!n)throw new xo(`missing output at index ${e.output_index}`);if("message"===n.type){const t=n.content[e.content_index];if(!t)throw new xo(`missing content at index ${e.content_index}`);if("output_text"!==t.type)throw new xo(`expected content to be 'output_text', got ${t.type}`);t.text+=e.delta}break}case"response.function_call_arguments.delta":{const n=t.output[e.output_index];if(!n)throw new xo(`missing output at index ${e.output_index}`);"function_call"===n.type&&(n.arguments+=e.delta);break}case"response.completed":Tc(this,_c,e.response,"f")}return t},Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("event",n=>{const r=t.shift();r?r.resolve(n):e.push(n)}),this.on("end",()=>{n=!0;for(const e of t)e.resolve(void 0);t.length=0}),this.on("abort",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),this.on("error",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((e,n)=>t.push({resolve:e,reject:n})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=Cc(this,xc,"f");if(!e)throw new xo("stream ended without producing a ChatCompletion");return e}}class jc extends ji{constructor(){super(...arguments),this.inputItems=new yc(this._client)}create(e,t){return this._client.post("/responses",{body:e,...t,stream:e.stream??!1})._thenUnwrap(e=>("object"in e&&"response"===e.object&&vc(e),e))}retrieve(e,t={},n){return this._client.get(`/responses/${e}`,{query:t,...n,stream:t?.stream??!1})}del(e,t){return this._client.delete(`/responses/${e}`,{...t,headers:{Accept:"*/*",...t?.headers}})}parse(e,t){return this._client.responses.create(e,t)._thenUnwrap(t=>pc(t,e))}stream(e,t){return Nc.createResponse(this._client,e,t)}cancel(e,t){return this._client.post(`/responses/${e}/cancel`,{...t,headers:{Accept:"*/*",...t?.headers}})}}class Ac extends $i{}jc.InputItems=yc;class Rc extends ji{retrieve(e,t,n,r){return this._client.get(`/evals/${e}/runs/${t}/output_items/${n}`,r)}list(e,t,n={},r){return di(n)?this.list(e,t,{},n):this._client.getAPIList(`/evals/${e}/runs/${t}/output_items`,Ic,{query:n,...r})}}class Ic extends $i{}Rc.OutputItemListResponsesPage=Ic;class $c extends ji{constructor(){super(...arguments),this.outputItems=new Rc(this._client)}create(e,t,n){return this._client.post(`/evals/${e}/runs`,{body:t,...n})}retrieve(e,t,n){return this._client.get(`/evals/${e}/runs/${t}`,n)}list(e,t={},n){return di(t)?this.list(e,{},t):this._client.getAPIList(`/evals/${e}/runs`,Dc,{query:t,...n})}del(e,t,n){return this._client.delete(`/evals/${e}/runs/${t}`,n)}cancel(e,t,n){return this._client.post(`/evals/${e}/runs/${t}`,n)}}class Dc extends $i{}$c.RunListResponsesPage=Dc,$c.OutputItems=Rc,$c.OutputItemListResponsesPage=Ic;class Lc extends ji{constructor(){super(...arguments),this.runs=new $c(this._client)}create(e,t){return this._client.post("/evals",{body:e,...t})}retrieve(e,t){return this._client.get(`/evals/${e}`,t)}update(e,t,n){return this._client.post(`/evals/${e}`,{body:t,...n})}list(e={},t){return di(e)?this.list({},e):this._client.getAPIList("/evals",zc,{query:e,...t})}del(e,t){return this._client.delete(`/evals/${e}`,t)}}class zc extends $i{}Lc.EvalListResponsesPage=zc,Lc.Runs=$c,Lc.RunListResponsesPage=Dc;class Uc extends ji{retrieve(e,t,n){return this._client.get(`/containers/${e}/files/${t}/content`,{...n,headers:{Accept:"application/binary",...n?.headers},__binaryResponse:!0})}}class Mc extends ji{constructor(){super(...arguments),this.content=new Uc(this._client)}create(e,t,n){return this._client.post(`/containers/${e}/files`,Zo({body:t,...n}))}retrieve(e,t,n){return this._client.get(`/containers/${e}/files/${t}`,n)}list(e,t={},n){return di(t)?this.list(e,{},t):this._client.getAPIList(`/containers/${e}/files`,Fc,{query:t,...n})}del(e,t,n){return this._client.delete(`/containers/${e}/files/${t}`,{...n,headers:{Accept:"*/*",...n?.headers}})}}class Fc extends $i{}Mc.FileListResponsesPage=Fc,Mc.Content=Uc;class Bc extends ji{constructor(){super(...arguments),this.files=new Mc(this._client)}create(e,t){return this._client.post("/containers",{body:e,...t})}retrieve(e,t){return this._client.get(`/containers/${e}`,t)}list(e={},t){return di(e)?this.list({},e):this._client.getAPIList("/containers",qc,{query:e,...t})}del(e,t){return this._client.delete(`/containers/${e}`,{...t,headers:{Accept:"*/*",...t?.headers}})}}class qc extends $i{}Bc.ContainerListResponsesPage=qc,Bc.Files=Mc,Bc.FileListResponsesPage=Fc;class Wc extends ii{constructor({baseURL:e=xi("OPENAI_BASE_URL"),apiKey:t=xi("OPENAI_API_KEY"),organization:n=xi("OPENAI_ORG_ID")??null,project:r=xi("OPENAI_PROJECT_ID")??null,...a}={}){if(void 0===t)throw new xo("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const o={apiKey:t,organization:n,project:r,...a,baseURL:e||"https://api.openai.com/v1"};if(!o.dangerouslyAllowBrowser&&"undefined"!=typeof window&&void 0!==window.document&&"undefined"!=typeof navigator)throw new xo("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew OpenAI({ apiKey, dangerouslyAllowBrowser: true });\n\nhttps://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety\n");super({baseURL:o.baseURL,timeout:o.timeout??6e5,httpAgent:o.httpAgent,maxRetries:o.maxRetries,fetch:o.fetch}),this.completions=new Ai(this),this.chat=new Ui(this),this.embeddings=new Mi(this),this.files=new Fi(this),this.images=new qi(this),this.audio=new Gi(this),this.moderations=new Ki(this),this.models=new Ji(this),this.fineTuning=new ls(this),this.graders=new us(this),this.vectorStores=new ms(this),this.beta=new cc(this),this.batches=new uc(this),this.uploads=new hc(this),this.responses=new jc(this),this.evals=new Lc(this),this.containers=new Bc(this),this._options=o,this.apiKey=t,this.organization=n,this.project=r}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return function(e,t={}){let n=e;const r=function(e=to){if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.encodeDotInKeys&&"boolean"!=typeof e.encodeDotInKeys)throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");const t=e.charset||to.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=qa;if(void 0!==e.format){if(!Ja.call(Wa,e.format))throw new TypeError("Unknown format option provided.");n=e.format}const r=Wa[n];let a,o=to.filter;if(("function"==typeof e.filter||Ya(e.filter))&&(o=e.filter),a=e.arrayFormat&&e.arrayFormat in Qa?e.arrayFormat:"indices"in e?e.indices?"indices":"repeat":to.arrayFormat,"commaRoundTrip"in e&&"boolean"!=typeof e.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const i=void 0===e.allowDots?1==!!e.encodeDotInKeys||to.allowDots:!!e.allowDots;return{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:to.addQueryPrefix,allowDots:i,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:to.allowEmptyArrays,arrayFormat:a,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:to.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:void 0===e.delimiter?to.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:to.encode,encodeDotInKeys:"boolean"==typeof e.encodeDotInKeys?e.encodeDotInKeys:to.encodeDotInKeys,encoder:"function"==typeof e.encoder?e.encoder:to.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:to.encodeValuesOnly,filter:o,format:n,formatter:r,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:to.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:to.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:to.strictNullHandling}}(t);let a,o;"function"==typeof r.filter?(o=r.filter,n=o("",n)):Ya(r.filter)&&(o=r.filter,a=o);const i=[];if("object"!=typeof n||null===n)return"";const s=Qa[r.arrayFormat],l="comma"===s&&r.commaRoundTrip;a||(a=Object.keys(n)),r.sort&&a.sort(r.sort);const c=new WeakMap;for(let e=0;e<a.length;++e){const t=a[e];r.skipNulls&&null===n[t]||Za(i,ro(n[t],t,s,l,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,c))}const u=i.join(r.delimiter);let d=!0===r.addQueryPrefix?"?":"";return r.charsetSentinel&&("iso-8859-1"===r.charset?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),u.length>0?d+u:""}(e,{arrayFormat:"brackets"})}}Pc=Wc,Wc.OpenAI=Pc,Wc.DEFAULT_TIMEOUT=6e5,Wc.OpenAIError=xo,Wc.APIError=Eo,Wc.APIConnectionError=So,Wc.APIConnectionTimeoutError=Oo,Wc.APIUserAbortError=ko,Wc.NotFoundError=No,Wc.ConflictError=jo,Wc.RateLimitError=Ro,Wc.BadRequestError=Po,Wc.AuthenticationError=To,Wc.InternalServerError=Io,Wc.PermissionDeniedError=Co,Wc.UnprocessableEntityError=Ao,Wc.toFile=Jo,Wc.fileFromPath=ho,Wc.Completions=Ai,Wc.Chat=Ui,Wc.ChatCompletionsPage=Li,Wc.Embeddings=Mi,Wc.Files=Fi,Wc.FileObjectsPage=Bi,Wc.Images=qi,Wc.Audio=Gi,Wc.Moderations=Ki,Wc.Models=Ji,Wc.ModelsPage=Qi,Wc.FineTuning=ls,Wc.Graders=us,Wc.VectorStores=ms,Wc.VectorStoresPage=gs,Wc.VectorStoreSearchResponsesPage=vs,Wc.Beta=cc,Wc.Batches=uc,Wc.BatchesPage=dc,Wc.Uploads=hc,Wc.Responses=jc,Wc.Evals=Lc,Wc.EvalListResponsesPage=zc,Wc.Containers=Bc,Wc.ContainerListResponsesPage=qc,new Set(["/completions","/chat/completions","/embeddings","/audio/transcriptions","/audio/translations","/audio/speech","/images/generations","/images/edits"]);var Hc="9a494fee-2e9f-4ed1-86fb-db69f24dc29e",Vc="https://ark.cn-beijing.volces.com/api/v3",Gc="doubao-seed-1-6-251015",Kc="medium";function Jc(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return Qc(c,"_invoke",function(n,r,a){var o,s,l,c=0,u=a||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,i}};function h(n,r){for(s=n,l=r,t=0;!d&&c&&!a&&t<u.length;t++){var a,o=u[t],h=f.p,p=o[2];n>3?(a=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((a=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(a||n>1)return i;throw d=!0,r}return function(a,u,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),s=u,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(c=2,o){if(s||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==i)break}catch(t){o=e,s=1,l=t}finally{c=1}}return{value:t,done:d}}}(n,a,o),!0),c}var i={};function s(){}function l(){}function c(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(Qc(t={},r,function(){return this}),t),d=c.prototype=s.prototype=Object.create(u);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,Qc(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=c,Qc(d,"constructor",c),Qc(c,"constructor",l),l.displayName="GeneratorFunction",Qc(c,a,"GeneratorFunction"),Qc(d),Qc(d,a,"Generator"),Qc(d,r,function(){return this}),Qc(d,"toString",function(){return"[object Generator]"}),(Jc=function(){return{w:o,m:f}})()}function Qc(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}Qc=function(e,t,n,r){function o(t,n){Qc(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},Qc(e,t,n,r)}function Yc(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function Xc(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){Yc(o,r,a,i,s,"next",e)}function s(e){Yc(o,r,a,i,s,"throw",e)}i(void 0)})}}var Zc=new Wc({apiKey:Hc,baseURL:Vc,dangerouslyAllowBrowser:!0}),eu=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n="";if(t&&t.preferences){var r=t.preferences;n="\n\n用户偏好设置（".concat(t.name,"）：\n- 旅行风格：").concat(r.travelStyle||"未指定","\n- 住宿类型：").concat(r.accommodationType||"未指定","\n- 预算范围：").concat(r.budgetRange||"未指定","\n- 常用出行人数：").concat(r.groupSize||"未指定","\n- 饮食偏好：").concat(r.foodPreferences||"未指定","\n- 活动类型：").concat(r.activityTypes?r.activityTypes.join("、"):"未指定","\n- 季节偏好：").concat(r.seasonPreferences?r.seasonPreferences.join("、"):"未指定","\n- 特殊需求：").concat(r.specialNeeds||"无","\n- 语言偏好：").concat(r.languagePreferences||"未指定","\n- 交通偏好：").concat(r.transportationPreferences||"未指定")}return"你是一位专业的中文旅行规划师，请根据用户的需求和偏好设置生成详细的中文旅行计划。\n\n用户需求：\n- 目的地：".concat(e.destination,"\n- 旅行天数：").concat(e.days,"天\n- 预算：").concat(e.budget,"元\n- 同行人数：").concat(e.travelers,"人\n- 旅行偏好：").concat(e.preferences,"\n- 特殊需求：").concat(e.specialNeeds||"无").concat(n,'\n\n请生成一个详细的中文旅行计划，包含以下信息：\n\n1. 行程概览\n2. 每日详细行程安排\n3. 推荐景点及游览时间\n4. 推荐餐厅及用餐安排\n5. 住宿推荐\n6. 交通安排\n7. 预算分配\n8. 注意事项和建议\n\n请以JSON格式返回结果，格式如下：\n{\n  "overview": {\n    "title": "旅行计划标题",\n    "summary": "行程概览",\n    "totalDays": 天数,\n    "estimatedCost": 预估总费用\n  },\n  "dailyPlans": [\n    {\n      "day": 1,\n      "date": "日期",\n      "title": "第1天标题",\n      "activities": [\n        {\n          "time": "时间",\n          "activity": "活动内容",\n          "location": "地点",\n          "duration": "持续时间",\n          "cost": "费用",\n          "description": "详细描述"\n        }\n      ],\n      "meals": [\n        {\n          "type": "早餐/午餐/晚餐",\n          "restaurant": "餐厅名称",\n          "location": "餐厅位置",\n          "cost": "费用",\n          "description": "推荐理由"\n        }\n      ],\n      "accommodation": {\n        "name": "住宿名称",\n        "location": "住宿位置",\n        "cost": "费用",\n        "description": "住宿描述"\n      }\n    }\n  ],\n  "recommendations": {\n    "attractions": [\n      {\n        "name": "景点名称",\n        "location": "位置",\n        "description": "景点描述",\n        "bestTime": "最佳游览时间",\n        "ticketPrice": "门票价格"\n      }\n    ],\n    "restaurants": [\n      {\n        "name": "餐厅名称",\n        "cuisine": "菜系",\n        "location": "位置",\n        "priceRange": "价格区间",\n        "description": "推荐理由"\n      }\n    ],\n    "accommodations": [\n      {\n        "name": "住宿名称",\n        "type": "住宿类型",\n        "location": "位置",\n        "priceRange": "价格区间",\n        "description": "住宿特色"\n      }\n    ]\n  },\n  "budget": {\n    "total": 总预算,\n    "breakdown": {\n      "accommodation": 住宿费用,\n      "transportation": 交通费用,\n      "meals": 餐饮费用,\n      "attractions": 景点门票,\n      "shopping": 购物费用,\n      "miscellaneous": 其他费用\n    }\n  },\n  "tips": [\n    "实用建议1",\n    "实用建议2",\n    "注意事项1",\n    "注意事项2"\n  ]\n}\n\n请确保返回的JSON格式正确，内容详细且实用，所有内容必须使用简体中文。')},tu=function(){var e=Xc(Jc().m(function e(t){var n,r,a,o,i,s,l,c=arguments;return Jc().w(function(e){for(;;)switch(e.p=e.n){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:null,e.p=1,console.log("🚀 开始生成旅行计划..."),console.log("📋 请求参数:",t),console.log("⚙️ 用户偏好设置:",n),console.log("🔑 API配置:",{baseURL:Vc,model:Gc,hasApiKey:!!Hc}),a=eu(t,n),console.log("📝 生成的提示词长度:",a.length),console.log("🌐 发送请求到火山引擎..."),e.n=2,Zc.chat.completions.create({messages:[{role:"user",content:a}],model:Gc,reasoning_effort:Kc,temperature:.7,max_tokens:4e3});case 2:if(o=e.v,console.log("✅ 收到响应:",o),i=null===(r=o.choices[0])||void 0===r||null===(r=r.message)||void 0===r?void 0:r.content){e.n=3;break}throw new Error("AI服务未返回有效响应");case 3:return e.p=3,s=JSON.parse(i),e.a(2,{success:!0,data:s,rawResponse:i});case 4:return e.p=4,e.v,e.a(2,{success:!0,data:{overview:{title:"AI生成的旅行计划",summary:i,totalDays:t.days,estimatedCost:t.budget},dailyPlans:[],recommendations:{},budget:{total:t.budget,breakdown:{}},tips:[]},rawResponse:i});case 5:return e.p=5,l=e.v,console.error("❌ AI旅行规划错误:",l),console.error("错误详情:",{message:l.message,status:l.status,code:l.code,type:l.type}),e.a(2,{success:!1,error:l.message||"AI服务调用失败",data:null,errorDetails:{status:l.status,code:l.code,type:l.type}});case 6:return e.a(2)}},e,null,[[3,4],[1,5]])}));return function(t){return e.apply(this,arguments)}}(),nu=function(){var e=Xc(Jc().m(function e(t){var n,r,a,o,i,s,l;return Jc().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,console.log("🎤 开始分析语音内容..."),console.log("📝 语音文本:",t),r='请分析以下语音输入内容，提取旅行相关信息并填充到表单字段中，所有内容必须使用简体中文。\n\n语音输入内容：\n"'.concat(t,'"\n\n请分析并提取以下信息：\n1. 目的地（destination）- 如果提到具体城市或景点\n2. 旅行天数（days）- 如果提到天数或行程时长\n3. 预算（budget）- 如果提到具体金额\n4. 同行人数（travelers）- 如果提到人数\n5. 旅行偏好（preferences）- 如果提到兴趣、爱好或偏好\n6. 出发日期（startDate）- 如果提到具体日期\n\n请以JSON格式返回分析结果：\n{\n  "destination": "提取的目的地，如果没有则返回空字符串",\n  "days": "提取的天数，如果没有则返回空字符串",\n  "budget": "提取的预算金额，如果没有则返回空字符串",\n  "travelers": "提取的同行人数，如果没有则返回空字符串",\n  "preferences": "提取的旅行偏好，如果没有则返回空字符串",\n  "startDate": "提取的出发日期，如果没有则返回空字符串",\n  "confidence": {\n    "destination": 0.8,\n    "days": 0.9,\n    "budget": 0.7,\n    "travelers": 0.6,\n    "preferences": 0.5,\n    "startDate": 0.3\n  },\n  "analysis": "对语音内容的简要分析说明"\n\n注意：\n- 只提取明确提到的信息，不要猜测或推断\n- 如果没有相关信息，对应字段返回空字符串\n- confidence字段表示提取信息的置信度（0-1之间）\n- 日期格式应为 YYYY-MM-DD\n- 预算和人数应为数字字符串\n- 所有内容必须使用简体中文}'),e.n=1,Zc.chat.completions.create({messages:[{role:"user",content:r}],model:Gc,reasoning_effort:Kc,temperature:.3,max_tokens:1e3});case 1:if(a=e.v,console.log("✅ 收到AI分析响应:",a),o=null===(n=a.choices[0])||void 0===n||null===(n=n.message)||void 0===n?void 0:n.content){e.n=2;break}throw new Error("AI服务未返回有效响应");case 2:return e.p=2,i=JSON.parse(o),console.log("📊 解析后的分析结果:",i),e.a(2,{success:!0,data:i,rawResponse:o});case 3:return e.p=3,s=e.v,console.error("JSON解析失败:",s),e.a(2,{success:!0,data:{destination:"",days:"",budget:"",travelers:"",preferences:"",startDate:"",confidence:{destination:0,days:0,budget:0,travelers:0,preferences:0,startDate:0},analysis:"语音内容分析失败，请手动填写表单"},rawResponse:o});case 4:return e.p=4,l=e.v,console.error("❌ AI语音分析错误:",l),e.a(2,{success:!1,error:l.message||"AI服务调用失败",data:null,errorDetails:{status:l.status,code:l.code,type:l.type}});case 5:return e.a(2)}},e,null,[[2,3],[0,4]])}));return function(t){return e.apply(this,arguments)}}(),ru=a(51),au={};function ou(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return iu(c,"_invoke",function(n,r,a){var o,s,l,c=0,u=a||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,i}};function h(n,r){for(s=n,l=r,t=0;!d&&c&&!a&&t<u.length;t++){var a,o=u[t],h=f.p,p=o[2];n>3?(a=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((a=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(a||n>1)return i;throw d=!0,r}return function(a,u,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),s=u,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(c=2,o){if(s||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==i)break}catch(t){o=e,s=1,l=t}finally{c=1}}return{value:t,done:d}}}(n,a,o),!0),c}var i={};function s(){}function l(){}function c(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(iu(t={},r,function(){return this}),t),d=c.prototype=s.prototype=Object.create(u);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,iu(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=c,iu(d,"constructor",c),iu(c,"constructor",l),l.displayName="GeneratorFunction",iu(c,a,"GeneratorFunction"),iu(d),iu(d,a,"Generator"),iu(d,r,function(){return this}),iu(d,"toString",function(){return"[object Generator]"}),(ou=function(){return{w:o,m:f}})()}function iu(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}iu=function(e,t,n,r){function o(t,n){iu(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},iu(e,t,n,r)}function su(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function lu(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){su(o,r,a,i,s,"next",e)}function s(e){su(o,r,a,i,s,"throw",e)}i(void 0)})}}function cu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,t)||uu(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uu(e,t){if(e){if("string"==typeof e)return du(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?du(e,t):void 0}}function du(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}au.styleTagTransform=wa(),au.setAttributes=ga(),au.insert=pa().bind(null,"head"),au.domAPI=fa(),au.insertStyleElement=ya(),ua()(ru.A,au),ru.A&&ru.A.locals&&ru.A.locals;const fu=function(e){var t=e.onResult,n=e.onStop,r=e.onError,a=cu((0,i.useState)(!1),2),o=a[0],s=a[1],l=cu((0,i.useState)(""),2),c=l[0],u=l[1],d=cu((0,i.useState)(0),2),f=d[0],h=d[1],p=cu((0,i.useState)(!1),2),m=p[0],g=p[1],v=cu((0,i.useState)(0),2),y=v[0],b=v[1],w=(0,i.useRef)(null),_=(0,i.useRef)(null),x=(0,i.useRef)(!1),E=(0,i.useRef)(0),k=(0,i.useRef)(null),S=(0,i.useRef)(null),O=(0,i.useRef)(null),P="195d8592",T="OTNjZmFlMDhmMDc4YmE2NGI3YTU1Mzhk",C="OTNjZmFlMDhmMDc4YmE2NGI3YTU1Mzhk",N=function(){return(new Date).toUTCString()},j=function(e,t){var n=new TextEncoder,r=n.encode(t);return crypto.subtle.importKey("raw",r,{name:"HMAC",hash:"SHA-256"},!1,["sign"]).then(function(t){var r=n.encode(e);return crypto.subtle.sign("HMAC",t,r)}).then(function(e){return btoa(String.fromCharCode.apply(String,function(e){if(Array.isArray(e))return du(e)}(t=new Uint8Array(e))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||uu(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()));var t})},A=function(){var e=lu(ou().m(function e(){var t,n,r,a,o,i,s,l;return ou().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,t="iat.xf-yun.com",n=N(),r="host: ".concat(t,"\ndate: ").concat(n,"\nGET /v1 HTTP/1.1"),e.n=1,j(r,C);case 1:return a=e.v,o='api_key="'.concat(T,'", algorithm="hmac-sha256", headers="host date request-line", signature="').concat(a,'"'),i=btoa(o),s="wss://".concat(t,"/v1?authorization=").concat(i,"&date=").concat(encodeURIComponent(n),"&host=").concat(t),e.a(2,s);case 2:throw e.p=2,l=e.v,console.error("生成授权URL失败:",l),new Error("生成授权URL失败: "+l.message);case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),R=function(){return new Promise(function(e,t){try{if(!P||!T||!C)throw new Error("请先配置讯飞API凭证");A().then(function(n){_.current=new WebSocket(n),_.current.onopen=function(){E.current=0,I(),e()},_.current.onmessage=function(e){try{var t=JSON.parse(e.data);D(t)}catch(e){console.error("解析讯飞返回数据失败:",e)}},_.current.onerror=function(e){console.error("WebSocket错误:",e);var n="连接讯飞服务失败: "+(e.message||"未知错误");u(n),r&&r(n),t(e)},_.current.onclose=function(){x.current||z()}}).catch(function(e){console.error("生成授权URL失败:",e),t(e)})}catch(e){console.error("连接讯飞服务失败:",e);var n="连接讯飞服务失败: "+(e.message||"未知错误");u(n),r&&r(n),t(e)}})},I=function(){if(_.current&&_.current.readyState===WebSocket.OPEN){var e={header:{app_id:P,status:0},parameter:{iat:{domain:"slm",language:"zh_cn",accent:"mandarin",eos:6e3,vinfo:1,dwa:"wpgs",result:{encoding:"utf8",compress:"raw",format:"json"}}},payload:{audio:{encoding:"raw",sample_rate:16e3,channels:1,bit_depth:16,seq:1,status:0,audio:""}}};_.current.send(JSON.stringify(e))}},$=function(e){if(_.current&&_.current.readyState===WebSocket.OPEN){E.current++;var t={header:{app_id:P,status:1},payload:{audio:{encoding:"raw",sample_rate:16e3,channels:1,bit_depth:16,seq:E.current,status:1,audio:e}}};_.current.send(JSON.stringify(t))}},D=function(e){if(e.header&&0!==e.header.code){console.error("讯飞识别错误:",e.header.message);var a="语音识别错误: "+e.header.message;return u(a),void(r&&r(a))}if(e.payload&&e.payload.result&&e.payload.result.text)try{var o=atob(e.payload.result.text),i=JSON.parse(o);if(i.ws&&Array.isArray(i.ws)){var s="";if(i.ws.forEach(function(e){e.cw&&Array.isArray(e.cw)&&e.cw[0]&&e.cw[0].w&&(s+=e.cw[0].w)}),s){var l="";try{for(var c=new Uint8Array(s.length),d=0;d<s.length;d++)c[d]=255&s.charCodeAt(d);l=new TextDecoder("utf-8").decode(c)}catch(e){console.error("UTF-8解码失败:",e),l=s}t&&t(l,!0)}}else if(i.cn&&i.cn.st&&i.cn.st.rt){var f="";if(i.cn.st.rt.forEach(function(e){e.ws&&e.ws.forEach(function(e){e.cw&&e.cw[0]&&e.cw[0].w&&(f+=e.cw[0].w)})}),f){var h="";try{for(var p=new Uint8Array(f.length),m=0;m<f.length;m++)p[m]=255&f.charCodeAt(m);h=new TextDecoder("utf-8").decode(p)}catch(e){console.error("UTF-8解码失败:",e),h=f}t&&t(h,!0)}}}catch(e){console.error("解析识别结果失败:",e)}e.header&&2===e.header.status&&(z(),n&&n())},L=function(){var e=lu(ou().m(function e(){var t,n,a;return ou().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,u(""),x.current=!1,e.n=1,navigator.mediaDevices.getUserMedia({audio:{sampleRate:16e3,channelCount:1,sampleSize:16}});case 1:if(t=e.v,O.current=t,w.current=new(window.AudioContext||window.webkitAudioContext)({sampleRate:16e3}),"suspended"!==w.current.state){e.n=2;break}return e.n=2,w.current.resume();case 2:return S.current=w.current.createMediaStreamSource(t),k.current=w.current.createScriptProcessor(4096,1,1),k.current.onaudioprocess=function(e){if(!x.current&&_.current&&_.current.readyState===WebSocket.OPEN){for(var t=e.inputBuffer.getChannelData(0),n=0,r=0;r<t.length;r++){var a=Math.abs(t[r]);n=Math.max(n,a)}h(100*n);for(var o=new Int16Array(t.length),i=0;i<t.length;i++){var s=Math.max(-1,Math.min(1,t[i]));o[i]=Math.round(32767*s)}for(var l=new Uint8Array(o.buffer),c="",u=0;u<l.byteLength;u++)c+=String.fromCharCode(l[u]);var d=btoa(c);$(d)}},S.current.connect(k.current),k.current.connect(w.current.destination),e.n=3,R();case 3:s(!0),e.n=5;break;case 4:e.p=4,a=e.v,console.error("启动录音失败:",a),n="启动录音失败: "+(a.message||"未知错误"),u(n),r&&r(n),z();case 5:return e.a(2)}},e,null,[[0,4]])}));return function(){return e.apply(this,arguments)}}(),z=function(){x.current=!0,function(){if(_.current&&_.current.readyState===WebSocket.OPEN){E.current++;var e={header:{app_id:P,status:2},payload:{audio:{encoding:"raw",sample_rate:16e3,channels:1,bit_depth:16,seq:E.current,status:2,audio:""}}};_.current.send(JSON.stringify(e))}}(),k.current&&(k.current.disconnect(),k.current=null),S.current&&(S.current.disconnect(),S.current=null),O.current&&(O.current.getTracks().forEach(function(e){e.stop()}),O.current=null),w.current&&(w.current.close(),w.current=null),_.current&&(_.current.close(),_.current=null),s(!1),n&&n()},U=function(){var e=lu(ou().m(function e(){var t,n,r,a,o;return ou().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,g(!0),b(0),e.n=1,navigator.mediaDevices.getUserMedia({audio:{sampleRate:16e3,channelCount:1,sampleSize:16}});case 1:t=e.v,n=new(window.AudioContext||window.webkitAudioContext)({sampleRate:16e3}),r=n.createMediaStreamSource(t),(a=n.createScriptProcessor(4096,1,1)).onaudioprocess=function(e){for(var t=e.inputBuffer.getChannelData(0),n=0,r=0;r<t.length;r++)n=Math.max(n,Math.abs(t[r]));b(100*n)},r.connect(a),a.connect(n.destination),setTimeout(function(){a.disconnect(),r.disconnect(),t.getTracks().forEach(function(e){return e.stop()}),n.close(),g(!1),b(0)},5e3),e.n=3;break;case 2:e.p=2,o=e.v,console.error("麦克风测试失败:",o),u("麦克风测试失败: "+o.message),g(!1),b(0);case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}();return i.createElement("div",{className:"voice-input-wrapper"},i.createElement("div",{className:"voice-controls"},i.createElement("button",{type:"button",className:"voice-input-button ".concat(o?"listening":""),onClick:function(){o?z():L()}},o?"⏹️ 停止录音":"🎤 语音输入(讯飞)"),i.createElement("button",{type:"button",className:"test-microphone-button",onClick:U,disabled:o},"🔧 测试麦克风")),o&&i.createElement("div",{className:"audio-level-indicator"},i.createElement("div",{className:"audio-level-label"},"🎤 音量: ",f.toFixed(0),"%",f>5?" 🔊":f>1?" 🔉":" 🔈"),i.createElement("div",{className:"audio-level-bar"},i.createElement("div",{className:"audio-level-fill",style:{width:"".concat(Math.min(3*f,100),"%"),backgroundColor:f>10?"#4CAF50":f>5?"#FFC107":"#FF5722"}}))),m&&i.createElement("div",{className:"audio-level-indicator test-mic-indicator"},i.createElement("div",{className:"audio-level-label"},"🔧 测试麦克风: ",y.toFixed(0),"%",y>5?" 🔊":y>1?" 🔉":" 🔈"),i.createElement("div",{className:"audio-level-bar"},i.createElement("div",{className:"audio-level-fill",style:{width:"".concat(Math.min(3*y,100),"%"),backgroundColor:y>10?"#4CAF50":y>5?"#FFC107":"#FF5722"}}))),c&&i.createElement("div",{className:"voice-input-error"},c,(c.includes("凭证")||c.includes("APP ID"))&&i.createElement("div",{className:"permission-help"},"请在VoiceInput.js文件顶部的XF_CONFIG对象中配置正确的讯飞APP ID、API Key和API Secret")),o&&i.createElement("div",{className:"voice-recording-indicator"},"正在录音...请继续说话"))};function hu(e){return hu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hu(e)}function pu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function mu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pu(Object(n),!0).forEach(function(t){gu(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pu(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function gu(e,t,n){return(t=function(e){var t=function(e){if("object"!=hu(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=hu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==hu(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vu(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return yu(c,"_invoke",function(n,r,a){var o,s,l,c=0,u=a||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,i}};function h(n,r){for(s=n,l=r,t=0;!d&&c&&!a&&t<u.length;t++){var a,o=u[t],h=f.p,p=o[2];n>3?(a=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((a=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(a||n>1)return i;throw d=!0,r}return function(a,u,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),s=u,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(c=2,o){if(s||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==i)break}catch(t){o=e,s=1,l=t}finally{c=1}}return{value:t,done:d}}}(n,a,o),!0),c}var i={};function s(){}function l(){}function c(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(yu(t={},r,function(){return this}),t),d=c.prototype=s.prototype=Object.create(u);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,yu(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=c,yu(d,"constructor",c),yu(c,"constructor",l),l.displayName="GeneratorFunction",yu(c,a,"GeneratorFunction"),yu(d),yu(d,a,"Generator"),yu(d,r,function(){return this}),yu(d,"toString",function(){return"[object Generator]"}),(vu=function(){return{w:o,m:f}})()}function yu(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}yu=function(e,t,n,r){function o(t,n){yu(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},yu(e,t,n,r)}function bu(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function wu(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){bu(o,r,a,i,s,"next",e)}function s(e){bu(o,r,a,i,s,"throw",e)}i(void 0)})}}function _u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return xu(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xu(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const Eu=function(e){var t,n,r,a,o=e.user,s=e.onPlanCreated,l=_u((0,i.useState)({destination:"",days:"",budget:"",travelers:"",preferences:"",specialNeeds:"",startDate:""}),2),c=l[0],u=l[1],d=_u((0,i.useState)(!1),2),f=d[0],h=d[1],p=_u((0,i.useState)(""),2),m=p[0],g=p[1],v=_u((0,i.useState)(null),2),y=v[0],b=v[1],w=_u((0,i.useState)(""),2),_=w[0],x=w[1],E=_u((0,i.useState)(""),2),k=E[0],S=E[1],O=(0,i.useRef)(""),P=_u((0,i.useState)(!1),2),T=P[0],C=P[1],N=_u((0,i.useState)([]),2),j=N[0],A=N[1],R=_u((0,i.useState)(null),2),I=R[0],$=R[1];(0,i.useEffect)(function(){D()},[o]);var D=function(){var e=wu(vu().m(function e(){var t,n,r,a;return vu().w(function(e){for(;;)switch(e.p=e.n){case 0:if(null!=o&&o.id){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,la.getByUser(o.id);case 2:t=e.v,n=t.data,(r=t.error)?console.error("获取偏好设置失败:",r):(A(n||[]),$(null)),e.n=4;break;case 3:e.p=3,a=e.v,console.error("获取偏好设置时发生错误:",a);case 4:return e.a(2)}},e,null,[[1,3]])}));return function(){return e.apply(this,arguments)}}(),L=function(e){u(mu(mu({},c),{},gu({},e.target.name,e.target.value))),g("")},z=function(){var e=wu(vu().m(function e(t){var n,r;return vu().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t.preventDefault(),h(!0),g(""),b(null),c.destination&&c.days&&c.budget&&c.travelers){e.n=1;break}return g("请填写所有必填字段"),h(!1),e.a(2);case 1:return e.p=1,e.n=2,tu(c,I);case 2:(n=e.v).success?b(n.data):g(n.error||"生成旅行计划失败"),e.n=4;break;case 3:e.p=3,r=e.v,g("生成旅行计划时发生错误"),console.error("Travel plan generation error:",r);case 4:return e.p=4,h(!1),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=wu(vu().m(function e(){var t,n,r,a,i;return vu().w(function(e){for(;;)switch(e.p=e.n){case 0:if(y&&o){e.n=1;break}return e.a(2);case 1:return h(!0),e.p=2,t={user_id:o.id,destination:c.destination,start_date:c.startDate||(new Date).toISOString().split("T")[0],end_date:new Date(new Date(c.startDate||new Date).getTime()+24*(c.days-1)*60*60*1e3).toISOString().split("T")[0],budget:parseInt(c.budget),travelers:parseInt(c.travelers),preferences:c.preferences,special_needs:c.specialNeeds,status:"planning",plan_details:y,ai_generated:!0,created_at:(new Date).toISOString()},e.n=3,sa.create(t);case 3:n=e.v,r=n.data,(a=n.error)?g("保存旅行计划失败: "+a.message):(g(""),s&&s(r),u({destination:"",days:"",budget:"",travelers:"",preferences:"",specialNeeds:"",startDate:""}),b(null),alert("旅行计划已保存！")),e.n=5;break;case 4:e.p=4,i=e.v,g("保存旅行计划时发生错误"),console.error("Save plan error:",i);case 5:return e.p=5,h(!1),e.f(5);case 6:return e.a(2)}},e,null,[[2,4,5,6]])}));return function(){return e.apply(this,arguments)}}(),M=function(){var e=wu(vu().m(function e(){var t,n,r,a,o;return vu().w(function(e){for(;;)switch(e.p=e.n){case 0:if(k.trim()){e.n=1;break}return g("请先进行语音输入"),e.a(2);case 1:return C(!0),g(""),e.p=2,e.n=3,nu(k);case 3:(t=e.v).success&&t.data?(n=t.data,r=mu({},c),a=[],n.destination&&n.confidence.destination>.7&&(r.destination=n.destination,a.push("目的地")),n.days&&n.confidence.days>.7&&(r.days=n.days,a.push("旅行天数")),n.budget&&n.confidence.budget>.7&&(r.budget=n.budget,a.push("预算")),n.travelers&&n.confidence.travelers>.6&&(r.travelers=n.travelers,a.push("同行人数")),n.preferences&&n.confidence.preferences>.5&&(r.preferences=n.preferences,a.push("旅行偏好")),n.startDate&&n.confidence.startDate>.6&&(r.startDate=n.startDate,a.push("出发日期")),u(r),a.length>0?g("✅ AI已成功填充以下字段：".concat(a.join("、"))):g("⚠️ AI未能从语音内容中提取到足够的信息，请手动填写表单")):g("AI分析失败: "+(t.error||"未知错误")),e.n=5;break;case 4:e.p=4,o=e.v,console.error("AI分析错误:",o),g("AI分析时发生错误: "+o.message);case 5:return e.p=5,C(!1),e.f(5);case 6:return e.a(2)}},e,null,[[2,4,5,6]])}));return function(){return e.apply(this,arguments)}}();return i.createElement("div",{className:"travel-planner-container"},i.createElement("div",{className:"travel-planner-card"},i.createElement("div",{className:"planner-header"},i.createElement("h1",null,"🤖 AI智能旅行规划师"),i.createElement("p",null,"告诉我你的旅行需求，AI将为你生成个性化的旅行计划")),i.createElement("form",{onSubmit:z,className:"planner-form"},m&&i.createElement("div",{className:"error-message"},m),j.length>0&&i.createElement("div",{className:"preferences-quick-select"},i.createElement("h3",null,"⚙️ 快速应用偏好设置"),i.createElement("p",null,"选择您保存的偏好设置，快速填充表单信息"),i.createElement("div",{className:"preferences-buttons"},j.map(function(e){return i.createElement("button",{key:e.id,type:"button",className:"preference-quick-button ".concat((null==I?void 0:I.id)===e.id?"selected":""),onClick:function(){return function(e){if(e&&e.preferences){var t=e.preferences,n=mu({},c);if(t.travelStyle&&(n.preferences=t.travelStyle),t.budgetRange){var r=t.budgetRange.match(/(\d+)/);r&&(n.budget=r[1])}if(t.groupSize){var a=t.groupSize.match(/(\d+)/);a&&(n.travelers=a[1])}if(t.specialNeeds&&(n.specialNeeds=t.specialNeeds),t.foodPreferences){var o=n.preferences?n.preferences+"；":"";n.preferences=o+"饮食偏好：".concat(t.foodPreferences)}if(t.activityTypes&&t.activityTypes.length>0){var i=n.preferences?n.preferences+"；":"";n.preferences=i+"喜欢的活动：".concat(t.activityTypes.join("、"))}if(t.seasonPreferences&&t.seasonPreferences.length>0){var s=n.preferences?n.preferences+"；":"";n.preferences=s+"偏好季节：".concat(t.seasonPreferences.join("、"))}u(n),$(e),g('✅ 已应用偏好设置"'.concat(e.name,'"'))}}(e)}},e.is_default&&i.createElement("span",{className:"default-indicator"},"⭐"),e.name)})),I&&i.createElement("div",{className:"selected-preference-info"},i.createElement("p",null,"✅ 当前应用：",i.createElement("strong",null,I.name)),I.description&&i.createElement("p",{className:"preference-description"},I.description))),i.createElement("div",{className:"voice-input-section"},i.createElement("h3",null,"🎤 语音输入旅行信息"),i.createElement("p",null,"您可以通过语音输入目的地、日期、预算、同行人数和旅行偏好"),i.createElement("div",{className:"voice-input-container"},i.createElement(fu,{onResult:function(e,t){x(e),e&&e.trim()&&(O.current=e)},onError:function(e){g("语音识别错误: "+e)},onStop:function(){var e=O.current||_;e&&e.trim()&&S(function(t){return t+(t?" ":"")+e}),x(""),O.current=""}}),_&&i.createElement("div",{className:"voice-text-preview"},"🎤 识别中: ",_)),i.createElement("div",{className:"voice-text-display"},i.createElement("label",{htmlFor:"voiceInputText"},"语音输入内容："),i.createElement("textarea",{id:"voiceInputText",value:k,onChange:function(e){return S(e.target.value)},rows:"3",placeholder:"语音识别的内容将显示在这里，您也可以手动编辑...",className:"voice-textarea"}),i.createElement("div",{className:"voice-text-actions"},i.createElement("button",{type:"button",onClick:function(){return S("")},className:"clear-voice-button"},"🗑️ 清空"),i.createElement("button",{type:"button",onClick:M,className:"analyze-voice-button",disabled:!k.trim()||T},T?"🤖 AI分析中...":"🤖 AI分析填充表单")))),i.createElement("div",{className:"form-row"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"destination"},"目的地 *"),i.createElement("input",{type:"text",id:"destination",name:"destination",value:c.destination,onChange:L,required:!0,placeholder:"例如：日本东京、法国巴黎、泰国曼谷"})),i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"days"},"旅行天数 *"),i.createElement("input",{type:"number",id:"days",name:"days",value:c.days,onChange:L,required:!0,min:"1",max:"30",placeholder:"例如：5"}))),i.createElement("div",{className:"form-row"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"budget"},"预算 (元) *"),i.createElement("input",{type:"number",id:"budget",name:"budget",value:c.budget,onChange:L,required:!0,min:"1000",placeholder:"例如：10000"})),i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"travelers"},"同行人数 *"),i.createElement("input",{type:"number",id:"travelers",name:"travelers",value:c.travelers,onChange:L,required:!0,min:"1",max:"20",placeholder:"例如：2"}))),i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"startDate"},"出发日期"),i.createElement("input",{type:"date",id:"startDate",name:"startDate",value:c.startDate,onChange:L,min:(new Date).toISOString().split("T")[0]})),i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"preferences"},"旅行偏好"),i.createElement("textarea",{id:"preferences",name:"preferences",value:c.preferences,onChange:L,rows:"3",placeholder:"例如：喜欢美食和动漫，带孩子，喜欢历史文化，偏好自然风光等"})),i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"specialNeeds"},"特殊需求"),i.createElement("textarea",{id:"specialNeeds",name:"specialNeeds",value:c.specialNeeds,onChange:L,rows:"2",placeholder:"例如：需要无障碍设施、素食要求、语言翻译等"})),i.createElement("button",{type:"submit",className:"generate-button",disabled:f},f?"🤖 AI正在规划中...":"✨ 生成旅行计划")),y&&i.createElement("div",{className:"generated-plan"},i.createElement("div",{className:"plan-header"},i.createElement("h2",null,"🎉 你的专属旅行计划已生成！"),i.createElement("div",{className:"plan-actions"},i.createElement("button",{onClick:U,className:"save-button",disabled:f},f?"保存中...":"💾 保存计划"),i.createElement("button",{onClick:function(){return b(null)},className:"regenerate-button"},"🔄 重新生成"))),i.createElement("div",{className:"plan-overview"},i.createElement("h3",null,"📋 行程概览"),i.createElement("div",{className:"overview-grid"},i.createElement("div",{className:"overview-item"},i.createElement("span",{className:"label"},"目的地："),i.createElement("span",{className:"value"},(null===(t=y.overview)||void 0===t?void 0:t.title)||c.destination)),i.createElement("div",{className:"overview-item"},i.createElement("span",{className:"label"},"天数："),i.createElement("span",{className:"value"},(null===(n=y.overview)||void 0===n?void 0:n.totalDays)||c.days,"天")),i.createElement("div",{className:"overview-item"},i.createElement("span",{className:"label"},"预算："),i.createElement("span",{className:"value"},"¥",(null===(r=y.overview)||void 0===r?void 0:r.estimatedCost)||c.budget)),i.createElement("div",{className:"overview-item"},i.createElement("span",{className:"label"},"人数："),i.createElement("span",{className:"value"},c.travelers,"人"))),(null===(a=y.overview)||void 0===a?void 0:a.summary)&&i.createElement("div",{className:"plan-summary"},i.createElement("p",null,y.overview.summary))),y.dailyPlans&&y.dailyPlans.length>0&&i.createElement("div",{className:"daily-plans"},i.createElement("h3",null,"🗓️ 每日行程安排"),y.dailyPlans.map(function(e,t){return i.createElement("div",{key:t,className:"day-plan"},i.createElement("h4",null,"第",e.day,"天 - ",e.title),e.activities&&e.activities.length>0&&i.createElement("div",{className:"activities"},i.createElement("h5",null,"📅 活动安排"),e.activities.map(function(e,t){return i.createElement("div",{key:t,className:"activity"},i.createElement("div",{className:"activity-time"},e.time),i.createElement("div",{className:"activity-content"},i.createElement("div",{className:"activity-title"},e.activity),i.createElement("div",{className:"activity-location"},"📍 ",e.location),e.description&&i.createElement("div",{className:"activity-description"},e.description)))})))})),y.recommendations&&i.createElement("div",{className:"recommendations"},i.createElement("h3",null,"🌟 推荐清单"),y.recommendations.attractions&&i.createElement("div",{className:"recommendation-section"},i.createElement("h4",null,"🏛️ 必游景点"),i.createElement("div",{className:"recommendation-grid"},y.recommendations.attractions.map(function(e,t){return i.createElement("div",{key:t,className:"recommendation-item"},i.createElement("h5",null,e.name),i.createElement("p",null,e.description),i.createElement("div",{className:"recommendation-meta"},i.createElement("span",null,"📍 ",e.location),e.ticketPrice&&i.createElement("span",null,"💰 ",e.ticketPrice)))}))),y.recommendations.restaurants&&i.createElement("div",{className:"recommendation-section"},i.createElement("h4",null,"🍽️ 美食推荐"),i.createElement("div",{className:"recommendation-grid"},y.recommendations.restaurants.map(function(e,t){return i.createElement("div",{key:t,className:"recommendation-item"},i.createElement("h5",null,e.name),i.createElement("p",null,e.description),i.createElement("div",{className:"recommendation-meta"},i.createElement("span",null,"📍 ",e.location),i.createElement("span",null,"🍴 ",e.cuisine)))})))),y.tips&&y.tips.length>0&&i.createElement("div",{className:"travel-tips"},i.createElement("h3",null,"💡 实用建议"),i.createElement("ul",null,y.tips.map(function(e,t){return i.createElement("li",{key:t},e)}))))))};var ku=a(863),Su={};function Ou(e){return Ou="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ou(e)}function Pu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Tu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pu(Object(n),!0).forEach(function(t){Cu(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pu(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Cu(e,t,n){return(t=function(e){var t=function(e){if("object"!=Ou(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Ou(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ou(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,t)||ju(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ju(e,t){if(e){if("string"==typeof e)return Au(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Au(e,t):void 0}}function Au(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Su.styleTagTransform=wa(),Su.setAttributes=ga(),Su.insert=pa().bind(null,"head"),Su.domAPI=fa(),Su.insertStyleElement=ya(),ua()(ku.A,Su),ku.A&&ku.A.locals&&ku.A.locals;const Ru=function(e){var t=e.planId,n=e.planDetails,r=Nu((0,i.useState)([]),2),a=r[0],o=r[1],s=Nu((0,i.useState)({category:"",description:"",amount:"",date:(new Date).toISOString().split("T")[0]}),2),l=s[0],c=s[1],u=Nu((0,i.useState)(!1),2),d=u[0],f=u[1],h=Nu((0,i.useState)(null),2),p=h[0],m=h[1];(0,i.useEffect)(function(){var e=localStorage.getItem("expenses_".concat(t));e&&o(JSON.parse(e))},[t]);var g=function(e){o(e),localStorage.setItem("expenses_".concat(t),JSON.stringify(e))},v=a.reduce(function(e,t){return e+t.amount},0),y=a.reduce(function(e,t){return e[t.category]||(e[t.category]=0),e[t.category]+=t.amount,e},{});return i.createElement("div",{className:"expense-tracker"},i.createElement("div",{className:"expense-header"},i.createElement("h3",null,"💰 旅行记账"),i.createElement("div",{className:"expense-summary"},i.createElement("div",{className:"total-expense"},i.createElement("span",{className:"label"},"总支出："),i.createElement("span",{className:"amount"},"¥",v.toFixed(2))),(null==n?void 0:n.budget)&&i.createElement("div",{className:"budget-info"},i.createElement("span",{className:"label"},"预算："),i.createElement("span",{className:"amount"},"¥",n.budget),i.createElement("span",{className:"remaining"},"剩余：¥",(n.budget-v).toFixed(2))))),Object.keys(y).length>0&&i.createElement("div",{className:"category-stats"},i.createElement("h4",null,"📊 支出分类"),i.createElement("div",{className:"stats-grid"},Object.entries(y).map(function(e){var t=Nu(e,2),n=t[0],r=t[1];return i.createElement("div",{key:n,className:"stat-item"},i.createElement("span",{className:"category"},n),i.createElement("span",{className:"amount"},"¥",r.toFixed(2)))}))),i.createElement("div",{className:"expense-actions"},i.createElement("button",{onClick:function(){return f(!0)},className:"add-expense-button"},"➕ 添加支出")),d&&i.createElement("div",{className:"expense-form"},i.createElement("h4",null,p?"编辑支出":"添加支出"),i.createElement("form",{onSubmit:p?function(e){if(e.preventDefault(),l.category&&l.description&&l.amount){var t=a.map(function(e){return e.id===p.id?Tu(Tu(Tu({},e),l),{},{amount:parseFloat(l.amount)}):e});g(t),f(!1),m(null),c({category:"",description:"",amount:"",date:(new Date).toISOString().split("T")[0]})}else alert("请填写所有必填字段")}:function(e){if(e.preventDefault(),l.category&&l.description&&l.amount){var t=Tu(Tu({id:Date.now()},l),{},{amount:parseFloat(l.amount)}),n=[].concat(function(e){if(Array.isArray(e))return Au(e)}(r=a)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||ju(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[t]);g(n),c({category:"",description:"",amount:"",date:(new Date).toISOString().split("T")[0]}),f(!1)}else alert("请填写所有必填字段");var r}},i.createElement("div",{className:"form-row"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"category"},"类别 *"),i.createElement("select",{id:"category",value:l.category,onChange:function(e){return c(Tu(Tu({},l),{},{category:e.target.value}))},required:!0},i.createElement("option",{value:""},"请选择"),["住宿","餐饮","交通","门票","购物","娱乐","其他"].map(function(e){return i.createElement("option",{key:e,value:e},e)}))),i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"amount"},"金额 (元) *"),i.createElement("input",{type:"number",id:"amount",value:l.amount,onChange:function(e){return c(Tu(Tu({},l),{},{amount:e.target.value}))},required:!0,min:"0",step:"0.01",placeholder:"0.00"}))),i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"description"},"描述 *"),i.createElement("input",{type:"text",id:"description",value:l.description,onChange:function(e){return c(Tu(Tu({},l),{},{description:e.target.value}))},required:!0,placeholder:"例如：酒店住宿、午餐、地铁票等"})),i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"date"},"日期"),i.createElement("input",{type:"date",id:"date",value:l.date,onChange:function(e){return c(Tu(Tu({},l),{},{date:e.target.value}))}})),i.createElement("div",{className:"form-actions"},i.createElement("button",{type:"submit",className:"save-button"},p?"💾 更新":"💾 保存"),i.createElement("button",{type:"button",onClick:function(){f(!1),m(null),c({category:"",description:"",amount:"",date:(new Date).toISOString().split("T")[0]})},className:"cancel-button"},"取消")))),i.createElement("div",{className:"expense-list"},i.createElement("h4",null,"📝 支出记录"),0===a.length?i.createElement("div",{className:"empty-state"},i.createElement("p",null,'还没有支出记录，点击"添加支出"开始记账吧！')):i.createElement("div",{className:"expense-items"},a.sort(function(e,t){return new Date(t.date)-new Date(e.date)}).map(function(e){return i.createElement("div",{key:e.id,className:"expense-item"},i.createElement("div",{className:"expense-info"},i.createElement("div",{className:"expense-main"},i.createElement("span",{className:"category"},e.category),i.createElement("span",{className:"description"},e.description)),i.createElement("div",{className:"expense-details"},i.createElement("span",{className:"amount"},"¥",e.amount.toFixed(2)),i.createElement("span",{className:"date"},e.date))),i.createElement("div",{className:"expense-actions"},i.createElement("button",{onClick:function(){return function(e){m(e),c({category:e.category,description:e.description,amount:e.amount.toString(),date:e.date}),f(!0)}(e)},className:"edit-button"},"✏️"),i.createElement("button",{onClick:function(){return function(e){if(window.confirm("确定要删除这笔支出吗？")){var t=a.filter(function(t){return t.id!==e});g(t)}}(e.id)},className:"delete-button"},"🗑️")))}))))};var Iu=a(73),$u={};function Du(e){return Du="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Du(e)}function Lu(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return zu(c,"_invoke",function(n,r,a){var o,s,l,c=0,u=a||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,i}};function h(n,r){for(s=n,l=r,t=0;!d&&c&&!a&&t<u.length;t++){var a,o=u[t],h=f.p,p=o[2];n>3?(a=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((a=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(a||n>1)return i;throw d=!0,r}return function(a,u,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),s=u,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(c=2,o){if(s||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==i)break}catch(t){o=e,s=1,l=t}finally{c=1}}return{value:t,done:d}}}(n,a,o),!0),c}var i={};function s(){}function l(){}function c(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(zu(t={},r,function(){return this}),t),d=c.prototype=s.prototype=Object.create(u);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,zu(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=c,zu(d,"constructor",c),zu(c,"constructor",l),l.displayName="GeneratorFunction",zu(c,a,"GeneratorFunction"),zu(d),zu(d,a,"Generator"),zu(d,r,function(){return this}),zu(d,"toString",function(){return"[object Generator]"}),(Lu=function(){return{w:o,m:f}})()}function zu(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}zu=function(e,t,n,r){function o(t,n){zu(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},zu(e,t,n,r)}function Uu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Mu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uu(Object(n),!0).forEach(function(t){Fu(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uu(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Fu(e,t,n){return(t=function(e){var t=function(e){if("object"!=Du(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Du(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Du(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bu(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function qu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Wu(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wu(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}$u.styleTagTransform=wa(),$u.setAttributes=ga(),$u.insert=pa().bind(null,"head"),$u.domAPI=fa(),$u.insertStyleElement=ya(),ua()(Iu.A,$u),Iu.A&&Iu.A.locals&&Iu.A.locals;const Hu=function(e){var t,n=e.planDetails,r=(0,i.useRef)(null),a=(0,i.useRef)(null),o=qu((0,i.useState)(!1),2),s=o[0],l=o[1],c=qu((0,i.useState)([]),2),u=(c[0],c[1],qu((0,i.useState)(""),2)),d=u[0],f=u[1],h=qu((0,i.useState)(""),2),p=h[0],m=h[1],g=qu((0,i.useState)(null),2),v=g[0],y=g[1],b=qu((0,i.useState)(!1),2),w=b[0],_=b[1],x=function(){var e,t=[];return null!=n&&n.dailyPlans&&n.dailyPlans.forEach(function(e){e.activities&&e.activities.forEach(function(n){n.location&&t.push({name:n.activity||"景点",location:n.location,day:e.day,time:n.time})})}),null!=n&&null!==(e=n.recommendations)&&void 0!==e&&e.attractions&&n.recommendations.attractions.forEach(function(e){t.push({name:e.name,location:e.location,type:"recommended"})}),t}(),E=((null==n?void 0:n.destination)||(null==n||null===(t=n.overview)||void 0===t?void 0:t.title)||"").toString();(0,i.useEffect)(function(){return function(){if(!window.BMapGL){var e=document.createElement("script");return e.src="https://api.map.baidu.com/api?v=1.0&type=webgl&ak=".concat("cFszv9aC8dtsnwqjcEoMm8meU2lhr4jz","&callback=initMap"),e.async=!0,window.initMap=function(){l(!0)},document.head.appendChild(e),function(){e.parentNode&&e.parentNode.removeChild(e),delete window.initMap}}l(!0)}()},[]),(0,i.useEffect)(function(){if(s&&r.current)try{var e=new window.BMapGL.Map(r.current);a.current=e;var t=x.length>0?x[0].location:"北京市";e.centerAndZoom(t,12),e.enableScrollWheelZoom(!0),e.addControl(new window.BMapGL.NavigationControl),e.addControl(new window.BMapGL.ScaleControl),window.BMapGL.OverviewMapControl&&e.addControl(new window.BMapGL.OverviewMapControl),k(e)}catch(e){console.error("地图初始化失败:",e)}},[s]);var k=function(e){if(x.length>0){var t=x[0];(new window.BMapGL.Geocoder).getPoint(t.location,function(t){t&&e.centerAndZoom(t,12)},E||void 0)}},S=function(e){return new Promise(function(t,n){try{(new window.BMapGL.Geocoder).getPoint(e,function(r){r?t(r):(console.warn("⚠️ 地理编码失败:",e,"cityHint:",E),n(new Error("无法解析地点: ".concat(e))))},E||void 0)}catch(e){n(e)}})},O=function(){var e,t=(e=Lu().m(function e(){var t,n,r,o,i,s,l,c;return Lu().w(function(e){for(;;)switch(e.p=e.n){case 0:if(d&&p&&a.current){e.n=1;break}return alert("请选择出发点和终点"),e.a(2);case 1:if(d!==p){e.n=2;break}return alert("出发点和终点不能相同"),e.a(2);case 2:return _(!0),e.p=3,t=a.current,e.n=4,Promise.all([S(d),S(p)]);case 4:n=e.v,r=qu(n,2),o=r[0],i=r[1],s=setTimeout(function(){_(!1),alert("路线规划请求超时，请检查网络连接或稍后重试")},15e3),(l=new window.BMapGL.DrivingRoute(t,{renderOptions:{map:t,autoViewport:!0,showTraffic:!1,enableDragging:!0,panel:null},onSearchComplete:function(e){clearTimeout(s),_(!1);var n=l.getStatus();if(0===n){var r=e.getPlan&&e.getPlan(0);if(r){var a=r.getRoute&&r.getRoute(0),o={distance:r.getDistance?r.getDistance(!0):"未知",duration:r.getDuration?r.getDuration(!0):"未知",steps:r.getNumRoutes?r.getNumRoutes():0};y(o);var i=[];try{if(r.getNumRoutes&&r.getNumRoutes()>0){var c=r.getRoute(0);if(c&&c.getNumSteps)for(var u=c.getNumSteps(),f=0;f<u;f++){var h=c.getStep(f);if(h){var m="";try{m=h.getDescription?h.getDescription():""}catch(e){}if(!m||""===m.trim()){var g=h.getDistance?h.getDistance(!0):"";m=g?"行驶 ".concat(g):"第 ".concat(f+1," 段路线")}i.push({instruction:m,distance:h.getDistance?h.getDistance(!0):"",duration:h.getDuration?h.getDuration(!0):""})}}}}catch(e){console.error("获取路线步骤信息失败:",e)}0===i.length&&(i=[{instruction:"从 ".concat(d," 出发"),distance:"",duration:""},{instruction:"前往 ".concat(p),distance:o.distance,duration:o.duration},{instruction:"到达目的地 ".concat(p),distance:"",duration:""}]);var v=i.map(function(e,t){var n=e.instruction;if(n&&""!==n.trim()&&n!=="行驶 ".concat(e.distance))n="📍 ".concat(n);else if(0===t)n="🚗 从 ".concat(d," 出发");else if(t===i.length-1)n="🏁 到达目的地 ".concat(p);else if(e.distance){var r=e.distance;n=r.includes("米")?"➡️ 直行 ".concat(r):r.includes("公里")?"🛣️ 行驶 ".concat(r):"📍 继续行驶 ".concat(r)}else n="📍 第 ".concat(t+1," 段路线");return{instruction:n,distance:e.distance,duration:e.duration}}),b=Mu(Mu({},o),{},{steps:v.length>0?v:[{instruction:"从 ".concat(d," 出发"),distance:"",duration:""},{instruction:"前往 ".concat(p),distance:o.distance,duration:o.duration},{instruction:"到达目的地 ".concat(p),distance:"",duration:""}]});if(y(b),a&&a.getPath){var w=a.getPath();if(w&&w.length>0){t.clearOverlays();var x=new window.BMapGL.Polyline(w,{strokeColor:"#ff0000",strokeWeight:6,strokeOpacity:.9});t.addOverlay(x);var E=new window.BMapGL.Marker(w[0]),k=new window.BMapGL.Marker(w[w.length-1]);t.addOverlay(E),t.addOverlay(k),t.setViewport(w),setTimeout(function(){t.panBy(1,1),t.panBy(-1,-1)},100),setTimeout(function(){},500)}}}else alert("未找到合适的路线")}else{var S="路线规划失败";switch(n){case 1:S="起点信息有误，请检查地点名称";break;case 2:S="终点信息有误，请检查地点名称";break;case 3:S="起终点信息有误，请检查地点名称";break;case 4:S="网络错误，请检查网络连接";break;case 5:S="请求超时，请稍后重试或检查地点名称是否准确";break;default:S="路线规划失败 (状态码: ".concat(n,")")}alert(S)}},onMarkersSet:function(){}})).search(o,i),e.n=6;break;case 5:e.p=5,c=e.v,_(!1),console.error("路线规划失败:",c),alert("路线规划失败，请稍后重试");case 6:return e.a(2)}},e,null,[[3,5]])}),function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){Bu(o,r,a,i,s,"next",e)}function s(e){Bu(o,r,a,i,s,"throw",e)}i(void 0)})});return function(){return t.apply(this,arguments)}}();return i.createElement("div",{className:"travel-map-container"},i.createElement("div",{className:"map-header"},i.createElement("h3",null,"🗺️ 路线规划"),i.createElement("p",null,"选择出发点和终点，查看最优路线")),i.createElement("div",{className:"map-controls"},i.createElement("div",{className:"route-selection"},i.createElement("div",{className:"selection-group"},i.createElement("label",{htmlFor:"startPoint"},"出发点："),i.createElement("select",{id:"startPoint",value:d,onChange:function(e){return f(e.target.value)}},i.createElement("option",{value:""},"请选择出发点"),x.map(function(e,t){return i.createElement("option",{key:"start-".concat(t),value:e.location},e.name," - ",e.location)}))),i.createElement("div",{className:"selection-group"},i.createElement("label",{htmlFor:"endPoint"},"终点："),i.createElement("select",{id:"endPoint",value:p,onChange:function(e){return m(e.target.value)}},i.createElement("option",{value:""},"请选择终点"),x.map(function(e,t){return i.createElement("option",{key:"end-".concat(t),value:e.location},e.name," - ",e.location)})))),i.createElement("div",{className:"route-actions"},i.createElement("button",{onClick:O,disabled:!d||!p||w,className:"plan-route-button"},w?"🔄 规划中...":"🚗 规划路线"),i.createElement("button",{onClick:function(){a.current&&a.current.clearOverlays(),y(null),f(""),m("")},className:"clear-route-button"},"🗑️ 清除路线"))),v&&i.createElement("div",{className:"route-info"},i.createElement("h4",null,"📊 路线信息"),i.createElement("div",{className:"route-stats"},i.createElement("div",{className:"stat-item"},i.createElement("span",{className:"label"},"距离："),i.createElement("span",{className:"value"},v.distance)),i.createElement("div",{className:"stat-item"},i.createElement("span",{className:"label"},"预计时间："),i.createElement("span",{className:"value"},v.duration)),i.createElement("div",{className:"stat-item"},i.createElement("span",{className:"label"},"路线数："),i.createElement("span",{className:"value"},Array.isArray(v.steps)?v.steps.length:v.steps,"条"))),Array.isArray(v.steps)&&v.steps.length>0&&i.createElement("div",{className:"route-steps"},i.createElement("h5",null,"🗺️ 路线详情"),i.createElement("div",{className:"steps-list"},v.steps.map(function(e,t){return i.createElement("div",{key:t,className:"step-item"},i.createElement("div",{className:"step-number"},t+1),i.createElement("div",{className:"step-content"},i.createElement("div",{className:"step-instruction"},e.instruction),(e.distance||e.duration)&&i.createElement("div",{className:"step-details"},e.distance&&i.createElement("span",{className:"distance"},"📏 ",e.distance),e.duration&&i.createElement("span",{className:"duration"},"⏱️ ",e.duration))))})))),i.createElement("div",{className:"map-container"},s?i.createElement("div",{ref:r,className:"baidu-map"}):i.createElement("div",{className:"map-loading"},i.createElement("div",{className:"loading-spinner"}),i.createElement("p",null,"地图加载中..."))),0===x.length&&i.createElement("div",{className:"no-attractions"},i.createElement("p",null,"⚠️ 未找到景点信息，无法进行路线规划")),!1)};function Vu(e){return Vu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vu(e)}function Gu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ku(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gu(Object(n),!0).forEach(function(t){Ju(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gu(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ju(e,t,n){return(t=function(e){var t=function(e){if("object"!=Vu(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Vu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Vu(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qu(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return Yu(c,"_invoke",function(n,r,a){var o,s,l,c=0,u=a||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,i}};function h(n,r){for(s=n,l=r,t=0;!d&&c&&!a&&t<u.length;t++){var a,o=u[t],h=f.p,p=o[2];n>3?(a=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((a=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(a||n>1)return i;throw d=!0,r}return function(a,u,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),s=u,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(c=2,o){if(s||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==i)break}catch(t){o=e,s=1,l=t}finally{c=1}}return{value:t,done:d}}}(n,a,o),!0),c}var i={};function s(){}function l(){}function c(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(Yu(t={},r,function(){return this}),t),d=c.prototype=s.prototype=Object.create(u);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,Yu(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=c,Yu(d,"constructor",c),Yu(c,"constructor",l),l.displayName="GeneratorFunction",Yu(c,a,"GeneratorFunction"),Yu(d),Yu(d,a,"Generator"),Yu(d,r,function(){return this}),Yu(d,"toString",function(){return"[object Generator]"}),(Qu=function(){return{w:o,m:f}})()}function Yu(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}Yu=function(e,t,n,r){function o(t,n){Yu(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},Yu(e,t,n,r)}function Xu(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function Zu(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){Xu(o,r,a,i,s,"next",e)}function s(e){Xu(o,r,a,i,s,"throw",e)}i(void 0)})}}function ed(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return td(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?td(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function td(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const nd=function(e){var t,n,r,a=e.plan,o=e.onClose,s=e.onUpdate,l=ed((0,i.useState)(!1),2),c=l[0],u=l[1],d=ed((0,i.useState)(""),2),f=d[0],h=d[1],p=ed((0,i.useState)(a.status),2),m=p[0],g=p[1],v=ed((0,i.useState)(a.status),2),y=v[0],b=v[1],w=ee(),_=function(){var e=Zu(Qu().m(function e(){var t,n,r,o;return Qu().w(function(e){for(;;)switch(e.p=e.n){case 0:if(m!==y){e.n=1;break}return e.a(2);case 1:return u(!0),h(""),e.p=2,e.n=3,sa.update(a.id,{status:m});case 3:t=e.v,n=t.data,(r=t.error)?h("更新状态失败: "+r.message):(s&&s(n[0]),b(m),alert("状态更新成功！")),e.n=5;break;case 4:e.p=4,o=e.v,h("更新状态时发生错误"),console.error("Status update error:",o);case 5:return e.p=5,u(!1),e.f(5);case 6:return e.a(2)}},e,null,[[2,4,5,6]])}));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Zu(Qu().m(function e(){var t,n,r;return Qu().w(function(e){for(;;)switch(e.p=e.n){case 0:if(window.confirm("确定要删除这个旅行计划吗？此操作无法撤销。")){e.n=1;break}return e.a(2);case 1:return u(!0),h(""),e.p=2,e.n=3,sa.delete(a.id);case 3:t=e.v,(n=t.error)?h("删除计划失败: "+n.message):(s&&s(Ku(Ku({},a),{},{deleted:!0})),alert("计划删除成功！"),o(),w("/dashboard")),e.n=5;break;case 4:e.p=4,r=e.v,h("删除计划时发生错误"),console.error("Delete plan error:",r);case 5:return e.p=5,u(!1),e.f(5);case 6:return e.a(2)}},e,null,[[2,4,5,6]])}));return function(){return e.apply(this,arguments)}}(),E=function(e){return new Date(e).toLocaleDateString("zh-CN")},k=a.plan_details||{};return i.createElement("div",{className:"travel-planner-container"},i.createElement("div",{className:"travel-planner-card"},i.createElement("div",{className:"planner-header"},i.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},i.createElement("div",null,i.createElement("h1",null,"📋 旅行计划详情"),i.createElement("p",null,a.destination," - ",(null===(t=k.overview)||void 0===t?void 0:t.title)||"AI生成的旅行计划")),i.createElement("button",{onClick:o,className:"close-button"},"✕ 关闭"))),i.createElement("div",{className:"status-section"},i.createElement("h3",null,"📊 计划状态"),i.createElement("div",{style:{display:"flex",gap:"15px",alignItems:"center",flexWrap:"wrap"}},i.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},i.createElement("span",{style:{fontWeight:"600"}},"当前状态："),i.createElement("span",{style:{background:function(e){switch(e){case"planning":return"#ed8936";case"confirmed":return"#4299e1";case"in_progress":return"#48bb78";case"completed":return"#38a169";case"cancelled":return"#e53e3e";default:return"#718096"}}(y),color:"white",padding:"4px 12px",borderRadius:"20px",fontSize:"0.9rem",fontWeight:"600"}},function(e){switch(e){case"planning":return"规划中";case"confirmed":return"已确认";case"in_progress":return"进行中";case"completed":return"已完成";case"cancelled":return"已取消";default:return"未知"}}(y))),i.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},i.createElement("span",{style:{fontWeight:"600"}},"更新为："),i.createElement("select",{value:m,onChange:function(e){return g(e.target.value)},style:{padding:"6px 12px",border:"2px solid #e2e8f0",borderRadius:"6px",fontSize:"0.9rem"}},i.createElement("option",{value:"planning"},"规划中"),i.createElement("option",{value:"confirmed"},"已确认"),i.createElement("option",{value:"in_progress"},"进行中"),i.createElement("option",{value:"completed"},"已完成"),i.createElement("option",{value:"cancelled"},"已取消")),i.createElement("button",{onClick:_,disabled:c||m===y,style:{padding:"6px 16px",background:m===y?"#ccc":"#48bb78",color:"white",border:"none",borderRadius:"6px",fontSize:"0.9rem",cursor:m===y?"not-allowed":"pointer"}},c?"更新中...":"更新状态"),i.createElement("button",{onClick:x,disabled:c,style:{padding:"6px 16px",background:"#e53e3e",color:"white",border:"none",borderRadius:"6px",fontSize:"0.9rem",cursor:c?"not-allowed":"pointer",marginLeft:"10px"}},c?"删除中...":"删除计划"))),f&&i.createElement("div",{style:{background:"#fed7d7",color:"#c53030",padding:"10px",borderRadius:"6px",marginTop:"10px",fontSize:"0.9rem"}},f)),i.createElement("div",{className:"plan-overview"},i.createElement("h3",null,"📋 基本信息"),i.createElement("div",{className:"overview-grid"},i.createElement("div",{className:"overview-item"},i.createElement("span",{className:"label"},"目的地："),i.createElement("span",{className:"value"},a.destination)),i.createElement("div",{className:"overview-item"},i.createElement("span",{className:"label"},"出发日期："),i.createElement("span",{className:"value"},E(a.start_date))),i.createElement("div",{className:"overview-item"},i.createElement("span",{className:"label"},"结束日期："),i.createElement("span",{className:"value"},E(a.end_date))),i.createElement("div",{className:"overview-item"},i.createElement("span",{className:"label"},"旅行天数："),i.createElement("span",{className:"value"},(null===(n=k.overview)||void 0===n?void 0:n.totalDays)||"未知","天")),i.createElement("div",{className:"overview-item"},i.createElement("span",{className:"label"},"预算："),i.createElement("span",{className:"value"},"¥",a.budget)),i.createElement("div",{className:"overview-item"},i.createElement("span",{className:"label"},"人数："),i.createElement("span",{className:"value"},a.travelers,"人"))),a.preferences&&i.createElement("div",{style:{marginTop:"20px"}},i.createElement("h4",null,"旅行偏好："),i.createElement("p",{style:{color:"#4a5568",lineHeight:"1.6"}},a.preferences)),a.special_needs&&i.createElement("div",{style:{marginTop:"15px"}},i.createElement("h4",null,"特殊需求："),i.createElement("p",{style:{color:"#4a5568",lineHeight:"1.6"}},a.special_needs))),(null===(r=k.overview)||void 0===r?void 0:r.summary)&&i.createElement("div",{className:"plan-summary"},i.createElement("h3",null,"🎯 行程概览"),i.createElement("p",null,k.overview.summary)),k.dailyPlans&&k.dailyPlans.length>0&&i.createElement("div",{className:"daily-plans"},i.createElement("h3",null,"🗓️ 每日行程安排"),k.dailyPlans.map(function(e,t){return i.createElement("div",{key:t,className:"day-plan"},i.createElement("h4",null,"第",e.day,"天 - ",e.title),e.activities&&e.activities.length>0&&i.createElement("div",{className:"activities"},i.createElement("h5",null,"📅 活动安排"),e.activities.map(function(e,t){return i.createElement("div",{key:t,className:"activity"},i.createElement("div",{className:"activity-time"},e.time),i.createElement("div",{className:"activity-content"},i.createElement("div",{className:"activity-title"},e.activity),i.createElement("div",{className:"activity-location"},"📍 ",e.location),e.description&&i.createElement("div",{className:"activity-description"},e.description)))})))})),k.recommendations&&i.createElement("div",{className:"recommendations"},i.createElement("h3",null,"🌟 推荐清单"),k.recommendations.attractions&&k.recommendations.attractions.length>0&&i.createElement("div",{className:"recommendation-section"},i.createElement("h4",null,"🏛️ 必游景点"),i.createElement("div",{className:"recommendation-grid"},k.recommendations.attractions.map(function(e,t){return i.createElement("div",{key:t,className:"recommendation-item"},i.createElement("h5",null,e.name),i.createElement("p",null,e.description),i.createElement("div",{className:"recommendation-meta"},i.createElement("span",null,"📍 ",e.location),e.ticketPrice&&i.createElement("span",null,"💰 ",e.ticketPrice)))}))),k.recommendations.restaurants&&k.recommendations.restaurants.length>0&&i.createElement("div",{className:"recommendation-section"},i.createElement("h4",null,"🍽️ 美食推荐"),i.createElement("div",{className:"recommendation-grid"},k.recommendations.restaurants.map(function(e,t){return i.createElement("div",{key:t,className:"recommendation-item"},i.createElement("h5",null,e.name),i.createElement("p",null,e.description),i.createElement("div",{className:"recommendation-meta"},i.createElement("span",null,"📍 ",e.location),i.createElement("span",null,"🍴 ",e.cuisine)))}))),k.recommendations.accommodations&&k.recommendations.accommodations.length>0&&i.createElement("div",{className:"recommendation-section"},i.createElement("h4",null,"🏨 住宿推荐"),i.createElement("div",{className:"recommendation-grid"},k.recommendations.accommodations.map(function(e,t){return i.createElement("div",{key:t,className:"recommendation-item"},i.createElement("h5",null,e.name),i.createElement("p",null,e.description),i.createElement("div",{className:"recommendation-meta"},i.createElement("span",null,"📍 ",e.location),i.createElement("span",null,"🏨 ",e.type)))})))),k.budget&&i.createElement("div",{className:"budget-section"},i.createElement("h3",null,"💰 预算分配"),i.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"}},Object.entries(k.budget.breakdown||{}).map(function(e){var t=ed(e,2),n=t[0],r=t[1];return i.createElement("div",{key:n,style:{background:"#f7fafc",padding:"15px",borderRadius:"8px",border:"2px solid #e2e8f0"}},i.createElement("div",{style:{fontWeight:"600",color:"#2d3748",marginBottom:"5px"}},"accommodation"===n?"住宿":"transportation"===n?"交通":"meals"===n?"餐饮":"attractions"===n?"景点":"shopping"===n?"购物":"miscellaneous"===n?"其他":n),i.createElement("div",{style:{fontSize:"1.2rem",fontWeight:"700",color:"#667eea"}},"¥",r))}))),k.tips&&k.tips.length>0&&i.createElement("div",{className:"travel-tips"},i.createElement("h3",null,"💡 实用建议"),i.createElement("ul",null,k.tips.map(function(e,t){return i.createElement("li",{key:t},e)}))),i.createElement("div",{style:{marginTop:"30px",padding:"15px",background:"#f7fafc",borderRadius:"8px",border:"2px solid #e2e8f0"}},i.createElement("p",{style:{color:"#718096",fontSize:"0.9rem",margin:"0"}},i.createElement("strong",null,"创建时间："),E(a.created_at),a.updated_at&&a.updated_at!==a.created_at&&i.createElement("span",null," | ",i.createElement("strong",null,"更新时间："),E(a.updated_at)))),i.createElement(Ru,{planId:a.id,planDetails:{budget:a.budget,destination:a.destination,startDate:a.start_date,endDate:a.end_date}}),i.createElement(Hu,{planDetails:k})))};var rd=a(667),ad={};function od(e){return od="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},od(e)}function id(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function sd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?id(Object(n),!0).forEach(function(t){ld(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):id(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ld(e,t,n){return(t=function(e){var t=function(e){if("object"!=od(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=od(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==od(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cd(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return ud(c,"_invoke",function(n,r,a){var o,s,l,c=0,u=a||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,i}};function h(n,r){for(s=n,l=r,t=0;!d&&c&&!a&&t<u.length;t++){var a,o=u[t],h=f.p,p=o[2];n>3?(a=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((a=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(a||n>1)return i;throw d=!0,r}return function(a,u,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),s=u,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(c=2,o){if(s||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==i)break}catch(t){o=e,s=1,l=t}finally{c=1}}return{value:t,done:d}}}(n,a,o),!0),c}var i={};function s(){}function l(){}function c(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(ud(t={},r,function(){return this}),t),d=c.prototype=s.prototype=Object.create(u);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,ud(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=c,ud(d,"constructor",c),ud(c,"constructor",l),l.displayName="GeneratorFunction",ud(c,a,"GeneratorFunction"),ud(d),ud(d,a,"Generator"),ud(d,r,function(){return this}),ud(d,"toString",function(){return"[object Generator]"}),(cd=function(){return{w:o,m:f}})()}function ud(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}ud=function(e,t,n,r){function o(t,n){ud(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},ud(e,t,n,r)}function dd(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function fd(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){dd(o,r,a,i,s,"next",e)}function s(e){dd(o,r,a,i,s,"throw",e)}i(void 0)})}}function hd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,t)||pd(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pd(e,t){if(e){if("string"==typeof e)return md(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?md(e,t):void 0}}function md(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}ad.styleTagTransform=wa(),ad.setAttributes=ga(),ad.insert=pa().bind(null,"head"),ad.domAPI=fa(),ad.insertStyleElement=ya(),ua()(rd.A,ad),rd.A&&rd.A.locals&&rd.A.locals;const gd=function(e){var t=e.user,n=e.onClose,r=hd((0,i.useState)([]),2),a=r[0],o=r[1],s=hd((0,i.useState)(!0),2),l=s[0],c=s[1],u=hd((0,i.useState)(""),2),d=u[0],f=u[1],h=hd((0,i.useState)(!1),2),p=h[0],m=h[1],g=hd((0,i.useState)(null),2),v=g[0],y=g[1],b=hd((0,i.useState)({name:"",description:"",preferences:{travelStyle:"",accommodationType:"",foodPreferences:"",activityTypes:[],budgetRange:"",groupSize:"",specialNeeds:"",languagePreferences:"",transportationPreferences:"",seasonPreferences:[]}}),2),w=b[0],_=b[1];(0,i.useEffect)(function(){x()},[t]);var x=function(){var e=fd(cd().m(function e(){var n,r,a,i;return cd().w(function(e){for(;;)switch(e.p=e.n){case 0:if(null!=t&&t.id){e.n=1;break}return e.a(2);case 1:return e.p=1,c(!0),e.n=2,la.getByUser(t.id);case 2:n=e.v,r=n.data,(a=n.error)?f("获取偏好设置失败: "+a.message):o(r||[]),e.n=4;break;case 3:e.p=3,i=e.v,f("获取偏好设置时发生错误: "+i.message);case 4:return e.p=4,c(!1),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(){return e.apply(this,arguments)}}(),E=function(e){var t=e.target,n=t.name,r=t.value,a=t.type,o=t.checked;if(n.startsWith("preferences.")){var i=n.split(".")[1];_(function(e){return sd(sd({},e),{},{preferences:sd(sd({},e.preferences),{},ld({},i,"checkbox"===a?o?[].concat((t=e.preferences[i],function(e){if(Array.isArray(e))return md(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||pd(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[r]):e.preferences[i].filter(function(e){return e!==r}):r))});var t})}else _(function(e){return sd(sd({},e),{},ld({},n,r))})},k=function(){var e=fd(cd().m(function e(n){var r,o,i,s,l,c;return cd().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n.preventDefault(),f(""),w.name.trim()){e.n=1;break}return f("请输入偏好设置名称"),e.a(2);case 1:if(e.p=1,r={user_id:t.id,name:w.name.trim(),description:w.description.trim(),preferences:w.preferences,is_default:0===a.length},!v){e.n=6;break}return e.n=2,la.update(v.id,r);case 2:if(o=e.v,!(i=o.error)){e.n=3;break}f("更新偏好设置失败: "+i.message),e.n=5;break;case 3:return e.n=4,x();case 4:P();case 5:e.n=10;break;case 6:return e.n=7,la.create(r);case 7:if(s=e.v,!(l=s.error)){e.n=8;break}f("创建偏好设置失败: "+l.message),e.n=10;break;case 8:return e.n=9,x();case 9:P();case 10:e.n=12;break;case 11:e.p=11,c=e.v,f("保存偏好设置时发生错误: "+c.message);case 12:return e.a(2)}},e,null,[[1,11]])}));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=fd(cd().m(function e(t){var n,r,a;return cd().w(function(e){for(;;)switch(e.p=e.n){case 0:if(window.confirm("确定要删除这个偏好设置吗？")){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,la.delete(t);case 2:if(n=e.v,!(r=n.error)){e.n=3;break}f("删除偏好设置失败: "+r.message),e.n=4;break;case 3:return e.n=4,x();case 4:e.n=6;break;case 5:e.p=5,a=e.v,f("删除偏好设置时发生错误: "+a.message);case 6:return e.a(2)}},e,null,[[1,5]])}));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=fd(cd().m(function e(n){var r,a,o;return cd().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,la.setDefault(n,t.id);case 1:if(r=e.v,!(a=r.error)){e.n=2;break}f("设置默认偏好失败: "+a.message),e.n=3;break;case 2:return e.n=3,x();case 3:e.n=5;break;case 4:e.p=4,o=e.v,f("设置默认偏好时发生错误: "+o.message);case 5:return e.a(2)}},e,null,[[0,4]])}));return function(t){return e.apply(this,arguments)}}(),P=function(){_({name:"",description:"",preferences:{travelStyle:"",accommodationType:"",foodPreferences:"",activityTypes:[],budgetRange:"",groupSize:"",specialNeeds:"",languagePreferences:"",transportationPreferences:"",seasonPreferences:[]}}),y(null),m(!1)};return i.createElement("div",{className:"user-preferences-container"},i.createElement("div",{className:"preferences-header"},i.createElement("h2",null,"⚙️ 我的偏好设置"),i.createElement("p",null,"管理您的旅行偏好，让AI更好地为您规划个性化行程"),i.createElement("button",{onClick:n,className:"close-button"},"✕ 关闭")),d&&i.createElement("div",{className:"error-message"},d),i.createElement("div",{className:"preferences-content"},i.createElement("div",{className:"preferences-list"},i.createElement("div",{className:"list-header"},i.createElement("h3",null,"已保存的偏好设置"),i.createElement("button",{onClick:function(){return m(!0)},className:"add-preference-button"},"➕ 新建偏好设置")),l?i.createElement("div",{className:"loading-state"},i.createElement("div",{className:"loading-spinner"}),i.createElement("p",null,"加载偏好设置中...")):0===a.length?i.createElement("div",{className:"empty-state"},i.createElement("div",{className:"empty-icon"},"⚙️"),i.createElement("h4",null,"还没有偏好设置"),i.createElement("p",null,"创建您的第一个偏好设置，让AI更好地了解您的旅行喜好"),i.createElement("button",{onClick:function(){return m(!0)},className:"create-first-preference-button"},"创建第一个偏好设置")):i.createElement("div",{className:"preferences-grid"},a.map(function(e){return i.createElement("div",{key:e.id,className:"preference-card"},i.createElement("div",{className:"preference-header"},i.createElement("h4",null,e.name),e.is_default&&i.createElement("span",{className:"default-badge"},"默认")),e.description&&i.createElement("p",{className:"preference-description"},e.description),i.createElement("div",{className:"preference-details"},e.preferences.travelStyle&&i.createElement("div",{className:"preference-item"},i.createElement("span",{className:"label"},"旅行风格："),i.createElement("span",{className:"value"},e.preferences.travelStyle)),e.preferences.accommodationType&&i.createElement("div",{className:"preference-item"},i.createElement("span",{className:"label"},"住宿类型："),i.createElement("span",{className:"value"},e.preferences.accommodationType)),e.preferences.budgetRange&&i.createElement("div",{className:"preference-item"},i.createElement("span",{className:"label"},"预算范围："),i.createElement("span",{className:"value"},e.preferences.budgetRange)),e.preferences.activityTypes&&e.preferences.activityTypes.length>0&&i.createElement("div",{className:"preference-item"},i.createElement("span",{className:"label"},"活动类型："),i.createElement("span",{className:"value"},e.preferences.activityTypes.join("、")))),i.createElement("div",{className:"preference-actions"},!e.is_default&&i.createElement("button",{onClick:function(){return O(e.id)},className:"set-default-button"},"⭐ 设为默认"),i.createElement("button",{onClick:function(){return function(e){y(e),_({name:e.name,description:e.description||"",preferences:e.preferences}),m(!0)}(e)},className:"edit-button"},"✏️ 编辑"),i.createElement("button",{onClick:function(){return S(e.id)},className:"delete-button"},"🗑️ 删除")))}))),p&&i.createElement("div",{className:"preference-form-section"},i.createElement("div",{className:"form-header"},i.createElement("h3",null,v?"编辑偏好设置":"新建偏好设置"),i.createElement("button",{onClick:P,className:"cancel-button"},"取消")),i.createElement("form",{onSubmit:k,className:"preference-form"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"name"},"偏好设置名称 *"),i.createElement("input",{type:"text",id:"name",name:"name",value:w.name,onChange:E,required:!0,placeholder:"例如：商务旅行、家庭度假、背包客"})),i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"description"},"描述"),i.createElement("textarea",{id:"description",name:"description",value:w.description,onChange:E,rows:"2",placeholder:"简单描述这个偏好设置的用途..."})),i.createElement("div",{className:"form-row"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"travelStyle"},"旅行风格"),i.createElement("select",{id:"travelStyle",name:"preferences.travelStyle",value:w.preferences.travelStyle,onChange:E},i.createElement("option",{value:""},"请选择"),i.createElement("option",{value:"休闲度假"},"休闲度假"),i.createElement("option",{value:"文化探索"},"文化探索"),i.createElement("option",{value:"冒险刺激"},"冒险刺激"),i.createElement("option",{value:"商务出行"},"商务出行"),i.createElement("option",{value:"家庭亲子"},"家庭亲子"),i.createElement("option",{value:"浪漫蜜月"},"浪漫蜜月"))),i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"accommodationType"},"住宿类型"),i.createElement("select",{id:"accommodationType",name:"preferences.accommodationType",value:w.preferences.accommodationType,onChange:E},i.createElement("option",{value:""},"请选择"),i.createElement("option",{value:"豪华酒店"},"豪华酒店"),i.createElement("option",{value:"商务酒店"},"商务酒店"),i.createElement("option",{value:"精品酒店"},"精品酒店"),i.createElement("option",{value:"民宿"},"民宿"),i.createElement("option",{value:"青年旅社"},"青年旅社"),i.createElement("option",{value:"度假村"},"度假村"),i.createElement("option",{value:"公寓"},"公寓")))),i.createElement("div",{className:"form-row"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"budgetRange"},"预算范围"),i.createElement("select",{id:"budgetRange",name:"preferences.budgetRange",value:w.preferences.budgetRange,onChange:E},i.createElement("option",{value:""},"请选择"),i.createElement("option",{value:"经济型 (< 5000元)"},"经济型 (< 5000元)"),i.createElement("option",{value:"舒适型 (5000-15000元)"},"舒适型 (5000-15000元)"),i.createElement("option",{value:"豪华型 (15000-30000元)"},"豪华型 (15000-30000元)"),i.createElement("option",{value:"奢华型 (> 30000元)"},"奢华型 (> 30000元)"))),i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"groupSize"},"常用出行人数"),i.createElement("select",{id:"groupSize",name:"preferences.groupSize",value:w.preferences.groupSize,onChange:E},i.createElement("option",{value:""},"请选择"),i.createElement("option",{value:"1人"},"1人"),i.createElement("option",{value:"2人"},"2人"),i.createElement("option",{value:"3-4人"},"3-4人"),i.createElement("option",{value:"5-8人"},"5-8人"),i.createElement("option",{value:"9人以上"},"9人以上")))),i.createElement("div",{className:"form-group"},i.createElement("label",null,"喜欢的活动类型"),i.createElement("div",{className:"checkbox-group"},["文化历史","自然风光","美食体验","购物娱乐","户外运动","艺术展览","音乐演出","海滩度假","城市探索","乡村体验"].map(function(e){return i.createElement("label",{key:e,className:"checkbox-item"},i.createElement("input",{type:"checkbox",name:"preferences.activityTypes",value:e,checked:w.preferences.activityTypes.includes(e),onChange:E}),i.createElement("span",null,e))}))),i.createElement("div",{className:"form-group"},i.createElement("label",null,"偏好的季节"),i.createElement("div",{className:"checkbox-group"},["春季","夏季","秋季","冬季"].map(function(e){return i.createElement("label",{key:e,className:"checkbox-item"},i.createElement("input",{type:"checkbox",name:"preferences.seasonPreferences",value:e,checked:w.preferences.seasonPreferences.includes(e),onChange:E}),i.createElement("span",null,e))}))),i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"foodPreferences"},"饮食偏好"),i.createElement("textarea",{id:"foodPreferences",name:"preferences.foodPreferences",value:w.preferences.foodPreferences,onChange:E,rows:"2",placeholder:"例如：喜欢当地特色菜、素食、不吃辣等"})),i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"specialNeeds"},"特殊需求"),i.createElement("textarea",{id:"specialNeeds",name:"preferences.specialNeeds",value:w.preferences.specialNeeds,onChange:E,rows:"2",placeholder:"例如：无障碍设施、语言翻译、医疗需求等"})),i.createElement("div",{className:"form-actions"},i.createElement("button",{type:"submit",className:"save-button"},v?"💾 更新偏好设置":"💾 保存偏好设置"),i.createElement("button",{type:"button",onClick:P,className:"cancel-button"},"取消"))))))};var vd=a(275),yd={};function bd(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return wd(c,"_invoke",function(n,r,a){var o,s,l,c=0,u=a||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,i}};function h(n,r){for(s=n,l=r,t=0;!d&&c&&!a&&t<u.length;t++){var a,o=u[t],h=f.p,p=o[2];n>3?(a=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((a=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(a||n>1)return i;throw d=!0,r}return function(a,u,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),s=u,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(c=2,o){if(s||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==i)break}catch(t){o=e,s=1,l=t}finally{c=1}}return{value:t,done:d}}}(n,a,o),!0),c}var i={};function s(){}function l(){}function c(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(wd(t={},r,function(){return this}),t),d=c.prototype=s.prototype=Object.create(u);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,wd(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=c,wd(d,"constructor",c),wd(c,"constructor",l),l.displayName="GeneratorFunction",wd(c,a,"GeneratorFunction"),wd(d),wd(d,a,"Generator"),wd(d,r,function(){return this}),wd(d,"toString",function(){return"[object Generator]"}),(bd=function(){return{w:o,m:f}})()}function wd(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}wd=function(e,t,n,r){function o(t,n){wd(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},wd(e,t,n,r)}function _d(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function xd(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){_d(o,r,a,i,s,"next",e)}function s(e){_d(o,r,a,i,s,"throw",e)}i(void 0)})}}function Ed(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return kd(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kd(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}yd.styleTagTransform=wa(),yd.setAttributes=ga(),yd.insert=pa().bind(null,"head"),yd.domAPI=fa(),yd.insertStyleElement=ya(),ua()(vd.A,yd),vd.A&&vd.A.locals&&vd.A.locals;const Sd=function(e){var t=e.user,n=e.onLogout,r=Ed((0,i.useState)([]),2),a=r[0],o=r[1],s=Ed((0,i.useState)(!0),2),l=s[0],c=s[1],u=Ed((0,i.useState)(!1),2),d=u[0],f=u[1],h=Ed((0,i.useState)(null),2),p=h[0],m=h[1],g=Ed((0,i.useState)(!1),2),v=g[0],y=g[1],b=ee();(0,i.useEffect)(function(){k()},[t]);var w=function(){var e=xd(bd().m(function e(){return bd().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,n();case 1:b("/login");case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),_=function(){f(!0)},x=function(){y(!1)},E=function(){m(null)},k=function(){var e=xd(bd().m(function e(){var n,r;return bd().w(function(e){for(;;)switch(e.p=e.n){case 0:if(null==t||!t.id){e.n=5;break}return e.p=1,c(!0),e.n=2,sa.getByUser(t.id);case 2:n=e.v,r=n.data,n.error||o(r||[]),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.p=4,c(!1),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(){return e.apply(this,arguments)}}(),S=function(e){return new Date(e).toLocaleDateString("zh-CN")},O=function(e){switch(e){case"planning":return"#ed8936";case"confirmed":return"#4299e1";case"in_progress":return"#48bb78";case"completed":return"#38a169";case"cancelled":return"#e53e3e";default:return"#718096"}};return v?i.createElement("div",{className:"dashboard-container"},i.createElement("header",{className:"dashboard-header"},i.createElement("div",{className:"header-content"},i.createElement("div",{className:"header-left"},i.createElement("h1",null,"🌍 AI旅行规划师"),i.createElement("p",null,"欢迎回来，",null==t?void 0:t.name,"！")),i.createElement("div",{className:"header-right"},i.createElement("button",{onClick:x,className:"back-button"},"← 返回仪表板"),i.createElement("button",{onClick:w,className:"logout-button"},"退出登录")))),i.createElement(gd,{user:t,onClose:x})):d?i.createElement("div",{className:"dashboard-container"},i.createElement("header",{className:"dashboard-header"},i.createElement("div",{className:"header-content"},i.createElement("div",{className:"header-left"},i.createElement("h1",null,"🌍 AI旅行规划师"),i.createElement("p",null,"欢迎回来，",null==t?void 0:t.name,"！")),i.createElement("div",{className:"header-right"},i.createElement("button",{onClick:function(){return f(!1)},className:"back-button"},"← 返回仪表板"),i.createElement("button",{onClick:w,className:"logout-button"},"退出登录")))),i.createElement(Eu,{user:t,onPlanCreated:function(e){k(),f(!1)}})):p?i.createElement("div",{className:"dashboard-container"},i.createElement("header",{className:"dashboard-header"},i.createElement("div",{className:"header-content"},i.createElement("div",{className:"header-left"},i.createElement("h1",null,"🌍 AI旅行规划师"),i.createElement("p",null,"欢迎回来，",null==t?void 0:t.name,"！")),i.createElement("div",{className:"header-right"},i.createElement("button",{onClick:E,className:"back-button"},"← 返回仪表板"),i.createElement("button",{onClick:w,className:"logout-button"},"退出登录")))),i.createElement(nd,{plan:p,onClose:E,onUpdate:function(e){o(function(t){return t.map(function(t){return t.id===e.id?e:t})})}})):i.createElement("div",{className:"dashboard-container"},i.createElement("header",{className:"dashboard-header"},i.createElement("div",{className:"header-content"},i.createElement("div",{className:"header-left"},i.createElement("h1",null,"🌍 AI旅行规划师"),i.createElement("p",null,"欢迎回来，",null==t?void 0:t.name,"！")),i.createElement("div",{className:"header-right"},i.createElement("button",{onClick:w,className:"logout-button"},"退出登录")))),i.createElement("main",{className:"dashboard-main"},i.createElement("div",{className:"dashboard-content"},i.createElement("div",{className:"welcome-section"},i.createElement("h2",null,"我的旅行计划"),i.createElement("p",null,"管理您的旅行计划，开始规划下一次精彩旅程"),i.createElement("div",{className:"welcome-actions"},i.createElement("button",{onClick:_,className:"create-plan-button"},"✈️ 创建新计划"),i.createElement("button",{onClick:function(){y(!0)},className:"preferences-button"},"⚙️ 偏好设置"))),i.createElement("div",{className:"plans-section"},l?i.createElement("div",{className:"loading-state"},i.createElement("div",{className:"loading-spinner"},i.createElement("div",{className:"spinner"}),i.createElement("p",null,"加载旅行计划中..."))):0===a.length?i.createElement("div",{className:"empty-state"},i.createElement("div",{className:"empty-icon"},"🗺️"),i.createElement("h3",null,"还没有旅行计划"),i.createElement("p",null,"创建您的第一个旅行计划，开始探索世界吧！"),i.createElement("button",{onClick:_,className:"create-first-plan-button"},"创建第一个计划")):i.createElement("div",{className:"plans-grid"},a.map(function(e){return i.createElement("div",{key:e.id,className:"plan-card"},i.createElement("div",{className:"plan-header"},i.createElement("h3",null,e.destination),i.createElement("span",{className:"plan-status",style:{background:O(e.status),color:"white"}},function(e){switch(e){case"planning":return"规划中";case"confirmed":return"已确认";case"in_progress":return"进行中";case"completed":return"已完成";case"cancelled":return"已取消";default:return"未知"}}(e.status))),i.createElement("div",{className:"plan-details"},i.createElement("p",null,i.createElement("strong",null,"日期："),S(e.start_date)," - ",S(e.end_date)),i.createElement("p",null,i.createElement("strong",null,"预算："),"¥",e.budget),i.createElement("p",null,i.createElement("strong",null,"人数："),e.travelers,"人"),e.preferences&&i.createElement("p",null,i.createElement("strong",null,"偏好："),e.preferences.substring(0,50),e.preferences.length>50?"...":"")),i.createElement("div",{className:"plan-actions"},i.createElement("button",{className:"view-button",onClick:function(){return function(e){m(e)}(e)}},"查看详情")))}))),i.createElement("div",{className:"stats-section"},i.createElement("div",{className:"stats-grid"},i.createElement("div",{className:"stat-card"},i.createElement("div",{className:"stat-icon"},"📅"),i.createElement("div",{className:"stat-content"},i.createElement("h3",null,a.length),i.createElement("p",null,"总计划数"))),i.createElement("div",{className:"stat-card"},i.createElement("div",{className:"stat-icon"},"🎯"),i.createElement("div",{className:"stat-content"},i.createElement("h3",null,a.filter(function(e){return"planning"===e.status}).length),i.createElement("p",null,"规划中"))),i.createElement("div",{className:"stat-card"},i.createElement("div",{className:"stat-icon"},"✅"),i.createElement("div",{className:"stat-content"},i.createElement("h3",null,a.filter(function(e){return"completed"===e.status}).length),i.createElement("p",null,"已完成"))),i.createElement("div",{className:"stat-card"},i.createElement("div",{className:"stat-icon"},"🌍"),i.createElement("div",{className:"stat-content"},i.createElement("h3",null,new Set(a.map(function(e){return e.destination})).size),i.createElement("p",null,"目的地"))),i.createElement("div",{className:"stat-card"},i.createElement("div",{className:"stat-icon"},"💰"),i.createElement("div",{className:"stat-content"},i.createElement("h3",null,"¥",a.reduce(function(e,t){return e+(t.budget||0)},0)),i.createElement("p",null,"总预算"))),i.createElement("div",{className:"stat-card"},i.createElement("div",{className:"stat-icon"},"👥"),i.createElement("div",{className:"stat-content"},i.createElement("h3",null,a.reduce(function(e,t){return e+(t.travelers||0)},0)),i.createElement("p",null,"总出行人数"))))))))};var Od=a(626),Pd={};function Td(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return Cd(c,"_invoke",function(n,r,a){var o,s,l,c=0,u=a||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,f.n=n,i}};function h(n,r){for(s=n,l=r,t=0;!d&&c&&!a&&t<u.length;t++){var a,o=u[t],h=f.p,p=o[2];n>3?(a=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((a=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(a||n>1)return i;throw d=!0,r}return function(a,u,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),s=u,l=p;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(c=2,o){if(s||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==i)break}catch(t){o=e,s=1,l=t}finally{c=1}}return{value:t,done:d}}}(n,a,o),!0),c}var i={};function s(){}function l(){}function c(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(Cd(t={},r,function(){return this}),t),d=c.prototype=s.prototype=Object.create(u);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,Cd(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=c,Cd(d,"constructor",c),Cd(c,"constructor",l),l.displayName="GeneratorFunction",Cd(c,a,"GeneratorFunction"),Cd(d),Cd(d,a,"Generator"),Cd(d,r,function(){return this}),Cd(d,"toString",function(){return"[object Generator]"}),(Td=function(){return{w:o,m:f}})()}function Cd(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}Cd=function(e,t,n,r){function o(t,n){Cd(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},Cd(e,t,n,r)}function Nd(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function jd(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){Nd(o,r,a,i,s,"next",e)}function s(e){Nd(o,r,a,i,s,"throw",e)}i(void 0)})}}function Ad(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Rd(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rd(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Pd.styleTagTransform=wa(),Pd.setAttributes=ga(),Pd.insert=pa().bind(null,"head"),Pd.domAPI=fa(),Pd.insertStyleElement=ya(),ua()(Od.A,Pd),Od.A&&Od.A.locals&&Od.A.locals;const Id=function(){var e=Ad((0,i.useState)(null),2),t=e[0],n=e[1],r=Ad((0,i.useState)(!0),2),a=r[0],o=r[1];(0,i.useEffect)(function(){var e=function(){var e=jd(Td().m(function e(){var t,r,a,i;return Td().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,oa.getSession();case 1:t=e.v,null!=(r=t.session)&&r.user&&(i={id:r.user.id,email:r.user.email,name:(null===(a=r.user.user_metadata)||void 0===a?void 0:a.name)||r.user.email.split("@")[0],created_at:r.user.created_at},n(i)),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.p=3,o(!1),e.f(3);case 4:return e.a(2)}},e,null,[[0,2,3,4]])}));return function(){return e.apply(this,arguments)}}();e();var t=oa.onAuthStateChange(function(){var e=jd(Td().m(function e(t,r){var a,o;return Td().w(function(e){for(;;)switch(e.n){case 0:"SIGNED_IN"===t&&null!=r&&r.user?(o={id:r.user.id,email:r.user.email,name:(null===(a=r.user.user_metadata)||void 0===a?void 0:a.name)||r.user.email.split("@")[0],created_at:r.user.created_at},n(o)):"SIGNED_OUT"===t&&n(null);case 1:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}()),r=t.data.subscription;return function(){return null==r?void 0:r.unsubscribe()}},[]);var s=function(e){n(e)},l=function(){var e=jd(Td().m(function e(){return Td().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,oa.signOut();case 1:n(null),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}();return a?i.createElement("div",{className:"loading-container"},i.createElement("div",{className:"loading-spinner"},i.createElement("div",{className:"spinner"}),i.createElement("p",null,"加载中..."))):i.createElement(be,null,i.createElement("div",{className:"App"},i.createElement(pe,null,i.createElement(fe,{path:"/login",element:t?i.createElement(de,{to:"/dashboard",replace:!0}):i.createElement(Aa,{onLogin:s})}),i.createElement(fe,{path:"/register",element:t?i.createElement(de,{to:"/dashboard",replace:!0}):i.createElement(Ba,{onLogin:s})}),i.createElement(fe,{path:"/dashboard",element:t?i.createElement(Sd,{user:t,onLogout:l}):i.createElement(de,{to:"/login",replace:!0})}),i.createElement(fe,{path:"/",element:i.createElement(de,{to:t?"/dashboard":"/login",replace:!0})}))))};var $d=a(523),Dd={};Dd.styleTagTransform=wa(),Dd.setAttributes=ga(),Dd.insert=pa().bind(null,"head"),Dd.domAPI=fa(),Dd.insertStyleElement=ya(),ua()($d.A,Dd),$d.A&&$d.A.locals&&$d.A.locals,l.createRoot(document.getElementById("root")).render(i.createElement(i.StrictMode,null,i.createElement(Id,null)))})();